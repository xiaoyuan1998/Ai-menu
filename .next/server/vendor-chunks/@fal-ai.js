"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@fal-ai";
exports.ids = ["vendor-chunks/@fal-ai"];
exports.modules = {

/***/ "(rsc)/./node_modules/@fal-ai/client/node_modules/eventsource-parser/dist/index.cjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@fal-ai/client/node_modules/eventsource-parser/dist/index.cjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nfunction createParser(onParse) {\n    let isFirstChunk;\n    let buffer;\n    let startingPosition;\n    let startingFieldLength;\n    let eventId;\n    let eventName;\n    let data;\n    reset();\n    return {\n        feed,\n        reset\n    };\n    function reset() {\n        isFirstChunk = true;\n        buffer = \"\";\n        startingPosition = 0;\n        startingFieldLength = -1;\n        eventId = void 0;\n        eventName = void 0;\n        data = \"\";\n    }\n    function feed(chunk) {\n        buffer = buffer ? buffer + chunk : chunk;\n        if (isFirstChunk && hasBom(buffer)) {\n            buffer = buffer.slice(BOM.length);\n        }\n        isFirstChunk = false;\n        const length = buffer.length;\n        let position = 0;\n        let discardTrailingNewline = false;\n        while(position < length){\n            if (discardTrailingNewline) {\n                if (buffer[position] === \"\\n\") {\n                    ++position;\n                }\n                discardTrailingNewline = false;\n            }\n            let lineLength = -1;\n            let fieldLength = startingFieldLength;\n            let character;\n            for(let index = startingPosition; lineLength < 0 && index < length; ++index){\n                character = buffer[index];\n                if (character === \":\" && fieldLength < 0) {\n                    fieldLength = index - position;\n                } else if (character === \"\\r\") {\n                    discardTrailingNewline = true;\n                    lineLength = index - position;\n                } else if (character === \"\\n\") {\n                    lineLength = index - position;\n                }\n            }\n            if (lineLength < 0) {\n                startingPosition = length - position;\n                startingFieldLength = fieldLength;\n                break;\n            } else {\n                startingPosition = 0;\n                startingFieldLength = -1;\n            }\n            parseEventStreamLine(buffer, position, fieldLength, lineLength);\n            position += lineLength + 1;\n        }\n        if (position === length) {\n            buffer = \"\";\n        } else if (position > 0) {\n            buffer = buffer.slice(position);\n        }\n    }\n    function parseEventStreamLine(lineBuffer, index, fieldLength, lineLength) {\n        if (lineLength === 0) {\n            if (data.length > 0) {\n                onParse({\n                    type: \"event\",\n                    id: eventId,\n                    event: eventName || void 0,\n                    data: data.slice(0, -1)\n                });\n                data = \"\";\n                eventId = void 0;\n            }\n            eventName = void 0;\n            return;\n        }\n        const noValue = fieldLength < 0;\n        const field = lineBuffer.slice(index, index + (noValue ? lineLength : fieldLength));\n        let step = 0;\n        if (noValue) {\n            step = lineLength;\n        } else if (lineBuffer[index + fieldLength + 1] === \" \") {\n            step = fieldLength + 2;\n        } else {\n            step = fieldLength + 1;\n        }\n        const position = index + step;\n        const valueLength = lineLength - step;\n        const value = lineBuffer.slice(position, position + valueLength).toString();\n        if (field === \"data\") {\n            data += value ? \"\".concat(value, \"\\n\") : \"\\n\";\n        } else if (field === \"event\") {\n            eventName = value;\n        } else if (field === \"id\" && !value.includes(\"\\x00\")) {\n            eventId = value;\n        } else if (field === \"retry\") {\n            const retry = parseInt(value, 10);\n            if (!Number.isNaN(retry)) {\n                onParse({\n                    type: \"reconnect-interval\",\n                    value: retry\n                });\n            }\n        }\n    }\n}\nconst BOM = [\n    239,\n    187,\n    191\n];\nfunction hasBom(buffer) {\n    return BOM.every((charCode, index)=>buffer.charCodeAt(index) === charCode);\n}\nexports.createParser = createParser; //# sourceMappingURL=index.cjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvbm9kZV9tb2R1bGVzL2V2ZW50c291cmNlLXBhcnNlci9kaXN0L2luZGV4LmNqcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUVBQSw4Q0FBNkM7SUFDM0NHLE9BQU87QUFDVCxDQUFDLEVBQUM7QUFDRixTQUFTQyxhQUFhQyxPQUFPO0lBQzNCLElBQUlDO0lBQ0osSUFBSUM7SUFDSixJQUFJQztJQUNKLElBQUlDO0lBQ0osSUFBSUM7SUFDSixJQUFJQztJQUNKLElBQUlDO0lBQ0pDO0lBQ0EsT0FBTztRQUNMQztRQUNBRDtJQUNGO0lBQ0EsU0FBU0E7UUFDUFAsZUFBZTtRQUNmQyxTQUFTO1FBQ1RDLG1CQUFtQjtRQUNuQkMsc0JBQXNCLENBQUM7UUFDdkJDLFVBQVUsS0FBSztRQUNmQyxZQUFZLEtBQUs7UUFDakJDLE9BQU87SUFDVDtJQUNBLFNBQVNFLEtBQUtDLEtBQUs7UUFDakJSLFNBQVNBLFNBQVNBLFNBQVNRLFFBQVFBO1FBQ25DLElBQUlULGdCQUFnQlUsT0FBT1QsU0FBUztZQUNsQ0EsU0FBU0EsT0FBT1UsS0FBSyxDQUFDQyxJQUFJQyxNQUFNO1FBQ2xDO1FBQ0FiLGVBQWU7UUFDZixNQUFNYSxTQUFTWixPQUFPWSxNQUFNO1FBQzVCLElBQUlDLFdBQVc7UUFDZixJQUFJQyx5QkFBeUI7UUFDN0IsTUFBT0QsV0FBV0QsT0FBUTtZQUN4QixJQUFJRSx3QkFBd0I7Z0JBQzFCLElBQUlkLE1BQU0sQ0FBQ2EsU0FBUyxLQUFLLE1BQU07b0JBQzdCLEVBQUVBO2dCQUNKO2dCQUNBQyx5QkFBeUI7WUFDM0I7WUFDQSxJQUFJQyxhQUFhLENBQUM7WUFDbEIsSUFBSUMsY0FBY2Q7WUFDbEIsSUFBSWU7WUFDSixJQUFLLElBQUlDLFFBQVFqQixrQkFBa0JjLGFBQWEsS0FBS0csUUFBUU4sUUFBUSxFQUFFTSxNQUFPO2dCQUM1RUQsWUFBWWpCLE1BQU0sQ0FBQ2tCLE1BQU07Z0JBQ3pCLElBQUlELGNBQWMsT0FBT0QsY0FBYyxHQUFHO29CQUN4Q0EsY0FBY0UsUUFBUUw7Z0JBQ3hCLE9BQU8sSUFBSUksY0FBYyxNQUFNO29CQUM3QkgseUJBQXlCO29CQUN6QkMsYUFBYUcsUUFBUUw7Z0JBQ3ZCLE9BQU8sSUFBSUksY0FBYyxNQUFNO29CQUM3QkYsYUFBYUcsUUFBUUw7Z0JBQ3ZCO1lBQ0Y7WUFDQSxJQUFJRSxhQUFhLEdBQUc7Z0JBQ2xCZCxtQkFBbUJXLFNBQVNDO2dCQUM1Qlgsc0JBQXNCYztnQkFDdEI7WUFDRixPQUFPO2dCQUNMZixtQkFBbUI7Z0JBQ25CQyxzQkFBc0IsQ0FBQztZQUN6QjtZQUNBaUIscUJBQXFCbkIsUUFBUWEsVUFBVUcsYUFBYUQ7WUFDcERGLFlBQVlFLGFBQWE7UUFDM0I7UUFDQSxJQUFJRixhQUFhRCxRQUFRO1lBQ3ZCWixTQUFTO1FBQ1gsT0FBTyxJQUFJYSxXQUFXLEdBQUc7WUFDdkJiLFNBQVNBLE9BQU9VLEtBQUssQ0FBQ0c7UUFDeEI7SUFDRjtJQUNBLFNBQVNNLHFCQUFxQkMsVUFBVSxFQUFFRixLQUFLLEVBQUVGLFdBQVcsRUFBRUQsVUFBVTtRQUN0RSxJQUFJQSxlQUFlLEdBQUc7WUFDcEIsSUFBSVYsS0FBS08sTUFBTSxHQUFHLEdBQUc7Z0JBQ25CZCxRQUFRO29CQUNOdUIsTUFBTTtvQkFDTkMsSUFBSW5CO29CQUNKb0IsT0FBT25CLGFBQWEsS0FBSztvQkFDekJDLE1BQU1BLEtBQUtLLEtBQUssQ0FBQyxHQUFHLENBQUM7Z0JBRXZCO2dCQUVBTCxPQUFPO2dCQUNQRixVQUFVLEtBQUs7WUFDakI7WUFDQUMsWUFBWSxLQUFLO1lBQ2pCO1FBQ0Y7UUFDQSxNQUFNb0IsVUFBVVIsY0FBYztRQUM5QixNQUFNUyxRQUFRTCxXQUFXVixLQUFLLENBQUNRLE9BQU9BLFFBQVNNLENBQUFBLFVBQVVULGFBQWFDLFdBQVU7UUFDaEYsSUFBSVUsT0FBTztRQUNYLElBQUlGLFNBQVM7WUFDWEUsT0FBT1g7UUFDVCxPQUFPLElBQUlLLFVBQVUsQ0FBQ0YsUUFBUUYsY0FBYyxFQUFFLEtBQUssS0FBSztZQUN0RFUsT0FBT1YsY0FBYztRQUN2QixPQUFPO1lBQ0xVLE9BQU9WLGNBQWM7UUFDdkI7UUFDQSxNQUFNSCxXQUFXSyxRQUFRUTtRQUN6QixNQUFNQyxjQUFjWixhQUFhVztRQUNqQyxNQUFNOUIsUUFBUXdCLFdBQVdWLEtBQUssQ0FBQ0csVUFBVUEsV0FBV2MsYUFBYUMsUUFBUTtRQUN6RSxJQUFJSCxVQUFVLFFBQVE7WUFDcEJwQixRQUFRVCxRQUFRLEdBQUdpQyxNQUFNLENBQUNqQyxPQUFPLFFBQVE7UUFDM0MsT0FBTyxJQUFJNkIsVUFBVSxTQUFTO1lBQzVCckIsWUFBWVI7UUFDZCxPQUFPLElBQUk2QixVQUFVLFFBQVEsQ0FBQzdCLE1BQU1rQyxRQUFRLENBQUMsU0FBTztZQUNsRDNCLFVBQVVQO1FBQ1osT0FBTyxJQUFJNkIsVUFBVSxTQUFTO1lBQzVCLE1BQU1NLFFBQVFDLFNBQVNwQyxPQUFPO1lBQzlCLElBQUksQ0FBQ3FDLE9BQU9DLEtBQUssQ0FBQ0gsUUFBUTtnQkFDeEJqQyxRQUFRO29CQUNOdUIsTUFBTTtvQkFDTnpCLE9BQU9tQztnQkFDVDtZQUNGO1FBQ0Y7SUFDRjtBQUNGO0FBQ0EsTUFBTXBCLE1BQU07SUFBQztJQUFLO0lBQUs7Q0FBSTtBQUMzQixTQUFTRixPQUFPVCxNQUFNO0lBQ3BCLE9BQU9XLElBQUl3QixLQUFLLENBQUMsQ0FBQ0MsVUFBVWxCLFFBQVVsQixPQUFPcUMsVUFBVSxDQUFDbkIsV0FBV2tCO0FBQ3JFO0FBQ0F6QyxvQkFBb0IsR0FBR0UsY0FDdkIsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWVudS1nZW5lcmF0b3IvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvbm9kZV9tb2R1bGVzL2V2ZW50c291cmNlLXBhcnNlci9kaXN0L2luZGV4LmNqcz9hZmU0Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5mdW5jdGlvbiBjcmVhdGVQYXJzZXIob25QYXJzZSkge1xuICBsZXQgaXNGaXJzdENodW5rO1xuICBsZXQgYnVmZmVyO1xuICBsZXQgc3RhcnRpbmdQb3NpdGlvbjtcbiAgbGV0IHN0YXJ0aW5nRmllbGRMZW5ndGg7XG4gIGxldCBldmVudElkO1xuICBsZXQgZXZlbnROYW1lO1xuICBsZXQgZGF0YTtcbiAgcmVzZXQoKTtcbiAgcmV0dXJuIHtcbiAgICBmZWVkLFxuICAgIHJlc2V0XG4gIH07XG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIGlzRmlyc3RDaHVuayA9IHRydWU7XG4gICAgYnVmZmVyID0gXCJcIjtcbiAgICBzdGFydGluZ1Bvc2l0aW9uID0gMDtcbiAgICBzdGFydGluZ0ZpZWxkTGVuZ3RoID0gLTE7XG4gICAgZXZlbnRJZCA9IHZvaWQgMDtcbiAgICBldmVudE5hbWUgPSB2b2lkIDA7XG4gICAgZGF0YSA9IFwiXCI7XG4gIH1cbiAgZnVuY3Rpb24gZmVlZChjaHVuaykge1xuICAgIGJ1ZmZlciA9IGJ1ZmZlciA/IGJ1ZmZlciArIGNodW5rIDogY2h1bms7XG4gICAgaWYgKGlzRmlyc3RDaHVuayAmJiBoYXNCb20oYnVmZmVyKSkge1xuICAgICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKEJPTS5sZW5ndGgpO1xuICAgIH1cbiAgICBpc0ZpcnN0Q2h1bmsgPSBmYWxzZTtcbiAgICBjb25zdCBsZW5ndGggPSBidWZmZXIubGVuZ3RoO1xuICAgIGxldCBwb3NpdGlvbiA9IDA7XG4gICAgbGV0IGRpc2NhcmRUcmFpbGluZ05ld2xpbmUgPSBmYWxzZTtcbiAgICB3aGlsZSAocG9zaXRpb24gPCBsZW5ndGgpIHtcbiAgICAgIGlmIChkaXNjYXJkVHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICAgIGlmIChidWZmZXJbcG9zaXRpb25dID09PSBcIlxcblwiKSB7XG4gICAgICAgICAgKytwb3NpdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBkaXNjYXJkVHJhaWxpbmdOZXdsaW5lID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBsZXQgbGluZUxlbmd0aCA9IC0xO1xuICAgICAgbGV0IGZpZWxkTGVuZ3RoID0gc3RhcnRpbmdGaWVsZExlbmd0aDtcbiAgICAgIGxldCBjaGFyYWN0ZXI7XG4gICAgICBmb3IgKGxldCBpbmRleCA9IHN0YXJ0aW5nUG9zaXRpb247IGxpbmVMZW5ndGggPCAwICYmIGluZGV4IDwgbGVuZ3RoOyArK2luZGV4KSB7XG4gICAgICAgIGNoYXJhY3RlciA9IGJ1ZmZlcltpbmRleF07XG4gICAgICAgIGlmIChjaGFyYWN0ZXIgPT09IFwiOlwiICYmIGZpZWxkTGVuZ3RoIDwgMCkge1xuICAgICAgICAgIGZpZWxkTGVuZ3RoID0gaW5kZXggLSBwb3NpdGlvbjtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFyYWN0ZXIgPT09IFwiXFxyXCIpIHtcbiAgICAgICAgICBkaXNjYXJkVHJhaWxpbmdOZXdsaW5lID0gdHJ1ZTtcbiAgICAgICAgICBsaW5lTGVuZ3RoID0gaW5kZXggLSBwb3NpdGlvbjtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFyYWN0ZXIgPT09IFwiXFxuXCIpIHtcbiAgICAgICAgICBsaW5lTGVuZ3RoID0gaW5kZXggLSBwb3NpdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGxpbmVMZW5ndGggPCAwKSB7XG4gICAgICAgIHN0YXJ0aW5nUG9zaXRpb24gPSBsZW5ndGggLSBwb3NpdGlvbjtcbiAgICAgICAgc3RhcnRpbmdGaWVsZExlbmd0aCA9IGZpZWxkTGVuZ3RoO1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0aW5nUG9zaXRpb24gPSAwO1xuICAgICAgICBzdGFydGluZ0ZpZWxkTGVuZ3RoID0gLTE7XG4gICAgICB9XG4gICAgICBwYXJzZUV2ZW50U3RyZWFtTGluZShidWZmZXIsIHBvc2l0aW9uLCBmaWVsZExlbmd0aCwgbGluZUxlbmd0aCk7XG4gICAgICBwb3NpdGlvbiArPSBsaW5lTGVuZ3RoICsgMTtcbiAgICB9XG4gICAgaWYgKHBvc2l0aW9uID09PSBsZW5ndGgpIHtcbiAgICAgIGJ1ZmZlciA9IFwiXCI7XG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbiA+IDApIHtcbiAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShwb3NpdGlvbik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHBhcnNlRXZlbnRTdHJlYW1MaW5lKGxpbmVCdWZmZXIsIGluZGV4LCBmaWVsZExlbmd0aCwgbGluZUxlbmd0aCkge1xuICAgIGlmIChsaW5lTGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9uUGFyc2Uoe1xuICAgICAgICAgIHR5cGU6IFwiZXZlbnRcIixcbiAgICAgICAgICBpZDogZXZlbnRJZCxcbiAgICAgICAgICBldmVudDogZXZlbnROYW1lIHx8IHZvaWQgMCxcbiAgICAgICAgICBkYXRhOiBkYXRhLnNsaWNlKDAsIC0xKVxuICAgICAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyBuZXdsaW5lXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRhdGEgPSBcIlwiO1xuICAgICAgICBldmVudElkID0gdm9pZCAwO1xuICAgICAgfVxuICAgICAgZXZlbnROYW1lID0gdm9pZCAwO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub1ZhbHVlID0gZmllbGRMZW5ndGggPCAwO1xuICAgIGNvbnN0IGZpZWxkID0gbGluZUJ1ZmZlci5zbGljZShpbmRleCwgaW5kZXggKyAobm9WYWx1ZSA/IGxpbmVMZW5ndGggOiBmaWVsZExlbmd0aCkpO1xuICAgIGxldCBzdGVwID0gMDtcbiAgICBpZiAobm9WYWx1ZSkge1xuICAgICAgc3RlcCA9IGxpbmVMZW5ndGg7XG4gICAgfSBlbHNlIGlmIChsaW5lQnVmZmVyW2luZGV4ICsgZmllbGRMZW5ndGggKyAxXSA9PT0gXCIgXCIpIHtcbiAgICAgIHN0ZXAgPSBmaWVsZExlbmd0aCArIDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ZXAgPSBmaWVsZExlbmd0aCArIDE7XG4gICAgfVxuICAgIGNvbnN0IHBvc2l0aW9uID0gaW5kZXggKyBzdGVwO1xuICAgIGNvbnN0IHZhbHVlTGVuZ3RoID0gbGluZUxlbmd0aCAtIHN0ZXA7XG4gICAgY29uc3QgdmFsdWUgPSBsaW5lQnVmZmVyLnNsaWNlKHBvc2l0aW9uLCBwb3NpdGlvbiArIHZhbHVlTGVuZ3RoKS50b1N0cmluZygpO1xuICAgIGlmIChmaWVsZCA9PT0gXCJkYXRhXCIpIHtcbiAgICAgIGRhdGEgKz0gdmFsdWUgPyBcIlwiLmNvbmNhdCh2YWx1ZSwgXCJcXG5cIikgOiBcIlxcblwiO1xuICAgIH0gZWxzZSBpZiAoZmllbGQgPT09IFwiZXZlbnRcIikge1xuICAgICAgZXZlbnROYW1lID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChmaWVsZCA9PT0gXCJpZFwiICYmICF2YWx1ZS5pbmNsdWRlcyhcIlxcMFwiKSkge1xuICAgICAgZXZlbnRJZCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoZmllbGQgPT09IFwicmV0cnlcIikge1xuICAgICAgY29uc3QgcmV0cnkgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgaWYgKCFOdW1iZXIuaXNOYU4ocmV0cnkpKSB7XG4gICAgICAgIG9uUGFyc2Uoe1xuICAgICAgICAgIHR5cGU6IFwicmVjb25uZWN0LWludGVydmFsXCIsXG4gICAgICAgICAgdmFsdWU6IHJldHJ5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuY29uc3QgQk9NID0gWzIzOSwgMTg3LCAxOTFdO1xuZnVuY3Rpb24gaGFzQm9tKGJ1ZmZlcikge1xuICByZXR1cm4gQk9NLmV2ZXJ5KChjaGFyQ29kZSwgaW5kZXgpID0+IGJ1ZmZlci5jaGFyQ29kZUF0KGluZGV4KSA9PT0gY2hhckNvZGUpO1xufVxuZXhwb3J0cy5jcmVhdGVQYXJzZXIgPSBjcmVhdGVQYXJzZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5janMubWFwXG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJjcmVhdGVQYXJzZXIiLCJvblBhcnNlIiwiaXNGaXJzdENodW5rIiwiYnVmZmVyIiwic3RhcnRpbmdQb3NpdGlvbiIsInN0YXJ0aW5nRmllbGRMZW5ndGgiLCJldmVudElkIiwiZXZlbnROYW1lIiwiZGF0YSIsInJlc2V0IiwiZmVlZCIsImNodW5rIiwiaGFzQm9tIiwic2xpY2UiLCJCT00iLCJsZW5ndGgiLCJwb3NpdGlvbiIsImRpc2NhcmRUcmFpbGluZ05ld2xpbmUiLCJsaW5lTGVuZ3RoIiwiZmllbGRMZW5ndGgiLCJjaGFyYWN0ZXIiLCJpbmRleCIsInBhcnNlRXZlbnRTdHJlYW1MaW5lIiwibGluZUJ1ZmZlciIsInR5cGUiLCJpZCIsImV2ZW50Iiwibm9WYWx1ZSIsImZpZWxkIiwic3RlcCIsInZhbHVlTGVuZ3RoIiwidG9TdHJpbmciLCJjb25jYXQiLCJpbmNsdWRlcyIsInJldHJ5IiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc05hTiIsImV2ZXJ5IiwiY2hhckNvZGUiLCJjaGFyQ29kZUF0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/node_modules/eventsource-parser/dist/index.cjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/auth.js":
/*!*************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/auth.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TOKEN_EXPIRATION_SECONDS = void 0;\nexports.getTemporaryAuthToken = getTemporaryAuthToken;\nconst config_1 = __webpack_require__(/*! ./config */ \"(rsc)/./node_modules/@fal-ai/client/src/config.js\");\nconst request_1 = __webpack_require__(/*! ./request */ \"(rsc)/./node_modules/@fal-ai/client/src/request.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/@fal-ai/client/src/utils.js\");\nexports.TOKEN_EXPIRATION_SECONDS = 120;\n/**\n * Get a token to connect to the realtime endpoint.\n */ function getTemporaryAuthToken(app, config) {\n    return __awaiter(this, void 0, void 0, function*() {\n        const appId = (0, utils_1.parseEndpointId)(app);\n        const token = yield (0, request_1.dispatchRequest)({\n            method: \"POST\",\n            targetUrl: `${(0, config_1.getRestApiUrl)()}/tokens/`,\n            config,\n            input: {\n                allowed_apps: [\n                    appId.alias\n                ],\n                token_expiration: exports.TOKEN_EXPIRATION_SECONDS\n            }\n        });\n        // keep this in case the response was wrapped (old versions of the proxy do that)\n        // should be safe to remove in the future\n        if (typeof token !== \"string\" && token[\"detail\"]) {\n            return token[\"detail\"];\n        }\n        return token;\n    });\n} //# sourceMappingURL=auth.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL2F1dGguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxZQUFZLElBQUssSUFBSSxJQUFJLENBQUNBLFNBQVMsSUFBSyxTQUFVQyxPQUFPLEVBQUVDLFVBQVUsRUFBRUMsQ0FBQyxFQUFFQyxTQUFTO0lBQ25GLFNBQVNDLE1BQU1DLEtBQUs7UUFBSSxPQUFPQSxpQkFBaUJILElBQUlHLFFBQVEsSUFBSUgsRUFBRSxTQUFVSSxPQUFPO1lBQUlBLFFBQVFEO1FBQVE7SUFBSTtJQUMzRyxPQUFPLElBQUtILENBQUFBLEtBQU1BLENBQUFBLElBQUlLLE9BQU0sQ0FBQyxFQUFHLFNBQVVELE9BQU8sRUFBRUUsTUFBTTtRQUNyRCxTQUFTQyxVQUFVSixLQUFLO1lBQUksSUFBSTtnQkFBRUssS0FBS1AsVUFBVVEsSUFBSSxDQUFDTjtZQUFTLEVBQUUsT0FBT08sR0FBRztnQkFBRUosT0FBT0k7WUFBSTtRQUFFO1FBQzFGLFNBQVNDLFNBQVNSLEtBQUs7WUFBSSxJQUFJO2dCQUFFSyxLQUFLUCxTQUFTLENBQUMsUUFBUSxDQUFDRTtZQUFTLEVBQUUsT0FBT08sR0FBRztnQkFBRUosT0FBT0k7WUFBSTtRQUFFO1FBQzdGLFNBQVNGLEtBQUtJLE1BQU07WUFBSUEsT0FBT0MsSUFBSSxHQUFHVCxRQUFRUSxPQUFPVCxLQUFLLElBQUlELE1BQU1VLE9BQU9ULEtBQUssRUFBRVcsSUFBSSxDQUFDUCxXQUFXSTtRQUFXO1FBQzdHSCxLQUFLLENBQUNQLFlBQVlBLFVBQVVjLEtBQUssQ0FBQ2pCLFNBQVNDLGNBQWMsRUFBRSxHQUFHVSxJQUFJO0lBQ3RFO0FBQ0o7QUFDQU8sOENBQTZDO0lBQUViLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RlLGdDQUFnQyxHQUFHLEtBQUs7QUFDeENBLDZCQUE2QixHQUFHRTtBQUNoQyxNQUFNQyxXQUFXQyxtQkFBT0EsQ0FBQyxtRUFBVTtBQUNuQyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyxxRUFBVztBQUNyQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQyxpRUFBUztBQUNqQ0osZ0NBQWdDLEdBQUc7QUFDbkM7O0NBRUMsR0FDRCxTQUFTRSxzQkFBc0JLLEdBQUcsRUFBRUMsTUFBTTtJQUN0QyxPQUFPN0IsVUFBVSxJQUFJLEVBQUUsS0FBSyxHQUFHLEtBQUssR0FBRztRQUNuQyxNQUFNOEIsUUFBUSxDQUFDLEdBQUdILFFBQVFJLGVBQWUsRUFBRUg7UUFDM0MsTUFBTUksUUFBUSxNQUFNLENBQUMsR0FBR04sVUFBVU8sZUFBZSxFQUFFO1lBQy9DQyxRQUFRO1lBQ1JDLFdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBR1gsU0FBU1ksYUFBYSxJQUFJLFFBQVEsQ0FBQztZQUNyRFA7WUFDQVEsT0FBTztnQkFDSEMsY0FBYztvQkFBQ1IsTUFBTVMsS0FBSztpQkFBQztnQkFDM0JDLGtCQUFrQm5CLFFBQVFDLHdCQUF3QjtZQUN0RDtRQUNKO1FBQ0EsaUZBQWlGO1FBQ2pGLHlDQUF5QztRQUN6QyxJQUFJLE9BQU9VLFVBQVUsWUFBWUEsS0FBSyxDQUFDLFNBQVMsRUFBRTtZQUM5QyxPQUFPQSxLQUFLLENBQUMsU0FBUztRQUMxQjtRQUNBLE9BQU9BO0lBQ1g7QUFDSixFQUNBLGdDQUFnQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1lbnUtZ2VuZXJhdG9yLy4vbm9kZV9tb2R1bGVzL0BmYWwtYWkvY2xpZW50L3NyYy9hdXRoLmpzPzY5OWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVE9LRU5fRVhQSVJBVElPTl9TRUNPTkRTID0gdm9pZCAwO1xuZXhwb3J0cy5nZXRUZW1wb3JhcnlBdXRoVG9rZW4gPSBnZXRUZW1wb3JhcnlBdXRoVG9rZW47XG5jb25zdCBjb25maWdfMSA9IHJlcXVpcmUoXCIuL2NvbmZpZ1wiKTtcbmNvbnN0IHJlcXVlc3RfMSA9IHJlcXVpcmUoXCIuL3JlcXVlc3RcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5leHBvcnRzLlRPS0VOX0VYUElSQVRJT05fU0VDT05EUyA9IDEyMDtcbi8qKlxuICogR2V0IGEgdG9rZW4gdG8gY29ubmVjdCB0byB0aGUgcmVhbHRpbWUgZW5kcG9pbnQuXG4gKi9cbmZ1bmN0aW9uIGdldFRlbXBvcmFyeUF1dGhUb2tlbihhcHAsIGNvbmZpZykge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGFwcElkID0gKDAsIHV0aWxzXzEucGFyc2VFbmRwb2ludElkKShhcHApO1xuICAgICAgICBjb25zdCB0b2tlbiA9IHlpZWxkICgwLCByZXF1ZXN0XzEuZGlzcGF0Y2hSZXF1ZXN0KSh7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgdGFyZ2V0VXJsOiBgJHsoMCwgY29uZmlnXzEuZ2V0UmVzdEFwaVVybCkoKX0vdG9rZW5zL2AsXG4gICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgIGFsbG93ZWRfYXBwczogW2FwcElkLmFsaWFzXSxcbiAgICAgICAgICAgICAgICB0b2tlbl9leHBpcmF0aW9uOiBleHBvcnRzLlRPS0VOX0VYUElSQVRJT05fU0VDT05EUyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBrZWVwIHRoaXMgaW4gY2FzZSB0aGUgcmVzcG9uc2Ugd2FzIHdyYXBwZWQgKG9sZCB2ZXJzaW9ucyBvZiB0aGUgcHJveHkgZG8gdGhhdClcbiAgICAgICAgLy8gc2hvdWxkIGJlIHNhZmUgdG8gcmVtb3ZlIGluIHRoZSBmdXR1cmVcbiAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gXCJzdHJpbmdcIiAmJiB0b2tlbltcImRldGFpbFwiXSkge1xuICAgICAgICAgICAgcmV0dXJuIHRva2VuW1wiZGV0YWlsXCJdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1dGguanMubWFwIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsImFkb3B0IiwidmFsdWUiLCJyZXNvbHZlIiwiUHJvbWlzZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIlRPS0VOX0VYUElSQVRJT05fU0VDT05EUyIsImdldFRlbXBvcmFyeUF1dGhUb2tlbiIsImNvbmZpZ18xIiwicmVxdWlyZSIsInJlcXVlc3RfMSIsInV0aWxzXzEiLCJhcHAiLCJjb25maWciLCJhcHBJZCIsInBhcnNlRW5kcG9pbnRJZCIsInRva2VuIiwiZGlzcGF0Y2hSZXF1ZXN0IiwibWV0aG9kIiwidGFyZ2V0VXJsIiwiZ2V0UmVzdEFwaVVybCIsImlucHV0IiwiYWxsb3dlZF9hcHBzIiwiYWxpYXMiLCJ0b2tlbl9leHBpcmF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/auth.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/client.js":
/*!***************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/client.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.createFalClient = createFalClient;\nconst config_1 = __webpack_require__(/*! ./config */ \"(rsc)/./node_modules/@fal-ai/client/src/config.js\");\nconst queue_1 = __webpack_require__(/*! ./queue */ \"(rsc)/./node_modules/@fal-ai/client/src/queue.js\");\nconst realtime_1 = __webpack_require__(/*! ./realtime */ \"(rsc)/./node_modules/@fal-ai/client/src/realtime.js\");\nconst request_1 = __webpack_require__(/*! ./request */ \"(rsc)/./node_modules/@fal-ai/client/src/request.js\");\nconst response_1 = __webpack_require__(/*! ./response */ \"(rsc)/./node_modules/@fal-ai/client/src/response.js\");\nconst storage_1 = __webpack_require__(/*! ./storage */ \"(rsc)/./node_modules/@fal-ai/client/src/storage.js\");\nconst streaming_1 = __webpack_require__(/*! ./streaming */ \"(rsc)/./node_modules/@fal-ai/client/src/streaming.js\");\n/**\n * Creates a new reference of the `FalClient`.\n * @param userConfig Optional configuration to override the default settings.\n * @returns a new instance of the `FalClient`.\n */ function createFalClient(userConfig = {}) {\n    const config = (0, config_1.createConfig)(userConfig);\n    const storage = (0, storage_1.createStorageClient)({\n        config\n    });\n    const queue = (0, queue_1.createQueueClient)({\n        config,\n        storage\n    });\n    const streaming = (0, streaming_1.createStreamingClient)({\n        config,\n        storage\n    });\n    const realtime = (0, realtime_1.createRealtimeClient)({\n        config\n    });\n    return {\n        queue,\n        realtime,\n        storage,\n        streaming,\n        stream: streaming.stream,\n        run (endpointId_1) {\n            return __awaiter(this, arguments, void 0, function*(endpointId, options = {}) {\n                const input = options.input ? yield storage.transformInput(options.input) : undefined;\n                return (0, request_1.dispatchRequest)({\n                    method: options.method,\n                    targetUrl: (0, request_1.buildUrl)(endpointId, options),\n                    input: input,\n                    config: Object.assign(Object.assign({}, config), {\n                        responseHandler: response_1.resultResponseHandler\n                    }),\n                    options: {\n                        signal: options.abortSignal\n                    }\n                });\n            });\n        },\n        subscribe: (endpointId, options)=>__awaiter(this, void 0, void 0, function*() {\n                const { request_id: requestId } = yield queue.submit(endpointId, options);\n                if (options.onEnqueue) {\n                    options.onEnqueue(requestId);\n                }\n                yield queue.subscribeToStatus(endpointId, Object.assign({\n                    requestId\n                }, options));\n                return queue.result(endpointId, {\n                    requestId\n                });\n            })\n    };\n} //# sourceMappingURL=client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL2NsaWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLFlBQVksSUFBSyxJQUFJLElBQUksQ0FBQ0EsU0FBUyxJQUFLLFNBQVVDLE9BQU8sRUFBRUMsVUFBVSxFQUFFQyxDQUFDLEVBQUVDLFNBQVM7SUFDbkYsU0FBU0MsTUFBTUMsS0FBSztRQUFJLE9BQU9BLGlCQUFpQkgsSUFBSUcsUUFBUSxJQUFJSCxFQUFFLFNBQVVJLE9BQU87WUFBSUEsUUFBUUQ7UUFBUTtJQUFJO0lBQzNHLE9BQU8sSUFBS0gsQ0FBQUEsS0FBTUEsQ0FBQUEsSUFBSUssT0FBTSxDQUFDLEVBQUcsU0FBVUQsT0FBTyxFQUFFRSxNQUFNO1FBQ3JELFNBQVNDLFVBQVVKLEtBQUs7WUFBSSxJQUFJO2dCQUFFSyxLQUFLUCxVQUFVUSxJQUFJLENBQUNOO1lBQVMsRUFBRSxPQUFPTyxHQUFHO2dCQUFFSixPQUFPSTtZQUFJO1FBQUU7UUFDMUYsU0FBU0MsU0FBU1IsS0FBSztZQUFJLElBQUk7Z0JBQUVLLEtBQUtQLFNBQVMsQ0FBQyxRQUFRLENBQUNFO1lBQVMsRUFBRSxPQUFPTyxHQUFHO2dCQUFFSixPQUFPSTtZQUFJO1FBQUU7UUFDN0YsU0FBU0YsS0FBS0ksTUFBTTtZQUFJQSxPQUFPQyxJQUFJLEdBQUdULFFBQVFRLE9BQU9ULEtBQUssSUFBSUQsTUFBTVUsT0FBT1QsS0FBSyxFQUFFVyxJQUFJLENBQUNQLFdBQVdJO1FBQVc7UUFDN0dILEtBQUssQ0FBQ1AsWUFBWUEsVUFBVWMsS0FBSyxDQUFDakIsU0FBU0MsY0FBYyxFQUFFLEdBQUdVLElBQUk7SUFDdEU7QUFDSjtBQUNBTyw4Q0FBNkM7SUFBRWIsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3RGUsdUJBQXVCLEdBQUdDO0FBQzFCLE1BQU1DLFdBQVdDLG1CQUFPQSxDQUFDLG1FQUFVO0FBQ25DLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLGlFQUFTO0FBQ2pDLE1BQU1FLGFBQWFGLG1CQUFPQSxDQUFDLHVFQUFZO0FBQ3ZDLE1BQU1HLFlBQVlILG1CQUFPQSxDQUFDLHFFQUFXO0FBQ3JDLE1BQU1JLGFBQWFKLG1CQUFPQSxDQUFDLHVFQUFZO0FBQ3ZDLE1BQU1LLFlBQVlMLG1CQUFPQSxDQUFDLHFFQUFXO0FBQ3JDLE1BQU1NLGNBQWNOLG1CQUFPQSxDQUFDLHlFQUFhO0FBQ3pDOzs7O0NBSUMsR0FDRCxTQUFTRixnQkFBZ0JTLGFBQWEsQ0FBQyxDQUFDO0lBQ3BDLE1BQU1DLFNBQVMsQ0FBQyxHQUFHVCxTQUFTVSxZQUFZLEVBQUVGO0lBQzFDLE1BQU1HLFVBQVUsQ0FBQyxHQUFHTCxVQUFVTSxtQkFBbUIsRUFBRTtRQUFFSDtJQUFPO0lBQzVELE1BQU1JLFFBQVEsQ0FBQyxHQUFHWCxRQUFRWSxpQkFBaUIsRUFBRTtRQUFFTDtRQUFRRTtJQUFRO0lBQy9ELE1BQU1JLFlBQVksQ0FBQyxHQUFHUixZQUFZUyxxQkFBcUIsRUFBRTtRQUFFUDtRQUFRRTtJQUFRO0lBQzNFLE1BQU1NLFdBQVcsQ0FBQyxHQUFHZCxXQUFXZSxvQkFBb0IsRUFBRTtRQUFFVDtJQUFPO0lBQy9ELE9BQU87UUFDSEk7UUFDQUk7UUFDQU47UUFDQUk7UUFDQUksUUFBUUosVUFBVUksTUFBTTtRQUN4QkMsS0FBSUMsWUFBWTtZQUNaLE9BQU81QyxVQUFVLElBQUksRUFBRTZDLFdBQVcsS0FBSyxHQUFHLFVBQVdDLFVBQVUsRUFBRUMsVUFBVSxDQUFDLENBQUM7Z0JBQ3pFLE1BQU1DLFFBQVFELFFBQVFDLEtBQUssR0FDckIsTUFBTWQsUUFBUWUsY0FBYyxDQUFDRixRQUFRQyxLQUFLLElBQzFDRTtnQkFDTixPQUFPLENBQUMsR0FBR3ZCLFVBQVV3QixlQUFlLEVBQUU7b0JBQ2xDQyxRQUFRTCxRQUFRSyxNQUFNO29CQUN0QkMsV0FBVyxDQUFDLEdBQUcxQixVQUFVMkIsUUFBUSxFQUFFUixZQUFZQztvQkFDL0NDLE9BQU9BO29CQUNQaEIsUUFBUWIsT0FBT29DLE1BQU0sQ0FBQ3BDLE9BQU9vQyxNQUFNLENBQUMsQ0FBQyxHQUFHdkIsU0FBUzt3QkFBRXdCLGlCQUFpQjVCLFdBQVc2QixxQkFBcUI7b0JBQUM7b0JBQ3JHVixTQUFTO3dCQUNMVyxRQUFRWCxRQUFRWSxXQUFXO29CQUMvQjtnQkFDSjtZQUNKO1FBQ0o7UUFDQUMsV0FBVyxDQUFDZCxZQUFZQyxVQUFZL0MsVUFBVSxJQUFJLEVBQUUsS0FBSyxHQUFHLEtBQUssR0FBRztnQkFDaEUsTUFBTSxFQUFFNkQsWUFBWUMsU0FBUyxFQUFFLEdBQUcsTUFBTTFCLE1BQU0yQixNQUFNLENBQUNqQixZQUFZQztnQkFDakUsSUFBSUEsUUFBUWlCLFNBQVMsRUFBRTtvQkFDbkJqQixRQUFRaUIsU0FBUyxDQUFDRjtnQkFDdEI7Z0JBQ0EsTUFBTTFCLE1BQU02QixpQkFBaUIsQ0FBQ25CLFlBQVkzQixPQUFPb0MsTUFBTSxDQUFDO29CQUFFTztnQkFBVSxHQUFHZjtnQkFDdkUsT0FBT1gsTUFBTXJCLE1BQU0sQ0FBQytCLFlBQVk7b0JBQUVnQjtnQkFBVTtZQUNoRDtJQUNKO0FBQ0osRUFDQSxrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tZW51LWdlbmVyYXRvci8uL25vZGVfbW9kdWxlcy9AZmFsLWFpL2NsaWVudC9zcmMvY2xpZW50LmpzPzUyN2YiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY3JlYXRlRmFsQ2xpZW50ID0gY3JlYXRlRmFsQ2xpZW50O1xuY29uc3QgY29uZmlnXzEgPSByZXF1aXJlKFwiLi9jb25maWdcIik7XG5jb25zdCBxdWV1ZV8xID0gcmVxdWlyZShcIi4vcXVldWVcIik7XG5jb25zdCByZWFsdGltZV8xID0gcmVxdWlyZShcIi4vcmVhbHRpbWVcIik7XG5jb25zdCByZXF1ZXN0XzEgPSByZXF1aXJlKFwiLi9yZXF1ZXN0XCIpO1xuY29uc3QgcmVzcG9uc2VfMSA9IHJlcXVpcmUoXCIuL3Jlc3BvbnNlXCIpO1xuY29uc3Qgc3RvcmFnZV8xID0gcmVxdWlyZShcIi4vc3RvcmFnZVwiKTtcbmNvbnN0IHN0cmVhbWluZ18xID0gcmVxdWlyZShcIi4vc3RyZWFtaW5nXCIpO1xuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHJlZmVyZW5jZSBvZiB0aGUgYEZhbENsaWVudGAuXG4gKiBAcGFyYW0gdXNlckNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IHNldHRpbmdzLlxuICogQHJldHVybnMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGBGYWxDbGllbnRgLlxuICovXG5mdW5jdGlvbiBjcmVhdGVGYWxDbGllbnQodXNlckNvbmZpZyA9IHt9KSB7XG4gICAgY29uc3QgY29uZmlnID0gKDAsIGNvbmZpZ18xLmNyZWF0ZUNvbmZpZykodXNlckNvbmZpZyk7XG4gICAgY29uc3Qgc3RvcmFnZSA9ICgwLCBzdG9yYWdlXzEuY3JlYXRlU3RvcmFnZUNsaWVudCkoeyBjb25maWcgfSk7XG4gICAgY29uc3QgcXVldWUgPSAoMCwgcXVldWVfMS5jcmVhdGVRdWV1ZUNsaWVudCkoeyBjb25maWcsIHN0b3JhZ2UgfSk7XG4gICAgY29uc3Qgc3RyZWFtaW5nID0gKDAsIHN0cmVhbWluZ18xLmNyZWF0ZVN0cmVhbWluZ0NsaWVudCkoeyBjb25maWcsIHN0b3JhZ2UgfSk7XG4gICAgY29uc3QgcmVhbHRpbWUgPSAoMCwgcmVhbHRpbWVfMS5jcmVhdGVSZWFsdGltZUNsaWVudCkoeyBjb25maWcgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcXVldWUsXG4gICAgICAgIHJlYWx0aW1lLFxuICAgICAgICBzdG9yYWdlLFxuICAgICAgICBzdHJlYW1pbmcsXG4gICAgICAgIHN0cmVhbTogc3RyZWFtaW5nLnN0cmVhbSxcbiAgICAgICAgcnVuKGVuZHBvaW50SWRfMSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24qIChlbmRwb2ludElkLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IG9wdGlvbnMuaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgPyB5aWVsZCBzdG9yYWdlLnRyYW5zZm9ybUlucHV0KG9wdGlvbnMuaW5wdXQpXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHJldHVybiAoMCwgcmVxdWVzdF8xLmRpc3BhdGNoUmVxdWVzdCkoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IG9wdGlvbnMubWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRVcmw6ICgwLCByZXF1ZXN0XzEuYnVpbGRVcmwpKGVuZHBvaW50SWQsIG9wdGlvbnMpLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dDogaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWcpLCB7IHJlc3BvbnNlSGFuZGxlcjogcmVzcG9uc2VfMS5yZXN1bHRSZXNwb25zZUhhbmRsZXIgfSksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBzdWJzY3JpYmU6IChlbmRwb2ludElkLCBvcHRpb25zKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB7IHJlcXVlc3RfaWQ6IHJlcXVlc3RJZCB9ID0geWllbGQgcXVldWUuc3VibWl0KGVuZHBvaW50SWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMub25FbnF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5vbkVucXVldWUocmVxdWVzdElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIHF1ZXVlLnN1YnNjcmliZVRvU3RhdHVzKGVuZHBvaW50SWQsIE9iamVjdC5hc3NpZ24oeyByZXF1ZXN0SWQgfSwgb3B0aW9ucykpO1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXVlLnJlc3VsdChlbmRwb2ludElkLCB7IHJlcXVlc3RJZCB9KTtcbiAgICAgICAgfSksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5qcy5tYXAiXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiYWRvcHQiLCJ2YWx1ZSIsInJlc29sdmUiLCJQcm9taXNlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiY3JlYXRlRmFsQ2xpZW50IiwiY29uZmlnXzEiLCJyZXF1aXJlIiwicXVldWVfMSIsInJlYWx0aW1lXzEiLCJyZXF1ZXN0XzEiLCJyZXNwb25zZV8xIiwic3RvcmFnZV8xIiwic3RyZWFtaW5nXzEiLCJ1c2VyQ29uZmlnIiwiY29uZmlnIiwiY3JlYXRlQ29uZmlnIiwic3RvcmFnZSIsImNyZWF0ZVN0b3JhZ2VDbGllbnQiLCJxdWV1ZSIsImNyZWF0ZVF1ZXVlQ2xpZW50Iiwic3RyZWFtaW5nIiwiY3JlYXRlU3RyZWFtaW5nQ2xpZW50IiwicmVhbHRpbWUiLCJjcmVhdGVSZWFsdGltZUNsaWVudCIsInN0cmVhbSIsInJ1biIsImVuZHBvaW50SWRfMSIsImFyZ3VtZW50cyIsImVuZHBvaW50SWQiLCJvcHRpb25zIiwiaW5wdXQiLCJ0cmFuc2Zvcm1JbnB1dCIsInVuZGVmaW5lZCIsImRpc3BhdGNoUmVxdWVzdCIsIm1ldGhvZCIsInRhcmdldFVybCIsImJ1aWxkVXJsIiwiYXNzaWduIiwicmVzcG9uc2VIYW5kbGVyIiwicmVzdWx0UmVzcG9uc2VIYW5kbGVyIiwic2lnbmFsIiwiYWJvcnRTaWduYWwiLCJzdWJzY3JpYmUiLCJyZXF1ZXN0X2lkIiwicmVxdWVzdElkIiwic3VibWl0Iiwib25FbnF1ZXVlIiwic3Vic2NyaWJlVG9TdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/client.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/config.js":
/*!***************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/config.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.credentialsFromEnv = void 0;\nexports.resolveDefaultFetch = resolveDefaultFetch;\nexports.createConfig = createConfig;\nexports.getRestApiUrl = getRestApiUrl;\nconst middleware_1 = __webpack_require__(/*! ./middleware */ \"(rsc)/./node_modules/@fal-ai/client/src/middleware.js\");\nconst response_1 = __webpack_require__(/*! ./response */ \"(rsc)/./node_modules/@fal-ai/client/src/response.js\");\nconst runtime_1 = __webpack_require__(/*! ./runtime */ \"(rsc)/./node_modules/@fal-ai/client/src/runtime.js\");\nfunction resolveDefaultFetch() {\n    if (typeof fetch === \"undefined\") {\n        throw new Error(\"Your environment does not support fetch. Please provide your own fetch implementation.\");\n    }\n    return fetch;\n}\n/**\n * Checks if the required FAL environment variables are set.\n *\n * @returns `true` if the required environment variables are set,\n * `false` otherwise.\n */ function hasEnvVariables() {\n    return typeof process !== \"undefined\" && process.env && (typeof process.env.FAL_KEY !== \"undefined\" || typeof process.env.FAL_KEY_ID !== \"undefined\" && typeof process.env.FAL_KEY_SECRET !== \"undefined\");\n}\nconst credentialsFromEnv = ()=>{\n    if (!hasEnvVariables()) {\n        return undefined;\n    }\n    if (typeof process.env.FAL_KEY !== \"undefined\") {\n        return process.env.FAL_KEY;\n    }\n    return process.env.FAL_KEY_ID ? `${process.env.FAL_KEY_ID}:${process.env.FAL_KEY_SECRET}` : undefined;\n};\nexports.credentialsFromEnv = credentialsFromEnv;\nconst DEFAULT_CONFIG = {\n    credentials: exports.credentialsFromEnv,\n    suppressLocalCredentialsWarning: false,\n    requestMiddleware: (request)=>Promise.resolve(request),\n    responseHandler: response_1.defaultResponseHandler\n};\n/**\n * Configures the fal client.\n *\n * @param config the new configuration.\n */ function createConfig(config) {\n    var _a;\n    let configuration = Object.assign(Object.assign(Object.assign({}, DEFAULT_CONFIG), config), {\n        fetch: (_a = config.fetch) !== null && _a !== void 0 ? _a : resolveDefaultFetch()\n    });\n    if (config.proxyUrl) {\n        configuration = Object.assign(Object.assign({}, configuration), {\n            requestMiddleware: (0, middleware_1.withMiddleware)(configuration.requestMiddleware, (0, middleware_1.withProxy)({\n                targetUrl: config.proxyUrl\n            }))\n        });\n    }\n    const { credentials: resolveCredentials, suppressLocalCredentialsWarning } = configuration;\n    const credentials = typeof resolveCredentials === \"function\" ? resolveCredentials() : resolveCredentials;\n    if ((0, runtime_1.isBrowser)() && credentials && !suppressLocalCredentialsWarning) {\n        console.warn(\"The fal credentials are exposed in the browser's environment. \" + \"That's not recommended for production use cases.\");\n    }\n    return configuration;\n}\n/**\n * @returns the URL of the fal REST api endpoint.\n */ function getRestApiUrl() {\n    return \"https://rest.alpha.fal.ai\";\n} //# sourceMappingURL=config.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMEJBQTBCLEdBQUcsS0FBSztBQUNsQ0EsMkJBQTJCLEdBQUdHO0FBQzlCSCxvQkFBb0IsR0FBR0k7QUFDdkJKLHFCQUFxQixHQUFHSztBQUN4QixNQUFNQyxlQUFlQyxtQkFBT0EsQ0FBQywyRUFBYztBQUMzQyxNQUFNQyxhQUFhRCxtQkFBT0EsQ0FBQyx1RUFBWTtBQUN2QyxNQUFNRSxZQUFZRixtQkFBT0EsQ0FBQyxxRUFBVztBQUNyQyxTQUFTSjtJQUNMLElBQUksT0FBT08sVUFBVSxhQUFhO1FBQzlCLE1BQU0sSUFBSUMsTUFBTTtJQUNwQjtJQUNBLE9BQU9EO0FBQ1g7QUFDQTs7Ozs7Q0FLQyxHQUNELFNBQVNFO0lBQ0wsT0FBUSxPQUFPQyxZQUFZLGVBQ3ZCQSxRQUFRQyxHQUFHLElBQ1YsUUFBT0QsUUFBUUMsR0FBRyxDQUFDQyxPQUFPLEtBQUssZUFDM0IsT0FBT0YsUUFBUUMsR0FBRyxDQUFDRSxVQUFVLEtBQUssZUFDL0IsT0FBT0gsUUFBUUMsR0FBRyxDQUFDRyxjQUFjLEtBQUssV0FBVztBQUNqRTtBQUNBLE1BQU1mLHFCQUFxQjtJQUN2QixJQUFJLENBQUNVLG1CQUFtQjtRQUNwQixPQUFPTTtJQUNYO0lBQ0EsSUFBSSxPQUFPTCxRQUFRQyxHQUFHLENBQUNDLE9BQU8sS0FBSyxhQUFhO1FBQzVDLE9BQU9GLFFBQVFDLEdBQUcsQ0FBQ0MsT0FBTztJQUM5QjtJQUNBLE9BQU9GLFFBQVFDLEdBQUcsQ0FBQ0UsVUFBVSxHQUN2QixDQUFDLEVBQUVILFFBQVFDLEdBQUcsQ0FBQ0UsVUFBVSxDQUFDLENBQUMsRUFBRUgsUUFBUUMsR0FBRyxDQUFDRyxjQUFjLENBQUMsQ0FBQyxHQUN6REM7QUFDVjtBQUNBbEIsMEJBQTBCLEdBQUdFO0FBQzdCLE1BQU1pQixpQkFBaUI7SUFDbkJDLGFBQWFwQixRQUFRRSxrQkFBa0I7SUFDdkNtQixpQ0FBaUM7SUFDakNDLG1CQUFtQixDQUFDQyxVQUFZQyxRQUFRQyxPQUFPLENBQUNGO0lBQ2hERyxpQkFBaUJsQixXQUFXbUIsc0JBQXNCO0FBQ3REO0FBQ0E7Ozs7Q0FJQyxHQUNELFNBQVN2QixhQUFhd0IsTUFBTTtJQUN4QixJQUFJQztJQUNKLElBQUlDLGdCQUFnQmhDLE9BQU9pQyxNQUFNLENBQUNqQyxPQUFPaUMsTUFBTSxDQUFDakMsT0FBT2lDLE1BQU0sQ0FBQyxDQUFDLEdBQUdaLGlCQUFpQlMsU0FBUztRQUFFbEIsT0FBTyxDQUFDbUIsS0FBS0QsT0FBT2xCLEtBQUssTUFBTSxRQUFRbUIsT0FBTyxLQUFLLElBQUlBLEtBQUsxQjtJQUFzQjtJQUNoTCxJQUFJeUIsT0FBT0ksUUFBUSxFQUFFO1FBQ2pCRixnQkFBZ0JoQyxPQUFPaUMsTUFBTSxDQUFDakMsT0FBT2lDLE1BQU0sQ0FBQyxDQUFDLEdBQUdELGdCQUFnQjtZQUFFUixtQkFBbUIsQ0FBQyxHQUFHaEIsYUFBYTJCLGNBQWMsRUFBRUgsY0FBY1IsaUJBQWlCLEVBQUUsQ0FBQyxHQUFHaEIsYUFBYTRCLFNBQVMsRUFBRTtnQkFBRUMsV0FBV1AsT0FBT0ksUUFBUTtZQUFDO1FBQUk7SUFDeE47SUFDQSxNQUFNLEVBQUVaLGFBQWFnQixrQkFBa0IsRUFBRWYsK0JBQStCLEVBQUUsR0FBR1M7SUFDN0UsTUFBTVYsY0FBYyxPQUFPZ0IsdUJBQXVCLGFBQzVDQSx1QkFDQUE7SUFDTixJQUFJLENBQUMsR0FBRzNCLFVBQVU0QixTQUFTLE9BQU9qQixlQUFlLENBQUNDLGlDQUFpQztRQUMvRWlCLFFBQVFDLElBQUksQ0FBQyxtRUFDVDtJQUNSO0lBQ0EsT0FBT1Q7QUFDWDtBQUNBOztDQUVDLEdBQ0QsU0FBU3pCO0lBQ0wsT0FBTztBQUNYLEVBQ0Esa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWVudS1nZW5lcmF0b3IvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL2NvbmZpZy5qcz9jNzNmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jcmVkZW50aWFsc0Zyb21FbnYgPSB2b2lkIDA7XG5leHBvcnRzLnJlc29sdmVEZWZhdWx0RmV0Y2ggPSByZXNvbHZlRGVmYXVsdEZldGNoO1xuZXhwb3J0cy5jcmVhdGVDb25maWcgPSBjcmVhdGVDb25maWc7XG5leHBvcnRzLmdldFJlc3RBcGlVcmwgPSBnZXRSZXN0QXBpVXJsO1xuY29uc3QgbWlkZGxld2FyZV8xID0gcmVxdWlyZShcIi4vbWlkZGxld2FyZVwiKTtcbmNvbnN0IHJlc3BvbnNlXzEgPSByZXF1aXJlKFwiLi9yZXNwb25zZVwiKTtcbmNvbnN0IHJ1bnRpbWVfMSA9IHJlcXVpcmUoXCIuL3J1bnRpbWVcIik7XG5mdW5jdGlvbiByZXNvbHZlRGVmYXVsdEZldGNoKCkge1xuICAgIGlmICh0eXBlb2YgZmV0Y2ggPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91ciBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IGZldGNoLiBQbGVhc2UgcHJvdmlkZSB5b3VyIG93biBmZXRjaCBpbXBsZW1lbnRhdGlvbi5cIik7XG4gICAgfVxuICAgIHJldHVybiBmZXRjaDtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSByZXF1aXJlZCBGQUwgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBzZXQuXG4gKlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldCxcbiAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBoYXNFbnZWYXJpYWJsZXMoKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICBwcm9jZXNzLmVudiAmJlxuICAgICAgICAodHlwZW9mIHByb2Nlc3MuZW52LkZBTF9LRVkgIT09IFwidW5kZWZpbmVkXCIgfHxcbiAgICAgICAgICAgICh0eXBlb2YgcHJvY2Vzcy5lbnYuRkFMX0tFWV9JRCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBwcm9jZXNzLmVudi5GQUxfS0VZX1NFQ1JFVCAhPT0gXCJ1bmRlZmluZWRcIikpKTtcbn1cbmNvbnN0IGNyZWRlbnRpYWxzRnJvbUVudiA9ICgpID0+IHtcbiAgICBpZiAoIWhhc0VudlZhcmlhYmxlcygpKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcHJvY2Vzcy5lbnYuRkFMX0tFWSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuRkFMX0tFWTtcbiAgICB9XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52LkZBTF9LRVlfSURcbiAgICAgICAgPyBgJHtwcm9jZXNzLmVudi5GQUxfS0VZX0lEfToke3Byb2Nlc3MuZW52LkZBTF9LRVlfU0VDUkVUfWBcbiAgICAgICAgOiB1bmRlZmluZWQ7XG59O1xuZXhwb3J0cy5jcmVkZW50aWFsc0Zyb21FbnYgPSBjcmVkZW50aWFsc0Zyb21FbnY7XG5jb25zdCBERUZBVUxUX0NPTkZJRyA9IHtcbiAgICBjcmVkZW50aWFsczogZXhwb3J0cy5jcmVkZW50aWFsc0Zyb21FbnYsXG4gICAgc3VwcHJlc3NMb2NhbENyZWRlbnRpYWxzV2FybmluZzogZmFsc2UsXG4gICAgcmVxdWVzdE1pZGRsZXdhcmU6IChyZXF1ZXN0KSA9PiBQcm9taXNlLnJlc29sdmUocmVxdWVzdCksXG4gICAgcmVzcG9uc2VIYW5kbGVyOiByZXNwb25zZV8xLmRlZmF1bHRSZXNwb25zZUhhbmRsZXIsXG59O1xuLyoqXG4gKiBDb25maWd1cmVzIHRoZSBmYWwgY2xpZW50LlxuICpcbiAqIEBwYXJhbSBjb25maWcgdGhlIG5ldyBjb25maWd1cmF0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVDb25maWcoY29uZmlnKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBjb25maWd1cmF0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfQ09ORklHKSwgY29uZmlnKSwgeyBmZXRjaDogKF9hID0gY29uZmlnLmZldGNoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiByZXNvbHZlRGVmYXVsdEZldGNoKCkgfSk7XG4gICAgaWYgKGNvbmZpZy5wcm94eVVybCkge1xuICAgICAgICBjb25maWd1cmF0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWd1cmF0aW9uKSwgeyByZXF1ZXN0TWlkZGxld2FyZTogKDAsIG1pZGRsZXdhcmVfMS53aXRoTWlkZGxld2FyZSkoY29uZmlndXJhdGlvbi5yZXF1ZXN0TWlkZGxld2FyZSwgKDAsIG1pZGRsZXdhcmVfMS53aXRoUHJveHkpKHsgdGFyZ2V0VXJsOiBjb25maWcucHJveHlVcmwgfSkpIH0pO1xuICAgIH1cbiAgICBjb25zdCB7IGNyZWRlbnRpYWxzOiByZXNvbHZlQ3JlZGVudGlhbHMsIHN1cHByZXNzTG9jYWxDcmVkZW50aWFsc1dhcm5pbmcgfSA9IGNvbmZpZ3VyYXRpb247XG4gICAgY29uc3QgY3JlZGVudGlhbHMgPSB0eXBlb2YgcmVzb2x2ZUNyZWRlbnRpYWxzID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyByZXNvbHZlQ3JlZGVudGlhbHMoKVxuICAgICAgICA6IHJlc29sdmVDcmVkZW50aWFscztcbiAgICBpZiAoKDAsIHJ1bnRpbWVfMS5pc0Jyb3dzZXIpKCkgJiYgY3JlZGVudGlhbHMgJiYgIXN1cHByZXNzTG9jYWxDcmVkZW50aWFsc1dhcm5pbmcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiVGhlIGZhbCBjcmVkZW50aWFscyBhcmUgZXhwb3NlZCBpbiB0aGUgYnJvd3NlcidzIGVudmlyb25tZW50LiBcIiArXG4gICAgICAgICAgICBcIlRoYXQncyBub3QgcmVjb21tZW5kZWQgZm9yIHByb2R1Y3Rpb24gdXNlIGNhc2VzLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbmZpZ3VyYXRpb247XG59XG4vKipcbiAqIEByZXR1cm5zIHRoZSBVUkwgb2YgdGhlIGZhbCBSRVNUIGFwaSBlbmRwb2ludC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVzdEFwaVVybCgpIHtcbiAgICByZXR1cm4gXCJodHRwczovL3Jlc3QuYWxwaGEuZmFsLmFpXCI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY3JlZGVudGlhbHNGcm9tRW52IiwicmVzb2x2ZURlZmF1bHRGZXRjaCIsImNyZWF0ZUNvbmZpZyIsImdldFJlc3RBcGlVcmwiLCJtaWRkbGV3YXJlXzEiLCJyZXF1aXJlIiwicmVzcG9uc2VfMSIsInJ1bnRpbWVfMSIsImZldGNoIiwiRXJyb3IiLCJoYXNFbnZWYXJpYWJsZXMiLCJwcm9jZXNzIiwiZW52IiwiRkFMX0tFWSIsIkZBTF9LRVlfSUQiLCJGQUxfS0VZX1NFQ1JFVCIsInVuZGVmaW5lZCIsIkRFRkFVTFRfQ09ORklHIiwiY3JlZGVudGlhbHMiLCJzdXBwcmVzc0xvY2FsQ3JlZGVudGlhbHNXYXJuaW5nIiwicmVxdWVzdE1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZXNwb25zZUhhbmRsZXIiLCJkZWZhdWx0UmVzcG9uc2VIYW5kbGVyIiwiY29uZmlnIiwiX2EiLCJjb25maWd1cmF0aW9uIiwiYXNzaWduIiwicHJveHlVcmwiLCJ3aXRoTWlkZGxld2FyZSIsIndpdGhQcm94eSIsInRhcmdldFVybCIsInJlc29sdmVDcmVkZW50aWFscyIsImlzQnJvd3NlciIsImNvbnNvbGUiLCJ3YXJuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/index.js":
/*!**************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/index.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = this && this.__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __exportStar = this && this.__exportStar || function(m, exports1) {\n    for(var p in m)if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports1, p)) __createBinding(exports1, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.fal = exports.parseEndpointId = exports.ValidationError = exports.ApiError = exports.withProxy = exports.withMiddleware = exports.createFalClient = void 0;\nconst client_1 = __webpack_require__(/*! ./client */ \"(rsc)/./node_modules/@fal-ai/client/src/client.js\");\nvar client_2 = __webpack_require__(/*! ./client */ \"(rsc)/./node_modules/@fal-ai/client/src/client.js\");\nObject.defineProperty(exports, \"createFalClient\", ({\n    enumerable: true,\n    get: function() {\n        return client_2.createFalClient;\n    }\n}));\nvar middleware_1 = __webpack_require__(/*! ./middleware */ \"(rsc)/./node_modules/@fal-ai/client/src/middleware.js\");\nObject.defineProperty(exports, \"withMiddleware\", ({\n    enumerable: true,\n    get: function() {\n        return middleware_1.withMiddleware;\n    }\n}));\nObject.defineProperty(exports, \"withProxy\", ({\n    enumerable: true,\n    get: function() {\n        return middleware_1.withProxy;\n    }\n}));\nvar response_1 = __webpack_require__(/*! ./response */ \"(rsc)/./node_modules/@fal-ai/client/src/response.js\");\nObject.defineProperty(exports, \"ApiError\", ({\n    enumerable: true,\n    get: function() {\n        return response_1.ApiError;\n    }\n}));\nObject.defineProperty(exports, \"ValidationError\", ({\n    enumerable: true,\n    get: function() {\n        return response_1.ValidationError;\n    }\n}));\n__exportStar(__webpack_require__(/*! ./types/common */ \"(rsc)/./node_modules/@fal-ai/client/src/types/common.js\"), exports);\nvar utils_1 = __webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/@fal-ai/client/src/utils.js\");\nObject.defineProperty(exports, \"parseEndpointId\", ({\n    enumerable: true,\n    get: function() {\n        return utils_1.parseEndpointId;\n    }\n}));\n/**\n * Creates a singleton instance of the client. This is useful as a compatibility\n * layer for existing code that uses the clients version prior to 1.0.0.\n */ exports.fal = function createSingletonFalClient() {\n    let currentInstance = (0, client_1.createFalClient)();\n    return {\n        config (config) {\n            currentInstance = (0, client_1.createFalClient)(config);\n        },\n        get queue () {\n            return currentInstance.queue;\n        },\n        get realtime () {\n            return currentInstance.realtime;\n        },\n        get storage () {\n            return currentInstance.storage;\n        },\n        get streaming () {\n            return currentInstance.streaming;\n        },\n        run (id, options) {\n            return currentInstance.run(id, options);\n        },\n        subscribe (endpointId, options) {\n            return currentInstance.subscribe(endpointId, options);\n        },\n        stream (endpointId, options) {\n            return currentInstance.stream(endpointId, options);\n        }\n    };\n}(); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsSUFBSUEsa0JBQWtCLElBQUssSUFBSSxJQUFJLENBQUNBLGVBQWUsSUFBTUMsQ0FBQUEsT0FBT0MsTUFBTSxHQUFJLFNBQVNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDMUYsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0IsSUFBSUcsT0FBT1AsT0FBT1Esd0JBQXdCLENBQUNMLEdBQUdDO0lBQzlDLElBQUksQ0FBQ0csUUFBUyxVQUFTQSxPQUFPLENBQUNKLEVBQUVNLFVBQVUsR0FBR0YsS0FBS0csUUFBUSxJQUFJSCxLQUFLSSxZQUFZLEdBQUc7UUFDakZKLE9BQU87WUFBRUssWUFBWTtZQUFNQyxLQUFLO2dCQUFhLE9BQU9WLENBQUMsQ0FBQ0MsRUFBRTtZQUFFO1FBQUU7SUFDOUQ7SUFDQUosT0FBT2MsY0FBYyxDQUFDWixHQUFHRyxJQUFJRTtBQUNqQyxJQUFNLFNBQVNMLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDdEIsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0JGLENBQUMsQ0FBQ0csR0FBRyxHQUFHRixDQUFDLENBQUNDLEVBQUU7QUFDaEIsQ0FBQztBQUNELElBQUlXLGVBQWUsSUFBSyxJQUFJLElBQUksQ0FBQ0EsWUFBWSxJQUFLLFNBQVNaLENBQUMsRUFBRWEsUUFBTztJQUNqRSxJQUFLLElBQUlDLEtBQUtkLEVBQUcsSUFBSWMsTUFBTSxhQUFhLENBQUNqQixPQUFPa0IsU0FBUyxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FBQ0osVUFBU0MsSUFBSWxCLGdCQUFnQmlCLFVBQVNiLEdBQUdjO0FBQzNIO0FBQ0FqQiw4Q0FBNkM7SUFBRXFCLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RMLFdBQVcsR0FBR0EsdUJBQXVCLEdBQUdBLHVCQUF1QixHQUFHQSxnQkFBZ0IsR0FBR0EsaUJBQWlCLEdBQUdBLHNCQUFzQixHQUFHQSx1QkFBdUIsR0FBRyxLQUFLO0FBQ2pLLE1BQU1hLFdBQVdDLG1CQUFPQSxDQUFDLG1FQUFVO0FBQ25DLElBQUlDLFdBQVdELG1CQUFPQSxDQUFDLG1FQUFVO0FBQ2pDOUIsbURBQWtEO0lBQUVZLFlBQVk7SUFBTUMsS0FBSztRQUFjLE9BQU9rQixTQUFTSCxlQUFlO0lBQUU7QUFBRSxDQUFDLEVBQUM7QUFDOUgsSUFBSUksZUFBZUYsbUJBQU9BLENBQUMsMkVBQWM7QUFDekM5QixrREFBaUQ7SUFBRVksWUFBWTtJQUFNQyxLQUFLO1FBQWMsT0FBT21CLGFBQWFMLGNBQWM7SUFBRTtBQUFFLENBQUMsRUFBQztBQUNoSTNCLDZDQUE0QztJQUFFWSxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPbUIsYUFBYU4sU0FBUztJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQ3RILElBQUlPLGFBQWFILG1CQUFPQSxDQUFDLHVFQUFZO0FBQ3JDOUIsNENBQTJDO0lBQUVZLFlBQVk7SUFBTUMsS0FBSztRQUFjLE9BQU9vQixXQUFXUixRQUFRO0lBQUU7QUFBRSxDQUFDLEVBQUM7QUFDbEh6QixtREFBa0Q7SUFBRVksWUFBWTtJQUFNQyxLQUFLO1FBQWMsT0FBT29CLFdBQVdULGVBQWU7SUFBRTtBQUFFLENBQUMsRUFBQztBQUNoSVQsYUFBYWUsbUJBQU9BLENBQUMsK0VBQWdCLEdBQUdkO0FBQ3hDLElBQUlrQixVQUFVSixtQkFBT0EsQ0FBQyxpRUFBUztBQUMvQjlCLG1EQUFrRDtJQUFFWSxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPcUIsUUFBUVgsZUFBZTtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQzdIOzs7Q0FHQyxHQUNEUCxXQUFXLEdBQUcsU0FBVW1CO0lBQ3BCLElBQUlDLGtCQUFrQixDQUFDLEdBQUdQLFNBQVNELGVBQWU7SUFDbEQsT0FBTztRQUNIUyxRQUFPQSxNQUFNO1lBQ1RELGtCQUFrQixDQUFDLEdBQUdQLFNBQVNELGVBQWUsRUFBRVM7UUFDcEQ7UUFDQSxJQUFJQyxTQUFRO1lBQ1IsT0FBT0YsZ0JBQWdCRSxLQUFLO1FBQ2hDO1FBQ0EsSUFBSUMsWUFBVztZQUNYLE9BQU9ILGdCQUFnQkcsUUFBUTtRQUNuQztRQUNBLElBQUlDLFdBQVU7WUFDVixPQUFPSixnQkFBZ0JJLE9BQU87UUFDbEM7UUFDQSxJQUFJQyxhQUFZO1lBQ1osT0FBT0wsZ0JBQWdCSyxTQUFTO1FBQ3BDO1FBQ0FDLEtBQUlDLEVBQUUsRUFBRUMsT0FBTztZQUNYLE9BQU9SLGdCQUFnQk0sR0FBRyxDQUFDQyxJQUFJQztRQUNuQztRQUNBQyxXQUFVQyxVQUFVLEVBQUVGLE9BQU87WUFDekIsT0FBT1IsZ0JBQWdCUyxTQUFTLENBQUNDLFlBQVlGO1FBQ2pEO1FBQ0FHLFFBQU9ELFVBQVUsRUFBRUYsT0FBTztZQUN0QixPQUFPUixnQkFBZ0JXLE1BQU0sQ0FBQ0QsWUFBWUY7UUFDOUM7SUFDSjtBQUNKLEtBQ0EsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWVudS1nZW5lcmF0b3IvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL2luZGV4LmpzP2FkYzciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZmFsID0gZXhwb3J0cy5wYXJzZUVuZHBvaW50SWQgPSBleHBvcnRzLlZhbGlkYXRpb25FcnJvciA9IGV4cG9ydHMuQXBpRXJyb3IgPSBleHBvcnRzLndpdGhQcm94eSA9IGV4cG9ydHMud2l0aE1pZGRsZXdhcmUgPSBleHBvcnRzLmNyZWF0ZUZhbENsaWVudCA9IHZvaWQgMDtcbmNvbnN0IGNsaWVudF8xID0gcmVxdWlyZShcIi4vY2xpZW50XCIpO1xudmFyIGNsaWVudF8yID0gcmVxdWlyZShcIi4vY2xpZW50XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY3JlYXRlRmFsQ2xpZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjbGllbnRfMi5jcmVhdGVGYWxDbGllbnQ7IH0gfSk7XG52YXIgbWlkZGxld2FyZV8xID0gcmVxdWlyZShcIi4vbWlkZGxld2FyZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIndpdGhNaWRkbGV3YXJlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtaWRkbGV3YXJlXzEud2l0aE1pZGRsZXdhcmU7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ3aXRoUHJveHlcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1pZGRsZXdhcmVfMS53aXRoUHJveHk7IH0gfSk7XG52YXIgcmVzcG9uc2VfMSA9IHJlcXVpcmUoXCIuL3Jlc3BvbnNlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQXBpRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3BvbnNlXzEuQXBpRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJWYWxpZGF0aW9uRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3BvbnNlXzEuVmFsaWRhdGlvbkVycm9yOyB9IH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R5cGVzL2NvbW1vblwiKSwgZXhwb3J0cyk7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicGFyc2VFbmRwb2ludElkXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB1dGlsc18xLnBhcnNlRW5kcG9pbnRJZDsgfSB9KTtcbi8qKlxuICogQ3JlYXRlcyBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGUgY2xpZW50LiBUaGlzIGlzIHVzZWZ1bCBhcyBhIGNvbXBhdGliaWxpdHlcbiAqIGxheWVyIGZvciBleGlzdGluZyBjb2RlIHRoYXQgdXNlcyB0aGUgY2xpZW50cyB2ZXJzaW9uIHByaW9yIHRvIDEuMC4wLlxuICovXG5leHBvcnRzLmZhbCA9IChmdW5jdGlvbiBjcmVhdGVTaW5nbGV0b25GYWxDbGllbnQoKSB7XG4gICAgbGV0IGN1cnJlbnRJbnN0YW5jZSA9ICgwLCBjbGllbnRfMS5jcmVhdGVGYWxDbGllbnQpKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uZmlnKGNvbmZpZykge1xuICAgICAgICAgICAgY3VycmVudEluc3RhbmNlID0gKDAsIGNsaWVudF8xLmNyZWF0ZUZhbENsaWVudCkoY29uZmlnKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHF1ZXVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRJbnN0YW5jZS5xdWV1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHJlYWx0aW1lKCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRJbnN0YW5jZS5yZWFsdGltZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHN0b3JhZ2UoKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudEluc3RhbmNlLnN0b3JhZ2U7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBzdHJlYW1pbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudEluc3RhbmNlLnN0cmVhbWluZztcbiAgICAgICAgfSxcbiAgICAgICAgcnVuKGlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudEluc3RhbmNlLnJ1bihpZCwgb3B0aW9ucyk7XG4gICAgICAgIH0sXG4gICAgICAgIHN1YnNjcmliZShlbmRwb2ludElkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudEluc3RhbmNlLnN1YnNjcmliZShlbmRwb2ludElkLCBvcHRpb25zKTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RyZWFtKGVuZHBvaW50SWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50SW5zdGFuY2Uuc3RyZWFtKGVuZHBvaW50SWQsIG9wdGlvbnMpO1xuICAgICAgICB9LFxuICAgIH07XG59KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsIk9iamVjdCIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9fZXNNb2R1bGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fZXhwb3J0U3RhciIsImV4cG9ydHMiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidmFsdWUiLCJmYWwiLCJwYXJzZUVuZHBvaW50SWQiLCJWYWxpZGF0aW9uRXJyb3IiLCJBcGlFcnJvciIsIndpdGhQcm94eSIsIndpdGhNaWRkbGV3YXJlIiwiY3JlYXRlRmFsQ2xpZW50IiwiY2xpZW50XzEiLCJyZXF1aXJlIiwiY2xpZW50XzIiLCJtaWRkbGV3YXJlXzEiLCJyZXNwb25zZV8xIiwidXRpbHNfMSIsImNyZWF0ZVNpbmdsZXRvbkZhbENsaWVudCIsImN1cnJlbnRJbnN0YW5jZSIsImNvbmZpZyIsInF1ZXVlIiwicmVhbHRpbWUiLCJzdG9yYWdlIiwic3RyZWFtaW5nIiwicnVuIiwiaWQiLCJvcHRpb25zIiwic3Vic2NyaWJlIiwiZW5kcG9pbnRJZCIsInN0cmVhbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/middleware.js":
/*!*******************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/middleware.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\nvar __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TARGET_URL_HEADER = void 0;\nexports.withMiddleware = withMiddleware;\nexports.withProxy = withProxy;\n/**\n * Setup a execution chain of middleware functions.\n *\n * @param middlewares one or more middleware functions.\n * @returns a middleware function that executes the given middlewares in order.\n */ function withMiddleware(...middlewares) {\n    const isDefined = (middleware)=>typeof middleware === \"function\";\n    return (config)=>__awaiter(this, void 0, void 0, function*() {\n            let currentConfig = Object.assign({}, config);\n            for (const middleware of middlewares.filter(isDefined)){\n                currentConfig = yield middleware(currentConfig);\n            }\n            return currentConfig;\n        });\n}\nexports.TARGET_URL_HEADER = \"x-fal-target-url\";\nfunction withProxy(config) {\n    const passthrough = (requestConfig)=>Promise.resolve(requestConfig);\n    // when running on the server, we don't need to proxy the request\n    if (true) {\n        return passthrough;\n    }\n    // if x-fal-target-url is already set, we skip it\n    return (requestConfig)=>requestConfig.headers && exports.TARGET_URL_HEADER in requestConfig ? passthrough(requestConfig) : Promise.resolve(Object.assign(Object.assign({}, requestConfig), {\n            url: config.targetUrl,\n            headers: Object.assign(Object.assign({}, requestConfig.headers || {}), {\n                [exports.TARGET_URL_HEADER]: requestConfig.url\n            })\n        }));\n} //# sourceMappingURL=middleware.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL21pZGRsZXdhcmUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxZQUFZLElBQUssSUFBSSxJQUFJLENBQUNBLFNBQVMsSUFBSyxTQUFVQyxPQUFPLEVBQUVDLFVBQVUsRUFBRUMsQ0FBQyxFQUFFQyxTQUFTO0lBQ25GLFNBQVNDLE1BQU1DLEtBQUs7UUFBSSxPQUFPQSxpQkFBaUJILElBQUlHLFFBQVEsSUFBSUgsRUFBRSxTQUFVSSxPQUFPO1lBQUlBLFFBQVFEO1FBQVE7SUFBSTtJQUMzRyxPQUFPLElBQUtILENBQUFBLEtBQU1BLENBQUFBLElBQUlLLE9BQU0sQ0FBQyxFQUFHLFNBQVVELE9BQU8sRUFBRUUsTUFBTTtRQUNyRCxTQUFTQyxVQUFVSixLQUFLO1lBQUksSUFBSTtnQkFBRUssS0FBS1AsVUFBVVEsSUFBSSxDQUFDTjtZQUFTLEVBQUUsT0FBT08sR0FBRztnQkFBRUosT0FBT0k7WUFBSTtRQUFFO1FBQzFGLFNBQVNDLFNBQVNSLEtBQUs7WUFBSSxJQUFJO2dCQUFFSyxLQUFLUCxTQUFTLENBQUMsUUFBUSxDQUFDRTtZQUFTLEVBQUUsT0FBT08sR0FBRztnQkFBRUosT0FBT0k7WUFBSTtRQUFFO1FBQzdGLFNBQVNGLEtBQUtJLE1BQU07WUFBSUEsT0FBT0MsSUFBSSxHQUFHVCxRQUFRUSxPQUFPVCxLQUFLLElBQUlELE1BQU1VLE9BQU9ULEtBQUssRUFBRVcsSUFBSSxDQUFDUCxXQUFXSTtRQUFXO1FBQzdHSCxLQUFLLENBQUNQLFlBQVlBLFVBQVVjLEtBQUssQ0FBQ2pCLFNBQVNDLGNBQWMsRUFBRSxHQUFHVSxJQUFJO0lBQ3RFO0FBQ0o7QUFDQU8sOENBQTZDO0lBQUViLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RlLHlCQUF5QixHQUFHLEtBQUs7QUFDakNBLHNCQUFzQixHQUFHRTtBQUN6QkYsaUJBQWlCLEdBQUdHO0FBQ3BCOzs7OztDQUtDLEdBQ0QsU0FBU0QsZUFBZSxHQUFHRSxXQUFXO0lBQ2xDLE1BQU1DLFlBQVksQ0FBQ0MsYUFBZSxPQUFPQSxlQUFlO0lBQ3hELE9BQU8sQ0FBQ0MsU0FBVzVCLFVBQVUsSUFBSSxFQUFFLEtBQUssR0FBRyxLQUFLLEdBQUc7WUFDL0MsSUFBSTZCLGdCQUFnQlYsT0FBT1csTUFBTSxDQUFDLENBQUMsR0FBR0Y7WUFDdEMsS0FBSyxNQUFNRCxjQUFjRixZQUFZTSxNQUFNLENBQUNMLFdBQVk7Z0JBQ3BERyxnQkFBZ0IsTUFBTUYsV0FBV0U7WUFDckM7WUFDQSxPQUFPQTtRQUNYO0FBQ0o7QUFDQVIseUJBQXlCLEdBQUc7QUFDNUIsU0FBU0csVUFBVUksTUFBTTtJQUNyQixNQUFNSSxjQUFjLENBQUNDLGdCQUFrQnpCLFFBQVFELE9BQU8sQ0FBQzBCO0lBQ3ZELGlFQUFpRTtJQUNqRSxJQUFJLElBQTZCLEVBQUU7UUFDL0IsT0FBT0Q7SUFDWDtJQUNBLGlEQUFpRDtJQUNqRCxPQUFPLENBQUNDLGdCQUFrQkEsY0FBY0MsT0FBTyxJQUFJYixRQUFRQyxpQkFBaUIsSUFBSVcsZ0JBQzFFRCxZQUFZQyxpQkFDWnpCLFFBQVFELE9BQU8sQ0FBQ1ksT0FBT1csTUFBTSxDQUFDWCxPQUFPVyxNQUFNLENBQUMsQ0FBQyxHQUFHRyxnQkFBZ0I7WUFBRUUsS0FBS1AsT0FBT1EsU0FBUztZQUFFRixTQUFTZixPQUFPVyxNQUFNLENBQUNYLE9BQU9XLE1BQU0sQ0FBQyxDQUFDLEdBQUlHLGNBQWNDLE9BQU8sSUFBSSxDQUFDLElBQUs7Z0JBQUUsQ0FBQ2IsUUFBUUMsaUJBQWlCLENBQUMsRUFBRVcsY0FBY0UsR0FBRztZQUFDO1FBQUc7QUFDaE8sRUFDQSxzQ0FBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tZW51LWdlbmVyYXRvci8uL25vZGVfbW9kdWxlcy9AZmFsLWFpL2NsaWVudC9zcmMvbWlkZGxld2FyZS5qcz9lMDljIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlRBUkdFVF9VUkxfSEVBREVSID0gdm9pZCAwO1xuZXhwb3J0cy53aXRoTWlkZGxld2FyZSA9IHdpdGhNaWRkbGV3YXJlO1xuZXhwb3J0cy53aXRoUHJveHkgPSB3aXRoUHJveHk7XG4vKipcbiAqIFNldHVwIGEgZXhlY3V0aW9uIGNoYWluIG9mIG1pZGRsZXdhcmUgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSBtaWRkbGV3YXJlcyBvbmUgb3IgbW9yZSBtaWRkbGV3YXJlIGZ1bmN0aW9ucy5cbiAqIEByZXR1cm5zIGEgbWlkZGxld2FyZSBmdW5jdGlvbiB0aGF0IGV4ZWN1dGVzIHRoZSBnaXZlbiBtaWRkbGV3YXJlcyBpbiBvcmRlci5cbiAqL1xuZnVuY3Rpb24gd2l0aE1pZGRsZXdhcmUoLi4ubWlkZGxld2FyZXMpIHtcbiAgICBjb25zdCBpc0RlZmluZWQgPSAobWlkZGxld2FyZSkgPT4gdHlwZW9mIG1pZGRsZXdhcmUgPT09IFwiZnVuY3Rpb25cIjtcbiAgICByZXR1cm4gKGNvbmZpZykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBsZXQgY3VycmVudENvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XG4gICAgICAgIGZvciAoY29uc3QgbWlkZGxld2FyZSBvZiBtaWRkbGV3YXJlcy5maWx0ZXIoaXNEZWZpbmVkKSkge1xuICAgICAgICAgICAgY3VycmVudENvbmZpZyA9IHlpZWxkIG1pZGRsZXdhcmUoY3VycmVudENvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN1cnJlbnRDb25maWc7XG4gICAgfSk7XG59XG5leHBvcnRzLlRBUkdFVF9VUkxfSEVBREVSID0gXCJ4LWZhbC10YXJnZXQtdXJsXCI7XG5mdW5jdGlvbiB3aXRoUHJveHkoY29uZmlnKSB7XG4gICAgY29uc3QgcGFzc3Rocm91Z2ggPSAocmVxdWVzdENvbmZpZykgPT4gUHJvbWlzZS5yZXNvbHZlKHJlcXVlc3RDb25maWcpO1xuICAgIC8vIHdoZW4gcnVubmluZyBvbiB0aGUgc2VydmVyLCB3ZSBkb24ndCBuZWVkIHRvIHByb3h5IHRoZSByZXF1ZXN0XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHBhc3N0aHJvdWdoO1xuICAgIH1cbiAgICAvLyBpZiB4LWZhbC10YXJnZXQtdXJsIGlzIGFscmVhZHkgc2V0LCB3ZSBza2lwIGl0XG4gICAgcmV0dXJuIChyZXF1ZXN0Q29uZmlnKSA9PiByZXF1ZXN0Q29uZmlnLmhlYWRlcnMgJiYgZXhwb3J0cy5UQVJHRVRfVVJMX0hFQURFUiBpbiByZXF1ZXN0Q29uZmlnXG4gICAgICAgID8gcGFzc3Rocm91Z2gocmVxdWVzdENvbmZpZylcbiAgICAgICAgOiBQcm9taXNlLnJlc29sdmUoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0Q29uZmlnKSwgeyB1cmw6IGNvbmZpZy50YXJnZXRVcmwsIGhlYWRlcnM6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgKHJlcXVlc3RDb25maWcuaGVhZGVycyB8fCB7fSkpLCB7IFtleHBvcnRzLlRBUkdFVF9VUkxfSEVBREVSXTogcmVxdWVzdENvbmZpZy51cmwgfSkgfSkpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlkZGxld2FyZS5qcy5tYXAiXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiYWRvcHQiLCJ2YWx1ZSIsInJlc29sdmUiLCJQcm9taXNlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiVEFSR0VUX1VSTF9IRUFERVIiLCJ3aXRoTWlkZGxld2FyZSIsIndpdGhQcm94eSIsIm1pZGRsZXdhcmVzIiwiaXNEZWZpbmVkIiwibWlkZGxld2FyZSIsImNvbmZpZyIsImN1cnJlbnRDb25maWciLCJhc3NpZ24iLCJmaWx0ZXIiLCJwYXNzdGhyb3VnaCIsInJlcXVlc3RDb25maWciLCJoZWFkZXJzIiwidXJsIiwidGFyZ2V0VXJsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/middleware.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/queue.js":
/*!**************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/queue.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = this && this.__rest || function(s, e) {\n    var t = {};\n    for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for(var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++){\n        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.createQueueClient = void 0;\nconst request_1 = __webpack_require__(/*! ./request */ \"(rsc)/./node_modules/@fal-ai/client/src/request.js\");\nconst response_1 = __webpack_require__(/*! ./response */ \"(rsc)/./node_modules/@fal-ai/client/src/response.js\");\nconst streaming_1 = __webpack_require__(/*! ./streaming */ \"(rsc)/./node_modules/@fal-ai/client/src/streaming.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/@fal-ai/client/src/utils.js\");\nconst DEFAULT_POLL_INTERVAL = 500;\nconst createQueueClient = ({ config, storage })=>{\n    const ref = {\n        submit (endpointId, options) {\n            return __awaiter(this, void 0, void 0, function*() {\n                const { webhookUrl, priority } = options, runOptions = __rest(options, [\n                    \"webhookUrl\",\n                    \"priority\"\n                ]);\n                const input = options.input ? yield storage.transformInput(options.input) : undefined;\n                return (0, request_1.dispatchRequest)({\n                    method: options.method,\n                    targetUrl: (0, request_1.buildUrl)(endpointId, Object.assign(Object.assign({}, runOptions), {\n                        subdomain: \"queue\",\n                        query: webhookUrl ? {\n                            fal_webhook: webhookUrl\n                        } : undefined\n                    })),\n                    headers: {\n                        \"x-fal-queue-priority\": priority !== null && priority !== void 0 ? priority : \"normal\"\n                    },\n                    input: input,\n                    config,\n                    options: {\n                        signal: options.abortSignal\n                    }\n                });\n            });\n        },\n        status (endpointId_1, _a) {\n            return __awaiter(this, arguments, void 0, function*(endpointId, { requestId, logs = false, abortSignal }) {\n                const appId = (0, utils_1.parseEndpointId)(endpointId);\n                const prefix = appId.namespace ? `${appId.namespace}/` : \"\";\n                return (0, request_1.dispatchRequest)({\n                    method: \"get\",\n                    targetUrl: (0, request_1.buildUrl)(`${prefix}${appId.owner}/${appId.alias}`, {\n                        subdomain: \"queue\",\n                        query: {\n                            logs: logs ? \"1\" : \"0\"\n                        },\n                        path: `/requests/${requestId}/status`\n                    }),\n                    config,\n                    options: {\n                        signal: abortSignal\n                    }\n                });\n            });\n        },\n        streamStatus (endpointId_1, _a) {\n            return __awaiter(this, arguments, void 0, function*(endpointId, { requestId, logs = false, connectionMode }) {\n                const appId = (0, utils_1.parseEndpointId)(endpointId);\n                const prefix = appId.namespace ? `${appId.namespace}/` : \"\";\n                const queryParams = {\n                    logs: logs ? \"1\" : \"0\"\n                };\n                const url = (0, request_1.buildUrl)(`${prefix}${appId.owner}/${appId.alias}`, {\n                    subdomain: \"queue\",\n                    path: `/requests/${requestId}/status/stream`,\n                    query: queryParams\n                });\n                return new streaming_1.FalStream(endpointId, config, {\n                    url,\n                    method: \"get\",\n                    connectionMode,\n                    queryParams\n                });\n            });\n        },\n        subscribeToStatus (endpointId, options) {\n            return __awaiter(this, void 0, void 0, function*() {\n                const requestId = options.requestId;\n                const timeout = options.timeout;\n                let timeoutId = undefined;\n                const handleCancelError = ()=>{\n                // Ignore errors as the client will follow through with the timeout\n                // regardless of the server response. In case cancelation fails, we\n                // still want to reject the promise and consider the client call canceled.\n                };\n                if (options.mode === \"streaming\") {\n                    const status = yield ref.streamStatus(endpointId, {\n                        requestId,\n                        logs: options.logs,\n                        connectionMode: \"connectionMode\" in options ? options.connectionMode : undefined\n                    });\n                    const logs = [];\n                    if (timeout) {\n                        timeoutId = setTimeout(()=>{\n                            status.abort();\n                            ref.cancel(endpointId, {\n                                requestId\n                            }).catch(handleCancelError);\n                            // TODO this error cannot bubble up to the user since it's thrown in\n                            // a closure in the global scope due to setTimeout behavior.\n                            // User will get a platform error instead. We should find a way to\n                            // make this behavior aligned with polling.\n                            throw new Error(`Client timed out waiting for the request to complete after ${timeout}ms`);\n                        }, timeout);\n                    }\n                    status.on(\"data\", (data)=>{\n                        if (options.onQueueUpdate) {\n                            // accumulate logs to match previous polling behavior\n                            if (\"logs\" in data && Array.isArray(data.logs) && data.logs.length > 0) {\n                                logs.push(...data.logs);\n                            }\n                            options.onQueueUpdate(\"logs\" in data ? Object.assign(Object.assign({}, data), {\n                                logs\n                            }) : data);\n                        }\n                    });\n                    const doneStatus = yield status.done();\n                    if (timeoutId) {\n                        clearTimeout(timeoutId);\n                    }\n                    return doneStatus;\n                }\n                // default to polling until status streaming is stable and faster\n                return new Promise((resolve, reject)=>{\n                    var _a;\n                    let pollingTimeoutId;\n                    // type resolution isn't great in this case, so check for its presence\n                    // and and type so the typechecker behaves as expected\n                    const pollInterval = \"pollInterval\" in options && typeof options.pollInterval === \"number\" ? (_a = options.pollInterval) !== null && _a !== void 0 ? _a : DEFAULT_POLL_INTERVAL : DEFAULT_POLL_INTERVAL;\n                    const clearScheduledTasks = ()=>{\n                        if (timeoutId) {\n                            clearTimeout(timeoutId);\n                        }\n                        if (pollingTimeoutId) {\n                            clearTimeout(pollingTimeoutId);\n                        }\n                    };\n                    if (timeout) {\n                        timeoutId = setTimeout(()=>{\n                            clearScheduledTasks();\n                            ref.cancel(endpointId, {\n                                requestId\n                            }).catch(handleCancelError);\n                            reject(new Error(`Client timed out waiting for the request to complete after ${timeout}ms`));\n                        }, timeout);\n                    }\n                    const poll = ()=>__awaiter(this, void 0, void 0, function*() {\n                            var _a;\n                            try {\n                                const requestStatus = yield ref.status(endpointId, {\n                                    requestId,\n                                    logs: (_a = options.logs) !== null && _a !== void 0 ? _a : false,\n                                    abortSignal: options.abortSignal\n                                });\n                                if (options.onQueueUpdate) {\n                                    options.onQueueUpdate(requestStatus);\n                                }\n                                if (requestStatus.status === \"COMPLETED\") {\n                                    clearScheduledTasks();\n                                    resolve(requestStatus);\n                                    return;\n                                }\n                                pollingTimeoutId = setTimeout(poll, pollInterval);\n                            } catch (error) {\n                                clearScheduledTasks();\n                                reject(error);\n                            }\n                        });\n                    poll().catch(reject);\n                });\n            });\n        },\n        result (endpointId_1, _a) {\n            return __awaiter(this, arguments, void 0, function*(endpointId, { requestId, abortSignal }) {\n                const appId = (0, utils_1.parseEndpointId)(endpointId);\n                const prefix = appId.namespace ? `${appId.namespace}/` : \"\";\n                return (0, request_1.dispatchRequest)({\n                    method: \"get\",\n                    targetUrl: (0, request_1.buildUrl)(`${prefix}${appId.owner}/${appId.alias}`, {\n                        subdomain: \"queue\",\n                        path: `/requests/${requestId}`\n                    }),\n                    config: Object.assign(Object.assign({}, config), {\n                        responseHandler: response_1.resultResponseHandler\n                    }),\n                    options: {\n                        signal: abortSignal\n                    }\n                });\n            });\n        },\n        cancel (endpointId_1, _a) {\n            return __awaiter(this, arguments, void 0, function*(endpointId, { requestId, abortSignal }) {\n                const appId = (0, utils_1.parseEndpointId)(endpointId);\n                const prefix = appId.namespace ? `${appId.namespace}/` : \"\";\n                yield (0, request_1.dispatchRequest)({\n                    method: \"put\",\n                    targetUrl: (0, request_1.buildUrl)(`${prefix}${appId.owner}/${appId.alias}`, {\n                        subdomain: \"queue\",\n                        path: `/requests/${requestId}/cancel`\n                    }),\n                    config,\n                    options: {\n                        signal: abortSignal\n                    }\n                });\n            });\n        }\n    };\n    return ref;\n};\nexports.createQueueClient = createQueueClient; //# sourceMappingURL=queue.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3F1ZXVlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsSUFBSUEsWUFBWSxJQUFLLElBQUksSUFBSSxDQUFDQSxTQUFTLElBQUssU0FBVUMsT0FBTyxFQUFFQyxVQUFVLEVBQUVDLENBQUMsRUFBRUMsU0FBUztJQUNuRixTQUFTQyxNQUFNQyxLQUFLO1FBQUksT0FBT0EsaUJBQWlCSCxJQUFJRyxRQUFRLElBQUlILEVBQUUsU0FBVUksT0FBTztZQUFJQSxRQUFRRDtRQUFRO0lBQUk7SUFDM0csT0FBTyxJQUFLSCxDQUFBQSxLQUFNQSxDQUFBQSxJQUFJSyxPQUFNLENBQUMsRUFBRyxTQUFVRCxPQUFPLEVBQUVFLE1BQU07UUFDckQsU0FBU0MsVUFBVUosS0FBSztZQUFJLElBQUk7Z0JBQUVLLEtBQUtQLFVBQVVRLElBQUksQ0FBQ047WUFBUyxFQUFFLE9BQU9PLEdBQUc7Z0JBQUVKLE9BQU9JO1lBQUk7UUFBRTtRQUMxRixTQUFTQyxTQUFTUixLQUFLO1lBQUksSUFBSTtnQkFBRUssS0FBS1AsU0FBUyxDQUFDLFFBQVEsQ0FBQ0U7WUFBUyxFQUFFLE9BQU9PLEdBQUc7Z0JBQUVKLE9BQU9JO1lBQUk7UUFBRTtRQUM3RixTQUFTRixLQUFLSSxNQUFNO1lBQUlBLE9BQU9DLElBQUksR0FBR1QsUUFBUVEsT0FBT1QsS0FBSyxJQUFJRCxNQUFNVSxPQUFPVCxLQUFLLEVBQUVXLElBQUksQ0FBQ1AsV0FBV0k7UUFBVztRQUM3R0gsS0FBSyxDQUFDUCxZQUFZQSxVQUFVYyxLQUFLLENBQUNqQixTQUFTQyxjQUFjLEVBQUUsR0FBR1UsSUFBSTtJQUN0RTtBQUNKO0FBQ0EsSUFBSU8sU0FBUyxJQUFLLElBQUksSUFBSSxDQUFDQSxNQUFNLElBQUssU0FBVUMsQ0FBQyxFQUFFUCxDQUFDO0lBQ2hELElBQUlRLElBQUksQ0FBQztJQUNULElBQUssSUFBSUMsS0FBS0YsRUFBRyxJQUFJRyxPQUFPQyxTQUFT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QUNuQixPQUFPbEUsVUFBVSxJQUFJLEVBQUVtRSxXQUFXLEtBQUssR0FBRyxVQUFXdEIsVUFBVSxFQUFFLEVBQUV1QixTQUFTLEVBQUVMLFdBQVcsRUFBRTtnQkFDdkYsTUFBTU8sUUFBUSxDQUFDLEdBQUcvQixRQUFRZ0MsZUFBZSxFQUFFMUI7Z0JBQzNDLE1BQU0yQixTQUFTRixNQUFNRyxTQUFTLEdBQUcsQ0FBQyxFQUFFSCxNQUFNRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUc7Z0JBQ3pELE1BQU0sQ0FBQyxHQUFHdEMsVUFBVWtCLGVBQWUsRUFBRTtvQkFDakNDLFFBQVE7b0JBQ1JDLFdBQVcsQ0FBQyxHQUFHcEIsVUFBVXFCLFFBQVEsRUFBRSxDQUFDLEVBQUVnQixPQUFPLEVBQUVGLE1BQU1JLEtBQUssQ0FBQyxDQUFDLEVBQUVKLE1BQU1LLEtBQUssQ0FBQyxDQUFDLEVBQUU7d0JBQ3pFakIsV0FBVzt3QkFDWGtCLE1BQU0sQ0FBQyxVQUFVLEVBQUVSLFVBQVUsT0FBTyxDQUFDO29CQUN6QztvQkFDQTNCO29CQUNBSyxTQUFTO3dCQUNMZ0IsUUFBUUM7b0JBQ1o7Z0JBQ0o7WUFDSjtRQUNKO0lBQ0o7SUFDQSxPQUFPcEI7QUFDWDtBQUNBVix5QkFBeUIsR0FBR0MsbUJBQzVCLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1lbnUtZ2VuZXJhdG9yLy4vbm9kZV9tb2R1bGVzL0BmYWwtYWkvY2xpZW50L3NyYy9xdWV1ZS5qcz8zN2EwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNyZWF0ZVF1ZXVlQ2xpZW50ID0gdm9pZCAwO1xuY29uc3QgcmVxdWVzdF8xID0gcmVxdWlyZShcIi4vcmVxdWVzdFwiKTtcbmNvbnN0IHJlc3BvbnNlXzEgPSByZXF1aXJlKFwiLi9yZXNwb25zZVwiKTtcbmNvbnN0IHN0cmVhbWluZ18xID0gcmVxdWlyZShcIi4vc3RyZWFtaW5nXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuY29uc3QgREVGQVVMVF9QT0xMX0lOVEVSVkFMID0gNTAwO1xuY29uc3QgY3JlYXRlUXVldWVDbGllbnQgPSAoeyBjb25maWcsIHN0b3JhZ2UsIH0pID0+IHtcbiAgICBjb25zdCByZWYgPSB7XG4gICAgICAgIHN1Ym1pdChlbmRwb2ludElkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgd2ViaG9va1VybCwgcHJpb3JpdHkgfSA9IG9wdGlvbnMsIHJ1bk9wdGlvbnMgPSBfX3Jlc3Qob3B0aW9ucywgW1wid2ViaG9va1VybFwiLCBcInByaW9yaXR5XCJdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IG9wdGlvbnMuaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgPyB5aWVsZCBzdG9yYWdlLnRyYW5zZm9ybUlucHV0KG9wdGlvbnMuaW5wdXQpXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHJldHVybiAoMCwgcmVxdWVzdF8xLmRpc3BhdGNoUmVxdWVzdCkoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IG9wdGlvbnMubWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRVcmw6ICgwLCByZXF1ZXN0XzEuYnVpbGRVcmwpKGVuZHBvaW50SWQsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcnVuT3B0aW9ucyksIHsgc3ViZG9tYWluOiBcInF1ZXVlXCIsIHF1ZXJ5OiB3ZWJob29rVXJsID8geyBmYWxfd2ViaG9vazogd2ViaG9va1VybCB9IDogdW5kZWZpbmVkIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LWZhbC1xdWV1ZS1wcmlvcml0eVwiOiBwcmlvcml0eSAhPT0gbnVsbCAmJiBwcmlvcml0eSAhPT0gdm9pZCAwID8gcHJpb3JpdHkgOiBcIm5vcm1hbFwiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpbnB1dDogaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXR1cyhlbmRwb2ludElkXzEsIF9hKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiogKGVuZHBvaW50SWQsIHsgcmVxdWVzdElkLCBsb2dzID0gZmFsc2UsIGFib3J0U2lnbmFsIH0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcHBJZCA9ICgwLCB1dGlsc18xLnBhcnNlRW5kcG9pbnRJZCkoZW5kcG9pbnRJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJlZml4ID0gYXBwSWQubmFtZXNwYWNlID8gYCR7YXBwSWQubmFtZXNwYWNlfS9gIDogXCJcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gKDAsIHJlcXVlc3RfMS5kaXNwYXRjaFJlcXVlc3QpKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRVcmw6ICgwLCByZXF1ZXN0XzEuYnVpbGRVcmwpKGAke3ByZWZpeH0ke2FwcElkLm93bmVyfS8ke2FwcElkLmFsaWFzfWAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmRvbWFpbjogXCJxdWV1ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHsgbG9nczogbG9ncyA/IFwiMVwiIDogXCIwXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvcmVxdWVzdHMvJHtyZXF1ZXN0SWR9L3N0YXR1c2AsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogYWJvcnRTaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RyZWFtU3RhdHVzKGVuZHBvaW50SWRfMSwgX2EpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uKiAoZW5kcG9pbnRJZCwgeyByZXF1ZXN0SWQsIGxvZ3MgPSBmYWxzZSwgY29ubmVjdGlvbk1vZGUgfSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFwcElkID0gKDAsIHV0aWxzXzEucGFyc2VFbmRwb2ludElkKShlbmRwb2ludElkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVmaXggPSBhcHBJZC5uYW1lc3BhY2UgPyBgJHthcHBJZC5uYW1lc3BhY2V9L2AgOiBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICBsb2dzOiBsb2dzID8gXCIxXCIgOiBcIjBcIixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9ICgwLCByZXF1ZXN0XzEuYnVpbGRVcmwpKGAke3ByZWZpeH0ke2FwcElkLm93bmVyfS8ke2FwcElkLmFsaWFzfWAsIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViZG9tYWluOiBcInF1ZXVlXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvcmVxdWVzdHMvJHtyZXF1ZXN0SWR9L3N0YXR1cy9zdHJlYW1gLFxuICAgICAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBzdHJlYW1pbmdfMS5GYWxTdHJlYW0oZW5kcG9pbnRJZCwgY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc3Vic2NyaWJlVG9TdGF0dXMoZW5kcG9pbnRJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBvcHRpb25zLnJlcXVlc3RJZDtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0O1xuICAgICAgICAgICAgICAgIGxldCB0aW1lb3V0SWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlQ2FuY2VsRXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBlcnJvcnMgYXMgdGhlIGNsaWVudCB3aWxsIGZvbGxvdyB0aHJvdWdoIHdpdGggdGhlIHRpbWVvdXRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVnYXJkbGVzcyBvZiB0aGUgc2VydmVyIHJlc3BvbnNlLiBJbiBjYXNlIGNhbmNlbGF0aW9uIGZhaWxzLCB3ZVxuICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCB3YW50IHRvIHJlamVjdCB0aGUgcHJvbWlzZSBhbmQgY29uc2lkZXIgdGhlIGNsaWVudCBjYWxsIGNhbmNlbGVkLlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubW9kZSA9PT0gXCJzdHJlYW1pbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSB5aWVsZCByZWYuc3RyZWFtU3RhdHVzKGVuZHBvaW50SWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ3M6IG9wdGlvbnMubG9ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25Nb2RlOiBcImNvbm5lY3Rpb25Nb2RlXCIgaW4gb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb25uZWN0aW9uTW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9ncyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmLmNhbmNlbChlbmRwb2ludElkLCB7IHJlcXVlc3RJZCB9KS5jYXRjaChoYW5kbGVDYW5jZWxFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyB0aGlzIGVycm9yIGNhbm5vdCBidWJibGUgdXAgdG8gdGhlIHVzZXIgc2luY2UgaXQncyB0aHJvd24gaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhIGNsb3N1cmUgaW4gdGhlIGdsb2JhbCBzY29wZSBkdWUgdG8gc2V0VGltZW91dCBiZWhhdmlvci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIHdpbGwgZ2V0IGEgcGxhdGZvcm0gZXJyb3IgaW5zdGVhZC4gV2Ugc2hvdWxkIGZpbmQgYSB3YXkgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHRoaXMgYmVoYXZpb3IgYWxpZ25lZCB3aXRoIHBvbGxpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDbGllbnQgdGltZWQgb3V0IHdhaXRpbmcgZm9yIHRoZSByZXF1ZXN0IHRvIGNvbXBsZXRlIGFmdGVyICR7dGltZW91dH1tc2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLm9uKFwiZGF0YVwiLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25RdWV1ZVVwZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY3VtdWxhdGUgbG9ncyB0byBtYXRjaCBwcmV2aW91cyBwb2xsaW5nIGJlaGF2aW9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwibG9nc1wiIGluIGRhdGEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShkYXRhLmxvZ3MpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubG9ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ3MucHVzaCguLi5kYXRhLmxvZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm9uUXVldWVVcGRhdGUoXCJsb2dzXCIgaW4gZGF0YSA/IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGF0YSksIHsgbG9ncyB9KSA6IGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9uZVN0YXR1cyA9IHlpZWxkIHN0YXR1cy5kb25lKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb25lU3RhdHVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHRvIHBvbGxpbmcgdW50aWwgc3RhdHVzIHN0cmVhbWluZyBpcyBzdGFibGUgYW5kIGZhc3RlclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBvbGxpbmdUaW1lb3V0SWQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIHR5cGUgcmVzb2x1dGlvbiBpc24ndCBncmVhdCBpbiB0aGlzIGNhc2UsIHNvIGNoZWNrIGZvciBpdHMgcHJlc2VuY2VcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGFuZCB0eXBlIHNvIHRoZSB0eXBlY2hlY2tlciBiZWhhdmVzIGFzIGV4cGVjdGVkXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGxJbnRlcnZhbCA9IFwicG9sbEludGVydmFsXCIgaW4gb3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5wb2xsSW50ZXJ2YWwgPT09IFwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKChfYSA9IG9wdGlvbnMucG9sbEludGVydmFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBERUZBVUxUX1BPTExfSU5URVJWQUwpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IERFRkFVTFRfUE9MTF9JTlRFUlZBTDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYXJTY2hlZHVsZWRUYXNrcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xsaW5nVGltZW91dElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHBvbGxpbmdUaW1lb3V0SWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJTY2hlZHVsZWRUYXNrcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5jYW5jZWwoZW5kcG9pbnRJZCwgeyByZXF1ZXN0SWQgfSkuY2F0Y2goaGFuZGxlQ2FuY2VsRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYENsaWVudCB0aW1lZCBvdXQgd2FpdGluZyBmb3IgdGhlIHJlcXVlc3QgdG8gY29tcGxldGUgYWZ0ZXIgJHt0aW1lb3V0fW1zYCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9sbCA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdFN0YXR1cyA9IHlpZWxkIHJlZi5zdGF0dXMoZW5kcG9pbnRJZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ3M6IChfYSA9IG9wdGlvbnMubG9ncykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uUXVldWVVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vblF1ZXVlVXBkYXRlKHJlcXVlc3RTdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdFN0YXR1cy5zdGF0dXMgPT09IFwiQ09NUExFVEVEXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJTY2hlZHVsZWRUYXNrcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcXVlc3RTdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGxpbmdUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KHBvbGwsIHBvbGxJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclNjaGVkdWxlZFRhc2tzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHBvbGwoKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3VsdChlbmRwb2ludElkXzEsIF9hKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIGFyZ3VtZW50cywgdm9pZCAwLCBmdW5jdGlvbiogKGVuZHBvaW50SWQsIHsgcmVxdWVzdElkLCBhYm9ydFNpZ25hbCB9KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwSWQgPSAoMCwgdXRpbHNfMS5wYXJzZUVuZHBvaW50SWQpKGVuZHBvaW50SWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IGFwcElkLm5hbWVzcGFjZSA/IGAke2FwcElkLm5hbWVzcGFjZX0vYCA6IFwiXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgwLCByZXF1ZXN0XzEuZGlzcGF0Y2hSZXF1ZXN0KSh7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJnZXRcIixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VXJsOiAoMCwgcmVxdWVzdF8xLmJ1aWxkVXJsKShgJHtwcmVmaXh9JHthcHBJZC5vd25lcn0vJHthcHBJZC5hbGlhc31gLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJkb21haW46IFwicXVldWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvcmVxdWVzdHMvJHtyZXF1ZXN0SWR9YCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWcpLCB7IHJlc3BvbnNlSGFuZGxlcjogcmVzcG9uc2VfMS5yZXN1bHRSZXNwb25zZUhhbmRsZXIgfSksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogYWJvcnRTaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgY2FuY2VsKGVuZHBvaW50SWRfMSwgX2EpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uKiAoZW5kcG9pbnRJZCwgeyByZXF1ZXN0SWQsIGFib3J0U2lnbmFsIH0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcHBJZCA9ICgwLCB1dGlsc18xLnBhcnNlRW5kcG9pbnRJZCkoZW5kcG9pbnRJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJlZml4ID0gYXBwSWQubmFtZXNwYWNlID8gYCR7YXBwSWQubmFtZXNwYWNlfS9gIDogXCJcIjtcbiAgICAgICAgICAgICAgICB5aWVsZCAoMCwgcmVxdWVzdF8xLmRpc3BhdGNoUmVxdWVzdCkoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwicHV0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFVybDogKDAsIHJlcXVlc3RfMS5idWlsZFVybCkoYCR7cHJlZml4fSR7YXBwSWQub3duZXJ9LyR7YXBwSWQuYWxpYXN9YCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViZG9tYWluOiBcInF1ZXVlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL3JlcXVlc3RzLyR7cmVxdWVzdElkfS9jYW5jZWxgLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IGFib3J0U2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICByZXR1cm4gcmVmO1xufTtcbmV4cG9ydHMuY3JlYXRlUXVldWVDbGllbnQgPSBjcmVhdGVRdWV1ZUNsaWVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXVlLmpzLm1hcCJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJhZG9wdCIsInZhbHVlIiwicmVzb2x2ZSIsIlByb21pc2UiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX3Jlc3QiLCJzIiwidCIsInAiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbmRleE9mIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiaSIsImxlbmd0aCIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiY3JlYXRlUXVldWVDbGllbnQiLCJyZXF1ZXN0XzEiLCJyZXF1aXJlIiwicmVzcG9uc2VfMSIsInN0cmVhbWluZ18xIiwidXRpbHNfMSIsIkRFRkFVTFRfUE9MTF9JTlRFUlZBTCIsImNvbmZpZyIsInN0b3JhZ2UiLCJyZWYiLCJzdWJtaXQiLCJlbmRwb2ludElkIiwib3B0aW9ucyIsIndlYmhvb2tVcmwiLCJwcmlvcml0eSIsInJ1bk9wdGlvbnMiLCJpbnB1dCIsInRyYW5zZm9ybUlucHV0IiwidW5kZWZpbmVkIiwiZGlzcGF0Y2hSZXF1ZXN0IiwibWV0aG9kIiwidGFyZ2V0VXJsIiwiYnVpbGRVcmwiLCJhc3NpZ24iLCJzdWJkb21haW4iLCJxdWVyeSIsImZhbF93ZWJob29rIiwiaGVhZGVycyIsInNpZ25hbCIsImFib3J0U2lnbmFsIiwic3RhdHVzIiwiZW5kcG9pbnRJZF8xIiwiX2EiLCJhcmd1bWVudHMiLCJyZXF1ZXN0SWQiLCJsb2dzIiwiYXBwSWQiLCJwYXJzZUVuZHBvaW50SWQiLCJwcmVmaXgiLCJuYW1lc3BhY2UiLCJvd25lciIsImFsaWFzIiwicGF0aCIsInN0cmVhbVN0YXR1cyIsImNvbm5lY3Rpb25Nb2RlIiwicXVlcnlQYXJhbXMiLCJ1cmwiLCJGYWxTdHJlYW0iLCJzdWJzY3JpYmVUb1N0YXR1cyIsInRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJoYW5kbGVDYW5jZWxFcnJvciIsIm1vZGUiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJjYW5jZWwiLCJjYXRjaCIsIkVycm9yIiwib24iLCJkYXRhIiwib25RdWV1ZVVwZGF0ZSIsIkFycmF5IiwiaXNBcnJheSIsInB1c2giLCJkb25lU3RhdHVzIiwiY2xlYXJUaW1lb3V0IiwicG9sbGluZ1RpbWVvdXRJZCIsInBvbGxJbnRlcnZhbCIsImNsZWFyU2NoZWR1bGVkVGFza3MiLCJwb2xsIiwicmVxdWVzdFN0YXR1cyIsImVycm9yIiwicmVzcG9uc2VIYW5kbGVyIiwicmVzdWx0UmVzcG9uc2VIYW5kbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/realtime.js":
/*!*****************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/realtime.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.createRealtimeClient = createRealtimeClient;\n/* eslint-disable @typescript-eslint/no-explicit-any */ const msgpack_1 = __webpack_require__(/*! @msgpack/msgpack */ \"(rsc)/./node_modules/@msgpack/msgpack/dist.es5+esm/index.mjs\");\nconst robot3_1 = __webpack_require__(/*! robot3 */ \"(rsc)/./node_modules/robot3/dist/machine.js\");\nconst auth_1 = __webpack_require__(/*! ./auth */ \"(rsc)/./node_modules/@fal-ai/client/src/auth.js\");\nconst response_1 = __webpack_require__(/*! ./response */ \"(rsc)/./node_modules/@fal-ai/client/src/response.js\");\nconst runtime_1 = __webpack_require__(/*! ./runtime */ \"(rsc)/./node_modules/@fal-ai/client/src/runtime.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/@fal-ai/client/src/utils.js\");\nconst initialState = ()=>({\n        enqueuedMessage: undefined\n    });\nfunction hasToken(context) {\n    return context.token !== undefined;\n}\nfunction noToken(context) {\n    return !hasToken(context);\n}\nfunction enqueueMessage(context, event) {\n    return Object.assign(Object.assign({}, context), {\n        enqueuedMessage: event.message\n    });\n}\nfunction closeConnection(context) {\n    if (context.websocket && context.websocket.readyState === WebSocket.OPEN) {\n        context.websocket.close();\n    }\n    return Object.assign(Object.assign({}, context), {\n        websocket: undefined\n    });\n}\nfunction sendMessage(context, event) {\n    if (context.websocket && context.websocket.readyState === WebSocket.OPEN) {\n        if (event.message instanceof Uint8Array) {\n            context.websocket.send(event.message);\n        } else {\n            context.websocket.send((0, msgpack_1.encode)(event.message));\n        }\n        return Object.assign(Object.assign({}, context), {\n            enqueuedMessage: undefined\n        });\n    }\n    return Object.assign(Object.assign({}, context), {\n        enqueuedMessage: event.message\n    });\n}\nfunction expireToken(context) {\n    return Object.assign(Object.assign({}, context), {\n        token: undefined\n    });\n}\nfunction setToken(context, event) {\n    return Object.assign(Object.assign({}, context), {\n        token: event.token\n    });\n}\nfunction connectionEstablished(context, event) {\n    return Object.assign(Object.assign({}, context), {\n        websocket: event.websocket\n    });\n}\n// State machine\nconst connectionStateMachine = (0, robot3_1.createMachine)(\"idle\", {\n    idle: (0, robot3_1.state)((0, robot3_1.transition)(\"send\", \"connecting\", (0, robot3_1.reduce)(enqueueMessage)), (0, robot3_1.transition)(\"expireToken\", \"idle\", (0, robot3_1.reduce)(expireToken)), (0, robot3_1.transition)(\"close\", \"idle\", (0, robot3_1.reduce)(closeConnection))),\n    connecting: (0, robot3_1.state)((0, robot3_1.transition)(\"connecting\", \"connecting\"), (0, robot3_1.transition)(\"connected\", \"active\", (0, robot3_1.reduce)(connectionEstablished)), (0, robot3_1.transition)(\"connectionClosed\", \"idle\", (0, robot3_1.reduce)(closeConnection)), (0, robot3_1.transition)(\"send\", \"connecting\", (0, robot3_1.reduce)(enqueueMessage)), (0, robot3_1.transition)(\"close\", \"idle\", (0, robot3_1.reduce)(closeConnection)), (0, robot3_1.immediate)(\"authRequired\", (0, robot3_1.guard)(noToken))),\n    authRequired: (0, robot3_1.state)((0, robot3_1.transition)(\"initiateAuth\", \"authInProgress\"), (0, robot3_1.transition)(\"send\", \"authRequired\", (0, robot3_1.reduce)(enqueueMessage)), (0, robot3_1.transition)(\"close\", \"idle\", (0, robot3_1.reduce)(closeConnection))),\n    authInProgress: (0, robot3_1.state)((0, robot3_1.transition)(\"authenticated\", \"connecting\", (0, robot3_1.reduce)(setToken)), (0, robot3_1.transition)(\"unauthorized\", \"idle\", (0, robot3_1.reduce)(expireToken), (0, robot3_1.reduce)(closeConnection)), (0, robot3_1.transition)(\"send\", \"authInProgress\", (0, robot3_1.reduce)(enqueueMessage)), (0, robot3_1.transition)(\"close\", \"idle\", (0, robot3_1.reduce)(closeConnection))),\n    active: (0, robot3_1.state)((0, robot3_1.transition)(\"send\", \"active\", (0, robot3_1.reduce)(sendMessage)), (0, robot3_1.transition)(\"unauthorized\", \"idle\", (0, robot3_1.reduce)(expireToken)), (0, robot3_1.transition)(\"connectionClosed\", \"idle\", (0, robot3_1.reduce)(closeConnection)), (0, robot3_1.transition)(\"close\", \"idle\", (0, robot3_1.reduce)(closeConnection))),\n    failed: (0, robot3_1.state)((0, robot3_1.transition)(\"send\", \"failed\"), (0, robot3_1.transition)(\"close\", \"idle\", (0, robot3_1.reduce)(closeConnection)))\n}, initialState);\nfunction buildRealtimeUrl(app, { token, maxBuffering }) {\n    if (maxBuffering !== undefined && (maxBuffering < 1 || maxBuffering > 60)) {\n        throw new Error(\"The `maxBuffering` must be between 1 and 60 (inclusive)\");\n    }\n    const queryParams = new URLSearchParams({\n        fal_jwt_token: token\n    });\n    if (maxBuffering !== undefined) {\n        queryParams.set(\"max_buffering\", maxBuffering.toFixed(0));\n    }\n    const appId = (0, utils_1.ensureEndpointIdFormat)(app);\n    return `wss://fal.run/${appId}/realtime?${queryParams.toString()}`;\n}\nconst DEFAULT_THROTTLE_INTERVAL = 128;\nfunction isUnauthorizedError(message) {\n    // TODO we need better protocol definition with error codes\n    return message[\"status\"] === \"error\" && message[\"error\"] === \"Unauthorized\";\n}\n/**\n * See https://www.rfc-editor.org/rfc/rfc6455.html#section-7.4.1\n */ const WebSocketErrorCodes = {\n    NORMAL_CLOSURE: 1000,\n    GOING_AWAY: 1001\n};\nconst connectionCache = new Map();\nconst connectionCallbacks = new Map();\nfunction reuseInterpreter(key, throttleInterval, onChange) {\n    if (!connectionCache.has(key)) {\n        const machine = (0, robot3_1.interpret)(connectionStateMachine, onChange);\n        connectionCache.set(key, Object.assign(Object.assign({}, machine), {\n            throttledSend: throttleInterval > 0 ? (0, utils_1.throttle)(machine.send, throttleInterval, true) : machine.send\n        }));\n    }\n    return connectionCache.get(key);\n}\nconst noop = ()=>{\n/* No-op */ };\n/**\n * A no-op connection that does not send any message.\n * Useful on the frameworks that reuse code for both ssr and csr (e.g. Next)\n * so the call when doing ssr has no side-effects.\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst NoOpConnection = {\n    send: noop,\n    close: noop\n};\nfunction isSuccessfulResult(data) {\n    return data.status !== \"error\" && data.type !== \"x-fal-message\" && !isFalErrorResult(data);\n}\nfunction isFalErrorResult(data) {\n    return data.type === \"x-fal-error\";\n}\nfunction createRealtimeClient({ config }) {\n    return {\n        connect (app, handler) {\n            const { // if running on React in the server, set clientOnly to true by default\n            clientOnly = (0, utils_1.isReact)() && !(0, runtime_1.isBrowser)(), connectionKey = crypto.randomUUID(), maxBuffering, throttleInterval = DEFAULT_THROTTLE_INTERVAL } = handler;\n            if (clientOnly && !(0, runtime_1.isBrowser)()) {\n                return NoOpConnection;\n            }\n            let previousState;\n            // Although the state machine is cached so we don't open multiple connections,\n            // we still need to update the callbacks so we can call the correct references\n            // when the state machine is reused. This is needed because the callbacks\n            // are passed as part of the handler object, which can be different across\n            // different calls to `connect`.\n            connectionCallbacks.set(connectionKey, {\n                onError: handler.onError,\n                onResult: handler.onResult\n            });\n            const getCallbacks = ()=>connectionCallbacks.get(connectionKey);\n            const stateMachine = reuseInterpreter(connectionKey, throttleInterval, ({ context, machine, send })=>{\n                const { enqueuedMessage, token } = context;\n                if (machine.current === \"active\" && enqueuedMessage) {\n                    send({\n                        type: \"send\",\n                        message: enqueuedMessage\n                    });\n                }\n                if (machine.current === \"authRequired\" && token === undefined && previousState !== machine.current) {\n                    send({\n                        type: \"initiateAuth\"\n                    });\n                    (0, auth_1.getTemporaryAuthToken)(app, config).then((token)=>{\n                        send({\n                            type: \"authenticated\",\n                            token\n                        });\n                        const tokenExpirationTimeout = Math.round(auth_1.TOKEN_EXPIRATION_SECONDS * 0.9 * 1000);\n                        setTimeout(()=>{\n                            send({\n                                type: \"expireToken\"\n                            });\n                        }, tokenExpirationTimeout);\n                    }).catch((error)=>{\n                        send({\n                            type: \"unauthorized\",\n                            error\n                        });\n                    });\n                }\n                if (machine.current === \"connecting\" && previousState !== machine.current && token !== undefined) {\n                    const ws = new WebSocket(buildRealtimeUrl(app, {\n                        token,\n                        maxBuffering\n                    }));\n                    ws.onopen = ()=>{\n                        send({\n                            type: \"connected\",\n                            websocket: ws\n                        });\n                    };\n                    ws.onclose = (event)=>{\n                        if (event.code !== WebSocketErrorCodes.NORMAL_CLOSURE) {\n                            const { onError = noop } = getCallbacks();\n                            onError(new response_1.ApiError({\n                                message: `Error closing the connection: ${event.reason}`,\n                                status: event.code\n                            }));\n                        }\n                        send({\n                            type: \"connectionClosed\",\n                            code: event.code\n                        });\n                    };\n                    ws.onerror = (event)=>{\n                        // TODO specify error protocol for identified errors\n                        const { onError = noop } = getCallbacks();\n                        onError(new response_1.ApiError({\n                            message: \"Unknown error\",\n                            status: 500\n                        }));\n                    };\n                    ws.onmessage = (event)=>{\n                        const { onResult } = getCallbacks();\n                        // Handle binary messages as msgpack messages\n                        if (event.data instanceof ArrayBuffer) {\n                            const result = (0, msgpack_1.decode)(new Uint8Array(event.data));\n                            onResult(result);\n                            return;\n                        }\n                        if (event.data instanceof Uint8Array) {\n                            const result = (0, msgpack_1.decode)(event.data);\n                            onResult(result);\n                            return;\n                        }\n                        if (event.data instanceof Blob) {\n                            event.data.arrayBuffer().then((buffer)=>{\n                                const result = (0, msgpack_1.decode)(new Uint8Array(buffer));\n                                onResult(result);\n                            });\n                            return;\n                        }\n                        // Otherwise handle strings as plain JSON messages\n                        const data = JSON.parse(event.data);\n                        // Drop messages that are not related to the actual result.\n                        // In the future, we might want to handle other types of messages.\n                        // TODO: specify the fal ws protocol format\n                        if (isUnauthorizedError(data)) {\n                            send({\n                                type: \"unauthorized\",\n                                error: new Error(\"Unauthorized\")\n                            });\n                            return;\n                        }\n                        if (isSuccessfulResult(data)) {\n                            onResult(data);\n                            return;\n                        }\n                        if (isFalErrorResult(data)) {\n                            if (data.error === \"TIMEOUT\") {\n                                // Timeout error messages just indicate that the connection hasn't\n                                // received an incoming message for a while. We don't need to\n                                // handle them as errors.\n                                return;\n                            }\n                            const { onError = noop } = getCallbacks();\n                            onError(new response_1.ApiError({\n                                message: `${data.error}: ${data.reason}`,\n                                // TODO better error status code\n                                status: 400,\n                                body: data\n                            }));\n                            return;\n                        }\n                    };\n                }\n                previousState = machine.current;\n            });\n            const send = (input)=>{\n                // Use throttled send to avoid sending too many messages\n                stateMachine.throttledSend({\n                    type: \"send\",\n                    message: input\n                });\n            };\n            const close = ()=>{\n                stateMachine.send({\n                    type: \"close\"\n                });\n            };\n            return {\n                send,\n                close\n            };\n        }\n    };\n} //# sourceMappingURL=realtime.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3JlYWx0aW1lLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw0QkFBNEIsR0FBR0U7QUFDL0IscURBQXFELEdBQ3JELE1BQU1DLFlBQVlDLG1CQUFPQSxDQUFDLHNGQUFrQjtBQUM1QyxNQUFNQyxXQUFXRCxtQkFBT0EsQ0FBQywyREFBUTtBQUNqQyxNQUFNRSxTQUFTRixtQkFBT0EsQ0FBQywrREFBUTtBQUMvQixNQUFNRyxhQUFhSCxtQkFBT0EsQ0FBQyx1RUFBWTtBQUN2QyxNQUFNSSxZQUFZSixtQkFBT0EsQ0FBQyxxRUFBVztBQUNyQyxNQUFNSyxVQUFVTCxtQkFBT0EsQ0FBQyxpRUFBUztBQUNqQyxNQUFNTSxlQUFlLElBQU87UUFDeEJDLGlCQUFpQkM7SUFDckI7QUFDQSxTQUFTQyxTQUFTQyxPQUFPO0lBQ3JCLE9BQU9BLFFBQVFDLEtBQUssS0FBS0g7QUFDN0I7QUFDQSxTQUFTSSxRQUFRRixPQUFPO0lBQ3BCLE9BQU8sQ0FBQ0QsU0FBU0M7QUFDckI7QUFDQSxTQUFTRyxlQUFlSCxPQUFPLEVBQUVJLEtBQUs7SUFDbEMsT0FBT3BCLE9BQU9xQixNQUFNLENBQUNyQixPQUFPcUIsTUFBTSxDQUFDLENBQUMsR0FBR0wsVUFBVTtRQUFFSCxpQkFBaUJPLE1BQU1FLE9BQU87SUFBQztBQUN0RjtBQUNBLFNBQVNDLGdCQUFnQlAsT0FBTztJQUM1QixJQUFJQSxRQUFRUSxTQUFTLElBQUlSLFFBQVFRLFNBQVMsQ0FBQ0MsVUFBVSxLQUFLQyxVQUFVQyxJQUFJLEVBQUU7UUFDdEVYLFFBQVFRLFNBQVMsQ0FBQ0ksS0FBSztJQUMzQjtJQUNBLE9BQU81QixPQUFPcUIsTUFBTSxDQUFDckIsT0FBT3FCLE1BQU0sQ0FBQyxDQUFDLEdBQUdMLFVBQVU7UUFBRVEsV0FBV1Y7SUFBVTtBQUM1RTtBQUNBLFNBQVNlLFlBQVli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SSxDQUFDO29CQUFFcUQsTUFBTTtnQkFBUTtZQUN0QztZQUNBLE9BQU87Z0JBQ0hyRDtnQkFDQUg7WUFDSjtRQUNKO0lBQ0o7QUFDSixFQUNBLG9DQUFvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1lbnUtZ2VuZXJhdG9yLy4vbm9kZV9tb2R1bGVzL0BmYWwtYWkvY2xpZW50L3NyYy9yZWFsdGltZS5qcz84NjI2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jcmVhdGVSZWFsdGltZUNsaWVudCA9IGNyZWF0ZVJlYWx0aW1lQ2xpZW50O1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuY29uc3QgbXNncGFja18xID0gcmVxdWlyZShcIkBtc2dwYWNrL21zZ3BhY2tcIik7XG5jb25zdCByb2JvdDNfMSA9IHJlcXVpcmUoXCJyb2JvdDNcIik7XG5jb25zdCBhdXRoXzEgPSByZXF1aXJlKFwiLi9hdXRoXCIpO1xuY29uc3QgcmVzcG9uc2VfMSA9IHJlcXVpcmUoXCIuL3Jlc3BvbnNlXCIpO1xuY29uc3QgcnVudGltZV8xID0gcmVxdWlyZShcIi4vcnVudGltZVwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbmNvbnN0IGluaXRpYWxTdGF0ZSA9ICgpID0+ICh7XG4gICAgZW5xdWV1ZWRNZXNzYWdlOiB1bmRlZmluZWQsXG59KTtcbmZ1bmN0aW9uIGhhc1Rva2VuKGNvbnRleHQpIHtcbiAgICByZXR1cm4gY29udGV4dC50b2tlbiAhPT0gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gbm9Ub2tlbihjb250ZXh0KSB7XG4gICAgcmV0dXJuICFoYXNUb2tlbihjb250ZXh0KTtcbn1cbmZ1bmN0aW9uIGVucXVldWVNZXNzYWdlKGNvbnRleHQsIGV2ZW50KSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29udGV4dCksIHsgZW5xdWV1ZWRNZXNzYWdlOiBldmVudC5tZXNzYWdlIH0pO1xufVxuZnVuY3Rpb24gY2xvc2VDb25uZWN0aW9uKGNvbnRleHQpIHtcbiAgICBpZiAoY29udGV4dC53ZWJzb2NrZXQgJiYgY29udGV4dC53ZWJzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgICAgY29udGV4dC53ZWJzb2NrZXQuY2xvc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29udGV4dCksIHsgd2Vic29ja2V0OiB1bmRlZmluZWQgfSk7XG59XG5mdW5jdGlvbiBzZW5kTWVzc2FnZShjb250ZXh0LCBldmVudCkge1xuICAgIGlmIChjb250ZXh0LndlYnNvY2tldCAmJiBjb250ZXh0LndlYnNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgICBpZiAoZXZlbnQubWVzc2FnZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgIGNvbnRleHQud2Vic29ja2V0LnNlbmQoZXZlbnQubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0LndlYnNvY2tldC5zZW5kKCgwLCBtc2dwYWNrXzEuZW5jb2RlKShldmVudC5tZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29udGV4dCksIHsgZW5xdWV1ZWRNZXNzYWdlOiB1bmRlZmluZWQgfSk7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbnRleHQpLCB7IGVucXVldWVkTWVzc2FnZTogZXZlbnQubWVzc2FnZSB9KTtcbn1cbmZ1bmN0aW9uIGV4cGlyZVRva2VuKGNvbnRleHQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZXh0KSwgeyB0b2tlbjogdW5kZWZpbmVkIH0pO1xufVxuZnVuY3Rpb24gc2V0VG9rZW4oY29udGV4dCwgZXZlbnQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZXh0KSwgeyB0b2tlbjogZXZlbnQudG9rZW4gfSk7XG59XG5mdW5jdGlvbiBjb25uZWN0aW9uRXN0YWJsaXNoZWQoY29udGV4dCwgZXZlbnQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZXh0KSwgeyB3ZWJzb2NrZXQ6IGV2ZW50LndlYnNvY2tldCB9KTtcbn1cbi8vIFN0YXRlIG1hY2hpbmVcbmNvbnN0IGNvbm5lY3Rpb25TdGF0ZU1hY2hpbmUgPSAoMCwgcm9ib3QzXzEuY3JlYXRlTWFjaGluZSkoXCJpZGxlXCIsIHtcbiAgICBpZGxlOiAoMCwgcm9ib3QzXzEuc3RhdGUpKCgwLCByb2JvdDNfMS50cmFuc2l0aW9uKShcInNlbmRcIiwgXCJjb25uZWN0aW5nXCIsICgwLCByb2JvdDNfMS5yZWR1Y2UpKGVucXVldWVNZXNzYWdlKSksICgwLCByb2JvdDNfMS50cmFuc2l0aW9uKShcImV4cGlyZVRva2VuXCIsIFwiaWRsZVwiLCAoMCwgcm9ib3QzXzEucmVkdWNlKShleHBpcmVUb2tlbikpLCAoMCwgcm9ib3QzXzEudHJhbnNpdGlvbikoXCJjbG9zZVwiLCBcImlkbGVcIiwgKDAsIHJvYm90M18xLnJlZHVjZSkoY2xvc2VDb25uZWN0aW9uKSkpLFxuICAgIGNvbm5lY3Rpbmc6ICgwLCByb2JvdDNfMS5zdGF0ZSkoKDAsIHJvYm90M18xLnRyYW5zaXRpb24pKFwiY29ubmVjdGluZ1wiLCBcImNvbm5lY3RpbmdcIiksICgwLCByb2JvdDNfMS50cmFuc2l0aW9uKShcImNvbm5lY3RlZFwiLCBcImFjdGl2ZVwiLCAoMCwgcm9ib3QzXzEucmVkdWNlKShjb25uZWN0aW9uRXN0YWJsaXNoZWQpKSwgKDAsIHJvYm90M18xLnRyYW5zaXRpb24pKFwiY29ubmVjdGlvbkNsb3NlZFwiLCBcImlkbGVcIiwgKDAsIHJvYm90M18xLnJlZHVjZSkoY2xvc2VDb25uZWN0aW9uKSksICgwLCByb2JvdDNfMS50cmFuc2l0aW9uKShcInNlbmRcIiwgXCJjb25uZWN0aW5nXCIsICgwLCByb2JvdDNfMS5yZWR1Y2UpKGVucXVldWVNZXNzYWdlKSksICgwLCByb2JvdDNfMS50cmFuc2l0aW9uKShcImNsb3NlXCIsIFwiaWRsZVwiLCAoMCwgcm9ib3QzXzEucmVkdWNlKShjbG9zZUNvbm5lY3Rpb24pKSwgKDAsIHJvYm90M18xLmltbWVkaWF0ZSkoXCJhdXRoUmVxdWlyZWRcIiwgKDAsIHJvYm90M18xLmd1YXJkKShub1Rva2VuKSkpLFxuICAgIGF1dGhSZXF1aXJlZDogKDAsIHJvYm90M18xLnN0YXRlKSgoMCwgcm9ib3QzXzEudHJhbnNpdGlvbikoXCJpbml0aWF0ZUF1dGhcIiwgXCJhdXRoSW5Qcm9ncmVzc1wiKSwgKDAsIHJvYm90M18xLnRyYW5zaXRpb24pKFwic2VuZFwiLCBcImF1dGhSZXF1aXJlZFwiLCAoMCwgcm9ib3QzXzEucmVkdWNlKShlbnF1ZXVlTWVzc2FnZSkpLCAoMCwgcm9ib3QzXzEudHJhbnNpdGlvbikoXCJjbG9zZVwiLCBcImlkbGVcIiwgKDAsIHJvYm90M18xLnJlZHVjZSkoY2xvc2VDb25uZWN0aW9uKSkpLFxuICAgIGF1dGhJblByb2dyZXNzOiAoMCwgcm9ib3QzXzEuc3RhdGUpKCgwLCByb2JvdDNfMS50cmFuc2l0aW9uKShcImF1dGhlbnRpY2F0ZWRcIiwgXCJjb25uZWN0aW5nXCIsICgwLCByb2JvdDNfMS5yZWR1Y2UpKHNldFRva2VuKSksICgwLCByb2JvdDNfMS50cmFuc2l0aW9uKShcInVuYXV0aG9yaXplZFwiLCBcImlkbGVcIiwgKDAsIHJvYm90M18xLnJlZHVjZSkoZXhwaXJlVG9rZW4pLCAoMCwgcm9ib3QzXzEucmVkdWNlKShjbG9zZUNvbm5lY3Rpb24pKSwgKDAsIHJvYm90M18xLnRyYW5zaXRpb24pKFwic2VuZFwiLCBcImF1dGhJblByb2dyZXNzXCIsICgwLCByb2JvdDNfMS5yZWR1Y2UpKGVucXVldWVNZXNzYWdlKSksICgwLCByb2JvdDNfMS50cmFuc2l0aW9uKShcImNsb3NlXCIsIFwiaWRsZVwiLCAoMCwgcm9ib3QzXzEucmVkdWNlKShjbG9zZUNvbm5lY3Rpb24pKSksXG4gICAgYWN0aXZlOiAoMCwgcm9ib3QzXzEuc3RhdGUpKCgwLCByb2JvdDNfMS50cmFuc2l0aW9uKShcInNlbmRcIiwgXCJhY3RpdmVcIiwgKDAsIHJvYm90M18xLnJlZHVjZSkoc2VuZE1lc3NhZ2UpKSwgKDAsIHJvYm90M18xLnRyYW5zaXRpb24pKFwidW5hdXRob3JpemVkXCIsIFwiaWRsZVwiLCAoMCwgcm9ib3QzXzEucmVkdWNlKShleHBpcmVUb2tlbikpLCAoMCwgcm9ib3QzXzEudHJhbnNpdGlvbikoXCJjb25uZWN0aW9uQ2xvc2VkXCIsIFwiaWRsZVwiLCAoMCwgcm9ib3QzXzEucmVkdWNlKShjbG9zZUNvbm5lY3Rpb24pKSwgKDAsIHJvYm90M18xLnRyYW5zaXRpb24pKFwiY2xvc2VcIiwgXCJpZGxlXCIsICgwLCByb2JvdDNfMS5yZWR1Y2UpKGNsb3NlQ29ubmVjdGlvbikpKSxcbiAgICBmYWlsZWQ6ICgwLCByb2JvdDNfMS5zdGF0ZSkoKDAsIHJvYm90M18xLnRyYW5zaXRpb24pKFwic2VuZFwiLCBcImZhaWxlZFwiKSwgKDAsIHJvYm90M18xLnRyYW5zaXRpb24pKFwiY2xvc2VcIiwgXCJpZGxlXCIsICgwLCByb2JvdDNfMS5yZWR1Y2UpKGNsb3NlQ29ubmVjdGlvbikpKSxcbn0sIGluaXRpYWxTdGF0ZSk7XG5mdW5jdGlvbiBidWlsZFJlYWx0aW1lVXJsKGFwcCwgeyB0b2tlbiwgbWF4QnVmZmVyaW5nIH0pIHtcbiAgICBpZiAobWF4QnVmZmVyaW5nICE9PSB1bmRlZmluZWQgJiYgKG1heEJ1ZmZlcmluZyA8IDEgfHwgbWF4QnVmZmVyaW5nID4gNjApKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBgbWF4QnVmZmVyaW5nYCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNjAgKGluY2x1c2l2ZSlcIik7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgIGZhbF9qd3RfdG9rZW46IHRva2VuLFxuICAgIH0pO1xuICAgIGlmIChtYXhCdWZmZXJpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBxdWVyeVBhcmFtcy5zZXQoXCJtYXhfYnVmZmVyaW5nXCIsIG1heEJ1ZmZlcmluZy50b0ZpeGVkKDApKTtcbiAgICB9XG4gICAgY29uc3QgYXBwSWQgPSAoMCwgdXRpbHNfMS5lbnN1cmVFbmRwb2ludElkRm9ybWF0KShhcHApO1xuICAgIHJldHVybiBgd3NzOi8vZmFsLnJ1bi8ke2FwcElkfS9yZWFsdGltZT8ke3F1ZXJ5UGFyYW1zLnRvU3RyaW5nKCl9YDtcbn1cbmNvbnN0IERFRkFVTFRfVEhST1RUTEVfSU5URVJWQUwgPSAxMjg7XG5mdW5jdGlvbiBpc1VuYXV0aG9yaXplZEVycm9yKG1lc3NhZ2UpIHtcbiAgICAvLyBUT0RPIHdlIG5lZWQgYmV0dGVyIHByb3RvY29sIGRlZmluaXRpb24gd2l0aCBlcnJvciBjb2Rlc1xuICAgIHJldHVybiBtZXNzYWdlW1wic3RhdHVzXCJdID09PSBcImVycm9yXCIgJiYgbWVzc2FnZVtcImVycm9yXCJdID09PSBcIlVuYXV0aG9yaXplZFwiO1xufVxuLyoqXG4gKiBTZWUgaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzY0NTUuaHRtbCNzZWN0aW9uLTcuNC4xXG4gKi9cbmNvbnN0IFdlYlNvY2tldEVycm9yQ29kZXMgPSB7XG4gICAgTk9STUFMX0NMT1NVUkU6IDEwMDAsXG4gICAgR09JTkdfQVdBWTogMTAwMSxcbn07XG5jb25zdCBjb25uZWN0aW9uQ2FjaGUgPSBuZXcgTWFwKCk7XG5jb25zdCBjb25uZWN0aW9uQ2FsbGJhY2tzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gcmV1c2VJbnRlcnByZXRlcihrZXksIHRocm90dGxlSW50ZXJ2YWwsIG9uQ2hhbmdlKSB7XG4gICAgaWYgKCFjb25uZWN0aW9uQ2FjaGUuaGFzKGtleSkpIHtcbiAgICAgICAgY29uc3QgbWFjaGluZSA9ICgwLCByb2JvdDNfMS5pbnRlcnByZXQpKGNvbm5lY3Rpb25TdGF0ZU1hY2hpbmUsIG9uQ2hhbmdlKTtcbiAgICAgICAgY29ubmVjdGlvbkNhY2hlLnNldChrZXksIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbWFjaGluZSksIHsgdGhyb3R0bGVkU2VuZDogdGhyb3R0bGVJbnRlcnZhbCA+IDBcbiAgICAgICAgICAgICAgICA/ICgwLCB1dGlsc18xLnRocm90dGxlKShtYWNoaW5lLnNlbmQsIHRocm90dGxlSW50ZXJ2YWwsIHRydWUpXG4gICAgICAgICAgICAgICAgOiBtYWNoaW5lLnNlbmQgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gY29ubmVjdGlvbkNhY2hlLmdldChrZXkpO1xufVxuY29uc3Qgbm9vcCA9ICgpID0+IHtcbiAgICAvKiBOby1vcCAqL1xufTtcbi8qKlxuICogQSBuby1vcCBjb25uZWN0aW9uIHRoYXQgZG9lcyBub3Qgc2VuZCBhbnkgbWVzc2FnZS5cbiAqIFVzZWZ1bCBvbiB0aGUgZnJhbWV3b3JrcyB0aGF0IHJldXNlIGNvZGUgZm9yIGJvdGggc3NyIGFuZCBjc3IgKGUuZy4gTmV4dClcbiAqIHNvIHRoZSBjYWxsIHdoZW4gZG9pbmcgc3NyIGhhcyBubyBzaWRlLWVmZmVjdHMuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5jb25zdCBOb09wQ29ubmVjdGlvbiA9IHtcbiAgICBzZW5kOiBub29wLFxuICAgIGNsb3NlOiBub29wLFxufTtcbmZ1bmN0aW9uIGlzU3VjY2Vzc2Z1bFJlc3VsdChkYXRhKSB7XG4gICAgcmV0dXJuIChkYXRhLnN0YXR1cyAhPT0gXCJlcnJvclwiICYmXG4gICAgICAgIGRhdGEudHlwZSAhPT0gXCJ4LWZhbC1tZXNzYWdlXCIgJiZcbiAgICAgICAgIWlzRmFsRXJyb3JSZXN1bHQoZGF0YSkpO1xufVxuZnVuY3Rpb24gaXNGYWxFcnJvclJlc3VsdChkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGEudHlwZSA9PT0gXCJ4LWZhbC1lcnJvclwiO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVhbHRpbWVDbGllbnQoeyBjb25maWcsIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25uZWN0KGFwcCwgaGFuZGxlcikge1xuICAgICAgICAgICAgY29uc3QgeyBcbiAgICAgICAgICAgIC8vIGlmIHJ1bm5pbmcgb24gUmVhY3QgaW4gdGhlIHNlcnZlciwgc2V0IGNsaWVudE9ubHkgdG8gdHJ1ZSBieSBkZWZhdWx0XG4gICAgICAgICAgICBjbGllbnRPbmx5ID0gKDAsIHV0aWxzXzEuaXNSZWFjdCkoKSAmJiAhKDAsIHJ1bnRpbWVfMS5pc0Jyb3dzZXIpKCksIGNvbm5lY3Rpb25LZXkgPSBjcnlwdG8ucmFuZG9tVVVJRCgpLCBtYXhCdWZmZXJpbmcsIHRocm90dGxlSW50ZXJ2YWwgPSBERUZBVUxUX1RIUk9UVExFX0lOVEVSVkFMLCB9ID0gaGFuZGxlcjtcbiAgICAgICAgICAgIGlmIChjbGllbnRPbmx5ICYmICEoMCwgcnVudGltZV8xLmlzQnJvd3NlcikoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBOb09wQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwcmV2aW91c1N0YXRlO1xuICAgICAgICAgICAgLy8gQWx0aG91Z2ggdGhlIHN0YXRlIG1hY2hpbmUgaXMgY2FjaGVkIHNvIHdlIGRvbid0IG9wZW4gbXVsdGlwbGUgY29ubmVjdGlvbnMsXG4gICAgICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHRvIHVwZGF0ZSB0aGUgY2FsbGJhY2tzIHNvIHdlIGNhbiBjYWxsIHRoZSBjb3JyZWN0IHJlZmVyZW5jZXNcbiAgICAgICAgICAgIC8vIHdoZW4gdGhlIHN0YXRlIG1hY2hpbmUgaXMgcmV1c2VkLiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHRoZSBjYWxsYmFja3NcbiAgICAgICAgICAgIC8vIGFyZSBwYXNzZWQgYXMgcGFydCBvZiB0aGUgaGFuZGxlciBvYmplY3QsIHdoaWNoIGNhbiBiZSBkaWZmZXJlbnQgYWNyb3NzXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnQgY2FsbHMgdG8gYGNvbm5lY3RgLlxuICAgICAgICAgICAgY29ubmVjdGlvbkNhbGxiYWNrcy5zZXQoY29ubmVjdGlvbktleSwge1xuICAgICAgICAgICAgICAgIG9uRXJyb3I6IGhhbmRsZXIub25FcnJvcixcbiAgICAgICAgICAgICAgICBvblJlc3VsdDogaGFuZGxlci5vblJlc3VsdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZ2V0Q2FsbGJhY2tzID0gKCkgPT4gY29ubmVjdGlvbkNhbGxiYWNrcy5nZXQoY29ubmVjdGlvbktleSk7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZU1hY2hpbmUgPSByZXVzZUludGVycHJldGVyKGNvbm5lY3Rpb25LZXksIHRocm90dGxlSW50ZXJ2YWwsICh7IGNvbnRleHQsIG1hY2hpbmUsIHNlbmQgfSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZW5xdWV1ZWRNZXNzYWdlLCB0b2tlbiB9ID0gY29udGV4dDtcbiAgICAgICAgICAgICAgICBpZiAobWFjaGluZS5jdXJyZW50ID09PSBcImFjdGl2ZVwiICYmIGVucXVldWVkTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJzZW5kXCIsIG1lc3NhZ2U6IGVucXVldWVkTWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1hY2hpbmUuY3VycmVudCA9PT0gXCJhdXRoUmVxdWlyZWRcIiAmJlxuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzU3RhdGUgIT09IG1hY2hpbmUuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJpbml0aWF0ZUF1dGhcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGF1dGhfMS5nZXRUZW1wb3JhcnlBdXRoVG9rZW4pKGFwcCwgY29uZmlnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHRva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJhdXRoZW50aWNhdGVkXCIsIHRva2VuIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5FeHBpcmF0aW9uVGltZW91dCA9IE1hdGgucm91bmQoYXV0aF8xLlRPS0VOX0VYUElSQVRJT05fU0VDT05EUyAqIDAuOSAqIDEwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCh7IHR5cGU6IFwiZXhwaXJlVG9rZW5cIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRva2VuRXhwaXJhdGlvblRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCh7IHR5cGU6IFwidW5hdXRob3JpemVkXCIsIGVycm9yIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1hY2hpbmUuY3VycmVudCA9PT0gXCJjb25uZWN0aW5nXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNTdGF0ZSAhPT0gbWFjaGluZS5jdXJyZW50ICYmXG4gICAgICAgICAgICAgICAgICAgIHRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KGJ1aWxkUmVhbHRpbWVVcmwoYXBwLCB7IHRva2VuLCBtYXhCdWZmZXJpbmcgfSkpO1xuICAgICAgICAgICAgICAgICAgICB3cy5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJjb25uZWN0ZWRcIiwgd2Vic29ja2V0OiB3cyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgd3Mub25jbG9zZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgIT09IFdlYlNvY2tldEVycm9yQ29kZXMuTk9STUFMX0NMT1NVUkUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9uRXJyb3IgPSBub29wIH0gPSBnZXRDYWxsYmFja3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yKG5ldyByZXNwb25zZV8xLkFwaUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEVycm9yIGNsb3NpbmcgdGhlIGNvbm5lY3Rpb246ICR7ZXZlbnQucmVhc29ufWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogZXZlbnQuY29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJjb25uZWN0aW9uQ2xvc2VkXCIsIGNvZGU6IGV2ZW50LmNvZGUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHdzLm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gc3BlY2lmeSBlcnJvciBwcm90b2NvbCBmb3IgaWRlbnRpZmllZCBlcnJvcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgb25FcnJvciA9IG5vb3AgfSA9IGdldENhbGxiYWNrcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcihuZXcgcmVzcG9uc2VfMS5BcGlFcnJvcih7IG1lc3NhZ2U6IFwiVW5rbm93biBlcnJvclwiLCBzdGF0dXM6IDUwMCB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHdzLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvblJlc3VsdCB9ID0gZ2V0Q2FsbGJhY2tzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgYmluYXJ5IG1lc3NhZ2VzIGFzIG1zZ3BhY2sgbWVzc2FnZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoMCwgbXNncGFja18xLmRlY29kZSkobmV3IFVpbnQ4QXJyYXkoZXZlbnQuZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gKDAsIG1zZ3BhY2tfMS5kZWNvZGUpKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5hcnJheUJ1ZmZlcigpLnRoZW4oKGJ1ZmZlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAoMCwgbXNncGFja18xLmRlY29kZSkobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVzdWx0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGhhbmRsZSBzdHJpbmdzIGFzIHBsYWluIEpTT04gbWVzc2FnZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJvcCBtZXNzYWdlcyB0aGF0IGFyZSBub3QgcmVsYXRlZCB0byB0aGUgYWN0dWFsIHJlc3VsdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIHRoZSBmdXR1cmUsIHdlIG1pZ2h0IHdhbnQgdG8gaGFuZGxlIG90aGVyIHR5cGVzIG9mIG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogc3BlY2lmeSB0aGUgZmFsIHdzIHByb3RvY29sIGZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVW5hdXRob3JpemVkRXJyb3IoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ1bmF1dGhvcml6ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihcIlVuYXV0aG9yaXplZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdWNjZXNzZnVsUmVzdWx0KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXN1bHQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmFsRXJyb3JSZXN1bHQoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PT0gXCJUSU1FT1VUXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGltZW91dCBlcnJvciBtZXNzYWdlcyBqdXN0IGluZGljYXRlIHRoYXQgdGhlIGNvbm5lY3Rpb24gaGFzbid0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY2VpdmVkIGFuIGluY29taW5nIG1lc3NhZ2UgZm9yIGEgd2hpbGUuIFdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZW0gYXMgZXJyb3JzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgb25FcnJvciA9IG5vb3AgfSA9IGdldENhbGxiYWNrcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IobmV3IHJlc3BvbnNlXzEuQXBpRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgJHtkYXRhLmVycm9yfTogJHtkYXRhLnJlYXNvbn1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGJldHRlciBlcnJvciBzdGF0dXMgY29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmV2aW91c1N0YXRlID0gbWFjaGluZS5jdXJyZW50O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBzZW5kID0gKGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIHRocm90dGxlZCBzZW5kIHRvIGF2b2lkIHNlbmRpbmcgdG9vIG1hbnkgbWVzc2FnZXNcbiAgICAgICAgICAgICAgICBzdGF0ZU1hY2hpbmUudGhyb3R0bGVkU2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2VuZFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBpbnB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZU1hY2hpbmUuc2VuZCh7IHR5cGU6IFwiY2xvc2VcIiB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNlbmQsXG4gICAgICAgICAgICAgICAgY2xvc2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJjcmVhdGVSZWFsdGltZUNsaWVudCIsIm1zZ3BhY2tfMSIsInJlcXVpcmUiLCJyb2JvdDNfMSIsImF1dGhfMSIsInJlc3BvbnNlXzEiLCJydW50aW1lXzEiLCJ1dGlsc18xIiwiaW5pdGlhbFN0YXRlIiwiZW5xdWV1ZWRNZXNzYWdlIiwidW5kZWZpbmVkIiwiaGFzVG9rZW4iLCJjb250ZXh0IiwidG9rZW4iLCJub1Rva2VuIiwiZW5xdWV1ZU1lc3NhZ2UiLCJldmVudCIsImFzc2lnbiIsIm1lc3NhZ2UiLCJjbG9zZUNvbm5lY3Rpb24iLCJ3ZWJzb2NrZXQiLCJyZWFkeVN0YXRlIiwiV2ViU29ja2V0IiwiT1BFTiIsImNsb3NlIiwic2VuZE1lc3NhZ2UiLCJVaW50OEFycmF5Iiwic2VuZCIsImVuY29kZSIsImV4cGlyZVRva2VuIiwic2V0VG9rZW4iLCJjb25uZWN0aW9uRXN0YWJsaXNoZWQiLCJjb25uZWN0aW9uU3RhdGVNYWNoaW5lIiwiY3JlYXRlTWFjaGluZSIsImlkbGUiLCJzdGF0ZSIsInRyYW5zaXRpb24iLCJyZWR1Y2UiLCJjb25uZWN0aW5nIiwiaW1tZWRpYXRlIiwiZ3VhcmQiLCJhdXRoUmVxdWlyZWQiLCJhdXRoSW5Qcm9ncmVzcyIsImFjdGl2ZSIsImZhaWxlZCIsImJ1aWxkUmVhbHRpbWVVcmwiLCJhcHAiLCJtYXhCdWZmZXJpbmciLCJFcnJvciIsInF1ZXJ5UGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiZmFsX2p3dF90b2tlbiIsInNldCIsInRvRml4ZWQiLCJhcHBJZCIsImVuc3VyZUVuZHBvaW50SWRGb3JtYXQiLCJ0b1N0cmluZyIsIkRFRkFVTFRfVEhST1RUTEVfSU5URVJWQUwiLCJpc1VuYXV0aG9yaXplZEVycm9yIiwiV2ViU29ja2V0RXJyb3JDb2RlcyIsIk5PUk1BTF9DTE9TVVJFIiwiR09JTkdfQVdBWSIsImNvbm5lY3Rpb25DYWNoZSIsIk1hcCIsImNvbm5lY3Rpb25DYWxsYmFja3MiLCJyZXVzZUludGVycHJldGVyIiwia2V5IiwidGhyb3R0bGVJbnRlcnZhbCIsIm9uQ2hhbmdlIiwiaGFzIiwibWFjaGluZSIsImludGVycHJldCIsInRocm90dGxlZFNlbmQiLCJ0aHJvdHRsZSIsImdldCIsIm5vb3AiLCJOb09wQ29ubmVjdGlvbiIsImlzU3VjY2Vzc2Z1bFJlc3VsdCIsImRhdGEiLCJzdGF0dXMiLCJ0eXBlIiwiaXNGYWxFcnJvclJlc3VsdCIsImNvbmZpZyIsImNvbm5lY3QiLCJoYW5kbGVyIiwiY2xpZW50T25seSIsImlzUmVhY3QiLCJpc0Jyb3dzZXIiLCJjb25uZWN0aW9uS2V5IiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsInByZXZpb3VzU3RhdGUiLCJvbkVycm9yIiwib25SZXN1bHQiLCJnZXRDYWxsYmFja3MiLCJzdGF0ZU1hY2hpbmUiLCJjdXJyZW50IiwiZ2V0VGVtcG9yYXJ5QXV0aFRva2VuIiwidGhlbiIsInRva2VuRXhwaXJhdGlvblRpbWVvdXQiLCJNYXRoIiwicm91bmQiLCJUT0tFTl9FWFBJUkFUSU9OX1NFQ09ORFMiLCJzZXRUaW1lb3V0IiwiY2F0Y2giLCJlcnJvciIsIndzIiwib25vcGVuIiwib25jbG9zZSIsImNvZGUiLCJBcGlFcnJvciIsInJlYXNvbiIsIm9uZXJyb3IiLCJvbm1lc3NhZ2UiLCJBcnJheUJ1ZmZlciIsInJlc3VsdCIsImRlY29kZSIsIkJsb2IiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsIkpTT04iLCJwYXJzZSIsImJvZHkiLCJpbnB1dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/realtime.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/request.js":
/*!****************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/request.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = this && this.__rest || function(s, e) {\n    var t = {};\n    for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for(var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++){\n        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.dispatchRequest = dispatchRequest;\nexports.buildUrl = buildUrl;\nconst runtime_1 = __webpack_require__(/*! ./runtime */ \"(rsc)/./node_modules/@fal-ai/client/src/runtime.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/@fal-ai/client/src/utils.js\");\nconst isCloudflareWorkers = typeof navigator !== \"undefined\" && (navigator === null || navigator === void 0 ? void 0 : navigator.userAgent) === \"Cloudflare-Workers\";\nfunction dispatchRequest(params) {\n    return __awaiter(this, void 0, void 0, function*() {\n        var _a, _b, _c;\n        const { targetUrl, input, config, options = {} } = params;\n        const { credentials: credentialsValue, requestMiddleware, responseHandler, fetch } = config;\n        const userAgent = (0, runtime_1.isBrowser)() ? {} : {\n            \"User-Agent\": (0, runtime_1.getUserAgent)()\n        };\n        const credentials = typeof credentialsValue === \"function\" ? credentialsValue() : credentialsValue;\n        const { method, url, headers } = yield requestMiddleware({\n            method: ((_b = (_a = params.method) !== null && _a !== void 0 ? _a : options.method) !== null && _b !== void 0 ? _b : \"post\").toUpperCase(),\n            url: targetUrl,\n            headers: params.headers\n        });\n        const authHeader = credentials ? {\n            Authorization: `Key ${credentials}`\n        } : {};\n        const requestHeaders = Object.assign(Object.assign(Object.assign(Object.assign({}, authHeader), {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\"\n        }), userAgent), headers !== null && headers !== void 0 ? headers : {});\n        const { responseHandler: customResponseHandler } = options, requestInit = __rest(options, [\n            \"responseHandler\"\n        ]);\n        const response = yield fetch(url, Object.assign(Object.assign(Object.assign(Object.assign({}, requestInit), {\n            method,\n            headers: Object.assign(Object.assign({}, requestHeaders), (_c = requestInit.headers) !== null && _c !== void 0 ? _c : {})\n        }), !isCloudflareWorkers && {\n            mode: \"cors\"\n        }), {\n            signal: options.signal,\n            body: method.toLowerCase() !== \"get\" && input ? JSON.stringify(input) : undefined\n        }));\n        const handleResponse = customResponseHandler !== null && customResponseHandler !== void 0 ? customResponseHandler : responseHandler;\n        return yield handleResponse(response);\n    });\n}\n/**\n * Builds the final url to run the function based on its `id` or alias and\n * a the options from `RunOptions<Input>`.\n *\n * @private\n * @param id the function id or alias\n * @param options the run options\n * @returns the final url to run the function\n */ function buildUrl(id, options = {}) {\n    var _a, _b;\n    const method = ((_a = options.method) !== null && _a !== void 0 ? _a : \"post\").toLowerCase();\n    const path = ((_b = options.path) !== null && _b !== void 0 ? _b : \"\").replace(/^\\//, \"\").replace(/\\/{2,}/, \"/\");\n    const input = options.input;\n    const params = Object.assign(Object.assign({}, options.query || {}), method === \"get\" ? input : {});\n    const queryParams = Object.keys(params).length > 0 ? `?${new URLSearchParams(params).toString()}` : \"\";\n    // if a fal url is passed, just use it\n    if ((0, utils_1.isValidUrl)(id)) {\n        const url = id.endsWith(\"/\") ? id : `${id}/`;\n        return `${url}${path}${queryParams}`;\n    }\n    const appId = (0, utils_1.ensureEndpointIdFormat)(id);\n    const subdomain = options.subdomain ? `${options.subdomain}.` : \"\";\n    const url = `https://${subdomain}fal.run/${appId}/${path}`;\n    return `${url.replace(/\\/$/, \"\")}${queryParams}`;\n} //# sourceMappingURL=request.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3JlcXVlc3QuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxZQUFZLElBQUssSUFBSSxJQUFJLENBQUNBLFNBQVMsSUFBSyxTQUFVQyxPQUFPLEVBQUVDLFVBQVUsRUFBRUMsQ0FBQyxFQUFFQyxTQUFTO0lBQ25GLFNBQVNDLE1BQU1DLEtBQUs7UUFBSSxPQUFPQSxpQkFBaUJILElBQUlHLFFBQVEsSUFBSUgsRUFBRSxTQUFVSSxPQUFPO1lBQUlBLFFBQVFEO1FBQVE7SUFBSTtJQUMzRyxPQUFPLElBQUtILENBQUFBLEtBQU1BLENBQUFBLElBQUlLLE9BQU0sQ0FBQyxFQUFHLFNBQVVELE9BQU8sRUFBRUUsTUFBTTtRQUNyRCxTQUFTQyxVQUFVSixLQUFLO1lBQUksSUFBSTtnQkFBRUssS0FBS1AsVUFBVVEsSUFBSSxDQUFDTjtZQUFTLEVBQUUsT0FBT08sR0FBRztnQkFBRUosT0FBT0k7WUFBSTtRQUFFO1FBQzFGLFNBQVNDLFNBQVNSLEtBQUs7WUFBSSxJQUFJO2dCQUFFSyxLQUFLUCxTQUFTLENBQUMsUUFBUSxDQUFDRTtZQUFTLEVBQUUsT0FBT08sR0FBRztnQkFBRUosT0FBT0k7WUFBSTtRQUFFO1FBQzdGLFNBQVNGLEtBQUtJLE1BQU07WUFBSUEsT0FBT0MsSUFBSSxHQUFHVCxRQUFRUSxPQUFPVCxLQUFLLElBQUlELE1BQU1VLE9BQU9ULEtBQUssRUFBRVcsSUFBSSxDQUFDUCxXQUFXSTtRQUFXO1FBQzdHSCxLQUFLLENBQUNQLFlBQVlBLFVBQVVjLEtBQUssQ0FBQ2pCLFNBQVNDLGNBQWMsRUFBRSxHQUFHVSxJQUFJO0lBQ3RFO0FBQ0o7QUFDQSxJQUFJTyxTQUFTLElBQUssSUFBSSxJQUFJLENBQUNBLE1BQU0sSUFBSyxTQUFVQyxDQUFDLEVBQUVQLENBQUM7SUFDaEQsSUFBSVEsSUFBSSxDQUFDO0lBQ1QsSUFBSyxJQUFJQyxLQUFLRixFQUFHLElBQUlHLE9BQU9DLFNB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QUMzQyxDQUFDLENBQUMsRUFBRSxJQUFJcUQsZ0JBQWdCekMsUUFBUTBDLFFBQVEsR0FBRyxDQUFDLEdBQzVDO0lBQ04sc0NBQXNDO0lBQ3RDLElBQUksQ0FBQyxHQUFHOUMsUUFBUStDLFVBQVUsRUFBRVIsS0FBSztRQUM3QixNQUFNbkIsTUFBTW1CLEdBQUdTLFFBQVEsQ0FBQyxPQUFPVCxLQUFLLENBQUMsRUFBRUEsR0FBRyxDQUFDLENBQUM7UUFDNUMsT0FBTyxDQUFDLEVBQUVuQixJQUFJLEVBQUVvQixLQUFLLEVBQUVHLFlBQVksQ0FBQztJQUN4QztJQUNBLE1BQU1NLFFBQVEsQ0FBQyxHQUFHakQsUUFBUWtELHNCQUFzQixFQUFFWDtJQUNsRCxNQUFNWSxZQUFZeEMsUUFBUXdDLFNBQVMsR0FBRyxDQUFDLEVBQUV4QyxRQUFRd0MsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHO0lBQ2hFLE1BQU0vQixNQUFNLENBQUMsUUFBUSxFQUFFK0IsVUFBVSxRQUFRLEVBQUVGLE1BQU0sQ0FBQyxFQUFFVCxLQUFLLENBQUM7SUFDMUQsT0FBTyxDQUFDLEVBQUVwQixJQUFJcUIsT0FBTyxDQUFDLE9BQU8sSUFBSSxFQUFFRSxZQUFZLENBQUM7QUFDcEQsRUFDQSxtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tZW51LWdlbmVyYXRvci8uL25vZGVfbW9kdWxlcy9AZmFsLWFpL2NsaWVudC9zcmMvcmVxdWVzdC5qcz84OGMwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRpc3BhdGNoUmVxdWVzdCA9IGRpc3BhdGNoUmVxdWVzdDtcbmV4cG9ydHMuYnVpbGRVcmwgPSBidWlsZFVybDtcbmNvbnN0IHJ1bnRpbWVfMSA9IHJlcXVpcmUoXCIuL3J1bnRpbWVcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5jb25zdCBpc0Nsb3VkZmxhcmVXb3JrZXJzID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIChuYXZpZ2F0b3IgPT09IG51bGwgfHwgbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXZpZ2F0b3IudXNlckFnZW50KSA9PT0gXCJDbG91ZGZsYXJlLVdvcmtlcnNcIjtcbmZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChwYXJhbXMpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgeyB0YXJnZXRVcmwsIGlucHV0LCBjb25maWcsIG9wdGlvbnMgPSB7fSB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCB7IGNyZWRlbnRpYWxzOiBjcmVkZW50aWFsc1ZhbHVlLCByZXF1ZXN0TWlkZGxld2FyZSwgcmVzcG9uc2VIYW5kbGVyLCBmZXRjaCwgfSA9IGNvbmZpZztcbiAgICAgICAgY29uc3QgdXNlckFnZW50ID0gKDAsIHJ1bnRpbWVfMS5pc0Jyb3dzZXIpKCkgPyB7fSA6IHsgXCJVc2VyLUFnZW50XCI6ICgwLCBydW50aW1lXzEuZ2V0VXNlckFnZW50KSgpIH07XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gdHlwZW9mIGNyZWRlbnRpYWxzVmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBjcmVkZW50aWFsc1ZhbHVlKClcbiAgICAgICAgICAgIDogY3JlZGVudGlhbHNWYWx1ZTtcbiAgICAgICAgY29uc3QgeyBtZXRob2QsIHVybCwgaGVhZGVycyB9ID0geWllbGQgcmVxdWVzdE1pZGRsZXdhcmUoe1xuICAgICAgICAgICAgbWV0aG9kOiAoKF9iID0gKF9hID0gcGFyYW1zLm1ldGhvZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogb3B0aW9ucy5tZXRob2QpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwicG9zdFwiKS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgICAgdXJsOiB0YXJnZXRVcmwsXG4gICAgICAgICAgICBoZWFkZXJzOiBwYXJhbXMuaGVhZGVycyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGF1dGhIZWFkZXIgPSBjcmVkZW50aWFscyA/IHsgQXV0aG9yaXphdGlvbjogYEtleSAke2NyZWRlbnRpYWxzfWAgfSA6IHt9O1xuICAgICAgICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGF1dGhIZWFkZXIpLCB7IEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0pLCB1c2VyQWdlbnQpLCAoaGVhZGVycyAhPT0gbnVsbCAmJiBoZWFkZXJzICE9PSB2b2lkIDAgPyBoZWFkZXJzIDoge30pKTtcbiAgICAgICAgY29uc3QgeyByZXNwb25zZUhhbmRsZXI6IGN1c3RvbVJlc3BvbnNlSGFuZGxlciB9ID0gb3B0aW9ucywgcmVxdWVzdEluaXQgPSBfX3Jlc3Qob3B0aW9ucywgW1wicmVzcG9uc2VIYW5kbGVyXCJdKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBmZXRjaCh1cmwsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3RJbml0KSwgeyBtZXRob2QsIGhlYWRlcnM6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdEhlYWRlcnMpLCAoKF9jID0gcmVxdWVzdEluaXQuaGVhZGVycykgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDoge30pKSB9KSwgKCFpc0Nsb3VkZmxhcmVXb3JrZXJzICYmIHsgbW9kZTogXCJjb3JzXCIgfSkpLCB7IHNpZ25hbDogb3B0aW9ucy5zaWduYWwsIGJvZHk6IG1ldGhvZC50b0xvd2VyQ2FzZSgpICE9PSBcImdldFwiICYmIGlucHV0XG4gICAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShpbnB1dClcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCB9KSk7XG4gICAgICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gY3VzdG9tUmVzcG9uc2VIYW5kbGVyICE9PSBudWxsICYmIGN1c3RvbVJlc3BvbnNlSGFuZGxlciAhPT0gdm9pZCAwID8gY3VzdG9tUmVzcG9uc2VIYW5kbGVyIDogcmVzcG9uc2VIYW5kbGVyO1xuICAgICAgICByZXR1cm4geWllbGQgaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBCdWlsZHMgdGhlIGZpbmFsIHVybCB0byBydW4gdGhlIGZ1bmN0aW9uIGJhc2VkIG9uIGl0cyBgaWRgIG9yIGFsaWFzIGFuZFxuICogYSB0aGUgb3B0aW9ucyBmcm9tIGBSdW5PcHRpb25zPElucHV0PmAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSBpZCB0aGUgZnVuY3Rpb24gaWQgb3IgYWxpYXNcbiAqIEBwYXJhbSBvcHRpb25zIHRoZSBydW4gb3B0aW9uc1xuICogQHJldHVybnMgdGhlIGZpbmFsIHVybCB0byBydW4gdGhlIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkVXJsKGlkLCBvcHRpb25zID0ge30pIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG1ldGhvZCA9ICgoX2EgPSBvcHRpb25zLm1ldGhvZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJwb3N0XCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgcGF0aCA9ICgoX2IgPSBvcHRpb25zLnBhdGgpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCIpLnJlcGxhY2UoL15cXC8vLCBcIlwiKS5yZXBsYWNlKC9cXC97Mix9LywgXCIvXCIpO1xuICAgIGNvbnN0IGlucHV0ID0gb3B0aW9ucy5pbnB1dDtcbiAgICBjb25zdCBwYXJhbXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIChvcHRpb25zLnF1ZXJ5IHx8IHt9KSksIChtZXRob2QgPT09IFwiZ2V0XCIgPyBpbnB1dCA6IHt9KSk7XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA+IDBcbiAgICAgICAgPyBgPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpLnRvU3RyaW5nKCl9YFxuICAgICAgICA6IFwiXCI7XG4gICAgLy8gaWYgYSBmYWwgdXJsIGlzIHBhc3NlZCwganVzdCB1c2UgaXRcbiAgICBpZiAoKDAsIHV0aWxzXzEuaXNWYWxpZFVybCkoaWQpKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGlkLmVuZHNXaXRoKFwiL1wiKSA/IGlkIDogYCR7aWR9L2A7XG4gICAgICAgIHJldHVybiBgJHt1cmx9JHtwYXRofSR7cXVlcnlQYXJhbXN9YDtcbiAgICB9XG4gICAgY29uc3QgYXBwSWQgPSAoMCwgdXRpbHNfMS5lbnN1cmVFbmRwb2ludElkRm9ybWF0KShpZCk7XG4gICAgY29uc3Qgc3ViZG9tYWluID0gb3B0aW9ucy5zdWJkb21haW4gPyBgJHtvcHRpb25zLnN1YmRvbWFpbn0uYCA6IFwiXCI7XG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtzdWJkb21haW59ZmFsLnJ1bi8ke2FwcElkfS8ke3BhdGh9YDtcbiAgICByZXR1cm4gYCR7dXJsLnJlcGxhY2UoL1xcLyQvLCBcIlwiKX0ke3F1ZXJ5UGFyYW1zfWA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXF1ZXN0LmpzLm1hcCJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJhZG9wdCIsInZhbHVlIiwicmVzb2x2ZSIsIlByb21pc2UiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX3Jlc3QiLCJzIiwidCIsInAiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbmRleE9mIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiaSIsImxlbmd0aCIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiZGlzcGF0Y2hSZXF1ZXN0IiwiYnVpbGRVcmwiLCJydW50aW1lXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsImlzQ2xvdWRmbGFyZVdvcmtlcnMiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJwYXJhbXMiLCJfYSIsIl9iIiwiX2MiLCJ0YXJnZXRVcmwiLCJpbnB1dCIsImNvbmZpZyIsIm9wdGlvbnMiLCJjcmVkZW50aWFscyIsImNyZWRlbnRpYWxzVmFsdWUiLCJyZXF1ZXN0TWlkZGxld2FyZSIsInJlc3BvbnNlSGFuZGxlciIsImZldGNoIiwiaXNCcm93c2VyIiwiZ2V0VXNlckFnZW50IiwibWV0aG9kIiwidXJsIiwiaGVhZGVycyIsInRvVXBwZXJDYXNlIiwiYXV0aEhlYWRlciIsIkF1dGhvcml6YXRpb24iLCJyZXF1ZXN0SGVhZGVycyIsImFzc2lnbiIsIkFjY2VwdCIsImN1c3RvbVJlc3BvbnNlSGFuZGxlciIsInJlcXVlc3RJbml0IiwicmVzcG9uc2UiLCJtb2RlIiwic2lnbmFsIiwiYm9keSIsInRvTG93ZXJDYXNlIiwiSlNPTiIsInN0cmluZ2lmeSIsInVuZGVmaW5lZCIsImhhbmRsZVJlc3BvbnNlIiwiaWQiLCJwYXRoIiwicmVwbGFjZSIsInF1ZXJ5IiwicXVlcnlQYXJhbXMiLCJrZXlzIiwiVVJMU2VhcmNoUGFyYW1zIiwidG9TdHJpbmciLCJpc1ZhbGlkVXJsIiwiZW5kc1dpdGgiLCJhcHBJZCIsImVuc3VyZUVuZHBvaW50SWRGb3JtYXQiLCJzdWJkb21haW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/request.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/response.js":
/*!*****************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/response.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\nvar __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ValidationError = exports.ApiError = void 0;\nexports.defaultResponseHandler = defaultResponseHandler;\nexports.resultResponseHandler = resultResponseHandler;\nconst REQUEST_ID_HEADER = \"x-fal-request-id\";\nclass ApiError extends Error {\n    constructor({ message, status, body }){\n        super(message);\n        this.name = \"ApiError\";\n        this.status = status;\n        this.body = body;\n    }\n}\nexports.ApiError = ApiError;\nclass ValidationError extends ApiError {\n    constructor(args){\n        super(args);\n        this.name = \"ValidationError\";\n    }\n    get fieldErrors() {\n        // NOTE: this is a hack to support both FastAPI/Pydantic errors\n        // and some custom 422 errors that might not be in the Pydantic format.\n        if (typeof this.body.detail === \"string\") {\n            return [\n                {\n                    loc: [\n                        \"body\"\n                    ],\n                    msg: this.body.detail,\n                    type: \"value_error\"\n                }\n            ];\n        }\n        return this.body.detail || [];\n    }\n    getFieldErrors(field) {\n        return this.fieldErrors.filter((error)=>error.loc[error.loc.length - 1] === field);\n    }\n}\nexports.ValidationError = ValidationError;\nfunction defaultResponseHandler(response) {\n    return __awaiter(this, void 0, void 0, function*() {\n        var _a;\n        const { status, statusText } = response;\n        const contentType = (_a = response.headers.get(\"Content-Type\")) !== null && _a !== void 0 ? _a : \"\";\n        if (!response.ok) {\n            if (contentType.includes(\"application/json\")) {\n                const body = yield response.json();\n                const ErrorType = status === 422 ? ValidationError : ApiError;\n                throw new ErrorType({\n                    message: body.message || statusText,\n                    status,\n                    body\n                });\n            }\n            throw new ApiError({\n                message: `HTTP ${status}: ${statusText}`,\n                status\n            });\n        }\n        if (contentType.includes(\"application/json\")) {\n            return response.json();\n        }\n        if (contentType.includes(\"text/html\")) {\n            return response.text();\n        }\n        if (contentType.includes(\"application/octet-stream\")) {\n            return response.arrayBuffer();\n        }\n        // TODO convert to either number or bool automatically\n        return response.text();\n    });\n}\nfunction resultResponseHandler(response) {\n    return __awaiter(this, void 0, void 0, function*() {\n        const data = yield defaultResponseHandler(response);\n        return {\n            data,\n            requestId: response.headers.get(REQUEST_ID_HEADER) || \"\"\n        };\n    });\n} //# sourceMappingURL=response.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3Jlc3BvbnNlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsSUFBSUEsWUFBWSxJQUFLLElBQUksSUFBSSxDQUFDQSxTQUFTLElBQUssU0FBVUMsT0FBTyxFQUFFQyxVQUFVLEVBQUVDLENBQUMsRUFBRUMsU0FBUztJQUNuRixTQUFTQyxNQUFNQyxLQUFLO1FBQUksT0FBT0EsaUJBQWlCSCxJQUFJRyxRQUFRLElBQUlILEVBQUUsU0FBVUksT0FBTztZQUFJQSxRQUFRRDtRQUFRO0lBQUk7SUFDM0csT0FBTyxJQUFLSCxDQUFBQSxLQUFNQSxDQUFBQSxJQUFJSyxPQUFNLENBQUMsRUFBRyxTQUFVRCxPQUFPLEVBQUVFLE1BQU07UUFDckQsU0FBU0MsVUFBVUosS0FBSztZQUFJLElBQUk7Z0JBQUVLLEtBQUtQLFVBQVVRLElBQUksQ0FBQ047WUFBUyxFQUFFLE9BQU9PLEdBQUc7Z0JBQUVKLE9BQU9JO1lBQUk7UUFBRTtRQUMxRixTQUFTQyxTQUFTUixLQUFLO1lBQUksSUFBSTtnQkFBRUssS0FBS1AsU0FBUyxDQUFDLFFBQVEsQ0FBQ0U7WUFBUyxFQUFFLE9BQU9PLEdBQUc7Z0JBQUVKLE9BQU9JO1lBQUk7UUFBRTtRQUM3RixTQUFTRixLQUFLSSxNQUFNO1lBQUlBLE9BQU9DLElBQUksR0FBR1QsUUFBUVEsT0FBT1QsS0FBSyxJQUFJRCxNQUFNVSxPQUFPVCxLQUFLLEVBQUVXLElBQUksQ0FBQ1AsV0FBV0k7UUFBVztRQUM3R0gsS0FBSyxDQUFDUCxZQUFZQSxVQUFVYyxLQUFLLENBQUNqQixTQUFTQyxjQUFjLEVBQUUsR0FBR1UsSUFBSTtJQUN0RTtBQUNKO0FBQ0FPLDhDQUE2QztJQUFFYixPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdEZSx1QkFBdUIsR0FBR0EsZ0JBQWdCLEdBQUcsS0FBSztBQUNsREEsOEJBQThCLEdBQUdHO0FBQ2pDSCw2QkFBNkIsR0FBR0k7QUFDaEMsTUFBTUMsb0JBQW9CO0FBQzFCLE1BQU1ILGlCQUFpQkk7SUFDbkJDLFlBQVksRUFBRUMsT0FBTyxFQUFFQyxNQUFNLEVBQUVDLElBQUksRUFBRSxDQUFFO1FBQ25DLEtBQUssQ0FBQ0Y7UUFDTixJQUFJLENBQUNHLElBQUksR0FBRztRQUNaLElBQUksQ0FBQ0YsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ0MsSUFBSSxHQUFHQTtJQUNoQjtBQUNKO0FBQ0FWLGdCQUFnQixHQUFHRTtBQUNuQixNQUFNRCx3QkFBd0JDO0lBQzFCSyxZQUFZSyxJQUFJLENBQUU7UUFDZCxLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDRCxJQUFJLEdBQUc7SUFDaEI7SUFDQSxJQUFJRSxjQUFjO1FBQ2QsK0RBQStEO1FBQy9ELHVFQUF1RTtRQUN2RSxJQUFJLE9BQU8sSUFBSSxDQUFDSCxJQUFJLENBQUNJLE1BQU0sS0FBSyxVQUFVO1lBQ3RDLE9BQU87Z0JBQ0g7b0JBQ0lDLEtBQUs7d0JBQUM7cUJBQU87b0JBQ2JDLEtBQUssSUFBSSxDQUFDTixJQUFJLENBQUNJLE1BQU07b0JBQ3JCRyxNQUFNO2dCQUNWO2FBQ0g7UUFDTDtRQUNBLE9BQU8sSUFBSSxDQUFDUCxJQUFJLENBQUNJLE1BQU0sSUFBSSxFQUFFO0lBQ2pDO0lBQ0FJLGVBQWVDLEtBQUssRUFBRTtRQUNsQixPQUFPLElBQUksQ0FBQ04sV0FBVyxDQUFDTyxNQUFNLENBQUMsQ0FBQ0MsUUFBVUEsTUFBTU4sR0FBRyxDQUFDTSxNQUFNTixHQUFHLENBQUNPLE1BQU0sR0FBRyxFQUFFLEtBQUtIO0lBQ2xGO0FBQ0o7QUFDQW5CLHVCQUF1QixHQUFHQztBQUMxQixTQUFTRSx1QkFBdUJvQixRQUFRO0lBQ3BDLE9BQU81QyxVQUFVLElBQUksRUFBRSxLQUFLLEdBQUcsS0FBSyxHQUFHO1FBQ25DLElBQUk2QztRQUNKLE1BQU0sRUFBRWYsTUFBTSxFQUFFZ0IsVUFBVSxFQUFFLEdBQUdGO1FBQy9CLE1BQU1HLGNBQWMsQ0FBQ0YsS0FBS0QsU0FBU0ksT0FBTyxDQUFDQyxHQUFHLENBQUMsZUFBYyxNQUFPLFFBQVFKLE9BQU8sS0FBSyxJQUFJQSxLQUFLO1FBQ2pHLElBQUksQ0FBQ0QsU0FBU00sRUFBRSxFQUFFO1lBQ2QsSUFBSUgsWUFBWUksUUFBUSxDQUFDLHFCQUFxQjtnQkFDMUMsTUFBTXBCLE9BQU8sTUFBTWEsU0FBU1EsSUFBSTtnQkFDaEMsTUFBTUMsWUFBWXZCLFdBQVcsTUFBTVIsa0JBQWtCQztnQkFDckQsTUFBTSxJQUFJOEIsVUFBVTtvQkFDaEJ4QixTQUFTRSxLQUFLRixPQUFPLElBQUlpQjtvQkFDekJoQjtvQkFDQUM7Z0JBQ0o7WUFDSjtZQUNBLE1BQU0sSUFBSVIsU0FBUztnQkFBRU0sU0FBUyxDQUFDLEtBQUssRUFBRUMsT0FBTyxFQUFFLEVBQUVnQixXQUFXLENBQUM7Z0JBQUVoQjtZQUFPO1FBQzFFO1FBQ0EsSUFBSWlCLFlBQVlJLFFBQVEsQ0FBQyxxQkFBcUI7WUFDMUMsT0FBT1AsU0FBU1EsSUFBSTtRQUN4QjtRQUNBLElBQUlMLFlBQVlJLFFBQVEsQ0FBQyxjQUFjO1lBQ25DLE9BQU9QLFNBQVNVLElBQUk7UUFDeEI7UUFDQSxJQUFJUCxZQUFZSSxRQUFRLENBQUMsNkJBQTZCO1lBQ2xELE9BQU9QLFNBQVNXLFdBQVc7UUFDL0I7UUFDQSxzREFBc0Q7UUFDdEQsT0FBT1gsU0FBU1UsSUFBSTtJQUN4QjtBQUNKO0FBQ0EsU0FBUzdCLHNCQUFzQm1CLFFBQVE7SUFDbkMsT0FBTzVDLFVBQVUsSUFBSSxFQUFFLEtBQUssR0FBRyxLQUFLLEdBQUc7UUFDbkMsTUFBTXdELE9BQU8sTUFBTWhDLHVCQUF1Qm9CO1FBQzFDLE9BQU87WUFDSFk7WUFDQUMsV0FBV2IsU0FBU0ksT0FBTyxDQUFDQyxHQUFHLENBQUN2QixzQkFBc0I7UUFDMUQ7SUFDSjtBQUNKLEVBQ0Esb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWVudS1nZW5lcmF0b3IvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3Jlc3BvbnNlLmpzPzQ5ZDMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVmFsaWRhdGlvbkVycm9yID0gZXhwb3J0cy5BcGlFcnJvciA9IHZvaWQgMDtcbmV4cG9ydHMuZGVmYXVsdFJlc3BvbnNlSGFuZGxlciA9IGRlZmF1bHRSZXNwb25zZUhhbmRsZXI7XG5leHBvcnRzLnJlc3VsdFJlc3BvbnNlSGFuZGxlciA9IHJlc3VsdFJlc3BvbnNlSGFuZGxlcjtcbmNvbnN0IFJFUVVFU1RfSURfSEVBREVSID0gXCJ4LWZhbC1yZXF1ZXN0LWlkXCI7XG5jbGFzcyBBcGlFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UsIHN0YXR1cywgYm9keSB9KSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkFwaUVycm9yXCI7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgIH1cbn1cbmV4cG9ydHMuQXBpRXJyb3IgPSBBcGlFcnJvcjtcbmNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEFwaUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgICAgIHN1cGVyKGFyZ3MpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlZhbGlkYXRpb25FcnJvclwiO1xuICAgIH1cbiAgICBnZXQgZmllbGRFcnJvcnMoKSB7XG4gICAgICAgIC8vIE5PVEU6IHRoaXMgaXMgYSBoYWNrIHRvIHN1cHBvcnQgYm90aCBGYXN0QVBJL1B5ZGFudGljIGVycm9yc1xuICAgICAgICAvLyBhbmQgc29tZSBjdXN0b20gNDIyIGVycm9ycyB0aGF0IG1pZ2h0IG5vdCBiZSBpbiB0aGUgUHlkYW50aWMgZm9ybWF0LlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuYm9keS5kZXRhaWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsb2M6IFtcImJvZHlcIl0sXG4gICAgICAgICAgICAgICAgICAgIG1zZzogdGhpcy5ib2R5LmRldGFpbCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ2YWx1ZV9lcnJvclwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJvZHkuZGV0YWlsIHx8IFtdO1xuICAgIH1cbiAgICBnZXRGaWVsZEVycm9ycyhmaWVsZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZEVycm9ycy5maWx0ZXIoKGVycm9yKSA9PiBlcnJvci5sb2NbZXJyb3IubG9jLmxlbmd0aCAtIDFdID09PSBmaWVsZCk7XG4gICAgfVxufVxuZXhwb3J0cy5WYWxpZGF0aW9uRXJyb3IgPSBWYWxpZGF0aW9uRXJyb3I7XG5mdW5jdGlvbiBkZWZhdWx0UmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgc3RhdHVzVGV4dCB9ID0gcmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gKF9hID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJDb250ZW50LVR5cGVcIikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0geWllbGQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IEVycm9yVHlwZSA9IHN0YXR1cyA9PT0gNDIyID8gVmFsaWRhdGlvbkVycm9yIDogQXBpRXJyb3I7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yVHlwZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGJvZHkubWVzc2FnZSB8fCBzdGF0dXNUZXh0LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXBpRXJyb3IoeyBtZXNzYWdlOiBgSFRUUCAke3N0YXR1c306ICR7c3RhdHVzVGV4dH1gLCBzdGF0dXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKFwiYXBwbGljYXRpb24vanNvblwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoXCJ0ZXh0L2h0bWxcIikpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIGNvbnZlcnQgdG8gZWl0aGVyIG51bWJlciBvciBib29sIGF1dG9tYXRpY2FsbHlcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHJlc3VsdFJlc3BvbnNlSGFuZGxlcihyZXNwb25zZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCBkZWZhdWx0UmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICByZXF1ZXN0SWQ6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFJFUVVFU1RfSURfSEVBREVSKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzcG9uc2UuanMubWFwIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsImFkb3B0IiwidmFsdWUiLCJyZXNvbHZlIiwiUHJvbWlzZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIlZhbGlkYXRpb25FcnJvciIsIkFwaUVycm9yIiwiZGVmYXVsdFJlc3BvbnNlSGFuZGxlciIsInJlc3VsdFJlc3BvbnNlSGFuZGxlciIsIlJFUVVFU1RfSURfSEVBREVSIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJib2R5IiwibmFtZSIsImFyZ3MiLCJmaWVsZEVycm9ycyIsImRldGFpbCIsImxvYyIsIm1zZyIsInR5cGUiLCJnZXRGaWVsZEVycm9ycyIsImZpZWxkIiwiZmlsdGVyIiwiZXJyb3IiLCJsZW5ndGgiLCJyZXNwb25zZSIsIl9hIiwic3RhdHVzVGV4dCIsImNvbnRlbnRUeXBlIiwiaGVhZGVycyIsImdldCIsIm9rIiwiaW5jbHVkZXMiLCJqc29uIiwiRXJyb3JUeXBlIiwidGV4dCIsImFycmF5QnVmZmVyIiwiZGF0YSIsInJlcXVlc3RJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/response.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/runtime.js":
/*!****************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/runtime.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n/* eslint-disable @typescript-eslint/no-var-requires */ Object.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isBrowser = isBrowser;\nexports.getUserAgent = getUserAgent;\nfunction isBrowser() {\n    return  false && 0;\n}\nlet memoizedUserAgent = null;\nfunction getUserAgent() {\n    if (memoizedUserAgent !== null) {\n        return memoizedUserAgent;\n    }\n    const packageInfo = __webpack_require__(/*! ../package.json */ \"(rsc)/./node_modules/@fal-ai/client/package.json\");\n    memoizedUserAgent = `${packageInfo.name}/${packageInfo.version}`;\n    return memoizedUserAgent;\n} //# sourceMappingURL=runtime.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3J1bnRpbWUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixxREFBcUQsR0FDckRBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQkFBaUIsR0FBR0U7QUFDcEJGLG9CQUFvQixHQUFHRztBQUN2QixTQUFTRDtJQUNMLE9BQVEsTUFBNkIsSUFBSSxDQUFzQztBQUNuRjtBQUNBLElBQUlJLG9CQUFvQjtBQUN4QixTQUFTSDtJQUNMLElBQUlHLHNCQUFzQixNQUFNO1FBQzVCLE9BQU9BO0lBQ1g7SUFDQSxNQUFNQyxjQUFjQyxtQkFBT0EsQ0FBQyx5RUFBaUI7SUFDN0NGLG9CQUFvQixDQUFDLEVBQUVDLFlBQVlFLElBQUksQ0FBQyxDQUFDLEVBQUVGLFlBQVlHLE9BQU8sQ0FBQyxDQUFDO0lBQ2hFLE9BQU9KO0FBQ1gsRUFDQSxtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tZW51LWdlbmVyYXRvci8uL25vZGVfbW9kdWxlcy9AZmFsLWFpL2NsaWVudC9zcmMvcnVudGltZS5qcz9hNmVmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlcyAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc0Jyb3dzZXIgPSBpc0Jyb3dzZXI7XG5leHBvcnRzLmdldFVzZXJBZ2VudCA9IGdldFVzZXJBZ2VudDtcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIik7XG59XG5sZXQgbWVtb2l6ZWRVc2VyQWdlbnQgPSBudWxsO1xuZnVuY3Rpb24gZ2V0VXNlckFnZW50KCkge1xuICAgIGlmIChtZW1vaXplZFVzZXJBZ2VudCAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbWVtb2l6ZWRVc2VyQWdlbnQ7XG4gICAgfVxuICAgIGNvbnN0IHBhY2thZ2VJbmZvID0gcmVxdWlyZShcIi4uL3BhY2thZ2UuanNvblwiKTtcbiAgICBtZW1vaXplZFVzZXJBZ2VudCA9IGAke3BhY2thZ2VJbmZvLm5hbWV9LyR7cGFja2FnZUluZm8udmVyc2lvbn1gO1xuICAgIHJldHVybiBtZW1vaXplZFVzZXJBZ2VudDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bnRpbWUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNCcm93c2VyIiwiZ2V0VXNlckFnZW50Iiwid2luZG93IiwiZG9jdW1lbnQiLCJtZW1vaXplZFVzZXJBZ2VudCIsInBhY2thZ2VJbmZvIiwicmVxdWlyZSIsIm5hbWUiLCJ2ZXJzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/runtime.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/storage.js":
/*!****************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/storage.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.createStorageClient = createStorageClient;\nconst config_1 = __webpack_require__(/*! ./config */ \"(rsc)/./node_modules/@fal-ai/client/src/config.js\");\nconst request_1 = __webpack_require__(/*! ./request */ \"(rsc)/./node_modules/@fal-ai/client/src/request.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/@fal-ai/client/src/utils.js\");\n/**\n * Get the file extension from the content type. This is used to generate\n * a file name if the file name is not provided.\n *\n * @param contentType the content type of the file.\n * @returns the file extension or `bin` if the content type is not recognized.\n */ function getExtensionFromContentType(contentType) {\n    var _a;\n    const [_, fileType] = contentType.split(\"/\");\n    return (_a = fileType.split(/[-;]/)[0]) !== null && _a !== void 0 ? _a : \"bin\";\n}\n/**\n * Initiate the upload of a file to the server. This returns the URL to upload\n * the file to and the URL of the file once it is uploaded.\n */ function initiateUpload(file, config, contentType) {\n    return __awaiter(this, void 0, void 0, function*() {\n        const filename = file.name || `${Date.now()}.${getExtensionFromContentType(contentType)}`;\n        return yield (0, request_1.dispatchRequest)({\n            method: \"POST\",\n            // NOTE: We want to test V3 without making it the default at the API level\n            targetUrl: `${(0, config_1.getRestApiUrl)()}/storage/upload/initiate?storage_type=fal-cdn-v3`,\n            input: {\n                content_type: contentType,\n                file_name: filename\n            },\n            config\n        });\n    });\n}\n/**\n * Initiate the multipart upload of a file to the server. This returns the URL to upload\n * the file to and the URL of the file once it is uploaded.\n */ function initiateMultipartUpload(file, config, contentType) {\n    return __awaiter(this, void 0, void 0, function*() {\n        const filename = file.name || `${Date.now()}.${getExtensionFromContentType(contentType)}`;\n        return yield (0, request_1.dispatchRequest)({\n            method: \"POST\",\n            targetUrl: `${(0, config_1.getRestApiUrl)()}/storage/upload/initiate-multipart?storage_type=fal-cdn-v3`,\n            input: {\n                content_type: contentType,\n                file_name: filename\n            },\n            config\n        });\n    });\n}\nfunction partUploadRetries(uploadUrl_1, chunk_1, config_2) {\n    return __awaiter(this, arguments, void 0, function*(uploadUrl, chunk, config, tries = 3) {\n        if (tries === 0) {\n            throw new Error(\"Part upload failed, retries exhausted\");\n        }\n        const { fetch, responseHandler } = config;\n        try {\n            const response = yield fetch(uploadUrl, {\n                method: \"PUT\",\n                body: chunk\n            });\n            return yield responseHandler(response);\n        } catch (error) {\n            return yield partUploadRetries(uploadUrl, chunk, config, tries - 1);\n        }\n    });\n}\nfunction multipartUpload(file, config) {\n    return __awaiter(this, void 0, void 0, function*() {\n        const { fetch, responseHandler } = config;\n        const contentType = file.type || \"application/octet-stream\";\n        const { upload_url: uploadUrl, file_url: url } = yield initiateMultipartUpload(file, config, contentType);\n        // Break the file into 10MB chunks\n        const chunkSize = 10 * 1024 * 1024;\n        const chunks = Math.ceil(file.size / chunkSize);\n        const parsedUrl = new URL(uploadUrl);\n        const responses = [];\n        for(let i = 0; i < chunks; i++){\n            const start = i * chunkSize;\n            const end = Math.min(start + chunkSize, file.size);\n            const chunk = file.slice(start, end);\n            const partNumber = i + 1;\n            // {uploadUrl}/{part_number}?uploadUrlParams=...\n            const partUploadUrl = `${parsedUrl.origin}${parsedUrl.pathname}/${partNumber}${parsedUrl.search}`;\n            responses.push((yield partUploadRetries(partUploadUrl, chunk, config)));\n        }\n        // Complete the upload\n        const completeUrl = `${parsedUrl.origin}${parsedUrl.pathname}/complete${parsedUrl.search}`;\n        const response = yield fetch(completeUrl, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                parts: responses.map((mpart)=>({\n                        partNumber: mpart.partNumber,\n                        etag: mpart.etag\n                    }))\n            })\n        });\n        yield responseHandler(response);\n        return url;\n    });\n}\nfunction createStorageClient({ config }) {\n    const ref = {\n        upload: (file)=>__awaiter(this, void 0, void 0, function*() {\n                // Check for 90+ MB file size to do multipart upload\n                if (file.size > 90 * 1024 * 1024) {\n                    return yield multipartUpload(file, config);\n                }\n                const contentType = file.type || \"application/octet-stream\";\n                const { fetch, responseHandler } = config;\n                const { upload_url: uploadUrl, file_url: url } = yield initiateUpload(file, config, contentType);\n                const response = yield fetch(uploadUrl, {\n                    method: \"PUT\",\n                    body: file,\n                    headers: {\n                        \"Content-Type\": file.type || \"application/octet-stream\"\n                    }\n                });\n                yield responseHandler(response);\n                return url;\n            }),\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        transformInput: (input)=>__awaiter(this, void 0, void 0, function*() {\n                if (Array.isArray(input)) {\n                    return Promise.all(input.map((item)=>ref.transformInput(item)));\n                } else if (input instanceof Blob) {\n                    return yield ref.upload(input);\n                } else if ((0, utils_1.isPlainObject)(input)) {\n                    const inputObject = input;\n                    const promises = Object.entries(inputObject).map((_a)=>__awaiter(this, [\n                            _a\n                        ], void 0, function*([key, value]) {\n                            return [\n                                key,\n                                (yield ref.transformInput(value))\n                            ];\n                        }));\n                    const results = yield Promise.all(promises);\n                    return Object.fromEntries(results);\n                }\n                // Return the input as is if it's neither an object nor a file/blob/data URI\n                return input;\n            })\n    };\n    return ref;\n} //# sourceMappingURL=storage.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3N0b3JhZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxZQUFZLElBQUssSUFBSSxJQUFJLENBQUNBLFNBQVMsSUFBSyxTQUFVQyxPQUFPLEVBQUVDLFVBQVUsRUFBRUMsQ0FBQyxFQUFFQyxTQUFTO0lBQ25GLFNBQVNDLE1BQU1DLEtBQUs7UUFBSSxPQUFPQSxpQkFBaUJILElBQUlHLFFBQVEsSUFBSUgsRUFBRSxTQUFVSSxPQUFPO1lBQUlBLFFBQVFEO1FBQVE7SUFBSTtJQUMzRyxPQUFPLElBQUtILENBQUFBLEtBQU1BLENBQUFBLElBQUlLLE9BQU0sQ0FBQyxFQUFHLFNBQVVELE9BQU8sRUFBRUUsTUFBTTtRQUNyRCxTQUFTQyxVQUFVSixLQUFLO1lBQUksSUFBSTtnQkFBRUssS0FBS1AsVUFBVVEsSUFBSSxDQUFDTjtZQUFTLEVBQUUsT0FBT08sR0FBRztnQkFBRUosT0FBT0k7WUFBSTtRQUFFO1FBQzFGLFNBQVNDLFNBQVNSLEtBQUs7WUFBSSxJQUFJO2dCQUFFSyxLQUFLUCxTQUFTLENBQUMsUUFBUSxDQUFDRTtZQUFTLEVBQUUsT0FBT08sR0FBRztnQkFBRUosT0FBT0k7WUFBSTtRQUFFO1FBQzdGLFNBQVNGLEtBQUtJLE1BQU07WUFBSUEsT0FBT0MsSUFBSSxHQUFHVCxRQUFRUSxPQUFPVCxLQUFLLElBQUlELE1BQU1VLE9BQU9ULEtBQUssRUFBRVcsSUFBSSxDQUFDUCxXQUFXSTtRQUFXO1FBQzdHSCxLQUFLLENBQUNQLFlBQVlBLFVBQVVjLEtBQUssQ0FBQ2pCLFNBQVNDLGNBQWMsRUFBRSxHQUFHVSxJQUFJO0lBQ3RFO0FBQ0o7QUFDQU8sOENBQTZDO0lBQUViLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RlLDJCQUEyQixHQUFHQztBQUM5QixNQUFNQyxXQUFXQyxtQkFBT0EsQ0FBQyxtRUFBVTtBQUNuQyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyxxRUFBVztB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RztnQ0FBSyxPQUFNWixJQUFJRSxjQUFjLENBQUMxRixNQUFLOzZCQUFFO3dCQUNqRDtvQkFDQSxNQUFNcUcsVUFBVSxNQUFNbkcsUUFBUTJGLEdBQUcsQ0FBQ0s7b0JBQ2xDLE9BQU9yRixPQUFPeUYsV0FBVyxDQUFDRDtnQkFDOUI7Z0JBQ0EsNEVBQTRFO2dCQUM1RSxPQUFPL0Q7WUFDWDtJQUNKO0lBQ0EsT0FBT2tEO0FBQ1gsRUFDQSxtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tZW51LWdlbmVyYXRvci8uL25vZGVfbW9kdWxlcy9AZmFsLWFpL2NsaWVudC9zcmMvc3RvcmFnZS5qcz82YTQ5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNyZWF0ZVN0b3JhZ2VDbGllbnQgPSBjcmVhdGVTdG9yYWdlQ2xpZW50O1xuY29uc3QgY29uZmlnXzEgPSByZXF1aXJlKFwiLi9jb25maWdcIik7XG5jb25zdCByZXF1ZXN0XzEgPSByZXF1aXJlKFwiLi9yZXF1ZXN0XCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuLyoqXG4gKiBHZXQgdGhlIGZpbGUgZXh0ZW5zaW9uIGZyb20gdGhlIGNvbnRlbnQgdHlwZS4gVGhpcyBpcyB1c2VkIHRvIGdlbmVyYXRlXG4gKiBhIGZpbGUgbmFtZSBpZiB0aGUgZmlsZSBuYW1lIGlzIG5vdCBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gY29udGVudFR5cGUgdGhlIGNvbnRlbnQgdHlwZSBvZiB0aGUgZmlsZS5cbiAqIEByZXR1cm5zIHRoZSBmaWxlIGV4dGVuc2lvbiBvciBgYmluYCBpZiB0aGUgY29udGVudCB0eXBlIGlzIG5vdCByZWNvZ25pemVkLlxuICovXG5mdW5jdGlvbiBnZXRFeHRlbnNpb25Gcm9tQ29udGVudFR5cGUoY29udGVudFR5cGUpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgW18sIGZpbGVUeXBlXSA9IGNvbnRlbnRUeXBlLnNwbGl0KFwiL1wiKTtcbiAgICByZXR1cm4gKF9hID0gZmlsZVR5cGUuc3BsaXQoL1stO10vKVswXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJiaW5cIjtcbn1cbi8qKlxuICogSW5pdGlhdGUgdGhlIHVwbG9hZCBvZiBhIGZpbGUgdG8gdGhlIHNlcnZlci4gVGhpcyByZXR1cm5zIHRoZSBVUkwgdG8gdXBsb2FkXG4gKiB0aGUgZmlsZSB0byBhbmQgdGhlIFVSTCBvZiB0aGUgZmlsZSBvbmNlIGl0IGlzIHVwbG9hZGVkLlxuICovXG5mdW5jdGlvbiBpbml0aWF0ZVVwbG9hZChmaWxlLCBjb25maWcsIGNvbnRlbnRUeXBlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBmaWxlLm5hbWUgfHwgYCR7RGF0ZS5ub3coKX0uJHtnZXRFeHRlbnNpb25Gcm9tQ29udGVudFR5cGUoY29udGVudFR5cGUpfWA7XG4gICAgICAgIHJldHVybiB5aWVsZCAoMCwgcmVxdWVzdF8xLmRpc3BhdGNoUmVxdWVzdCkoe1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIC8vIE5PVEU6IFdlIHdhbnQgdG8gdGVzdCBWMyB3aXRob3V0IG1ha2luZyBpdCB0aGUgZGVmYXVsdCBhdCB0aGUgQVBJIGxldmVsXG4gICAgICAgICAgICB0YXJnZXRVcmw6IGAkeygwLCBjb25maWdfMS5nZXRSZXN0QXBpVXJsKSgpfS9zdG9yYWdlL3VwbG9hZC9pbml0aWF0ZT9zdG9yYWdlX3R5cGU9ZmFsLWNkbi12M2AsXG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRfdHlwZTogY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgZmlsZV9uYW1lOiBmaWxlbmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb25maWcsXG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLyoqXG4gKiBJbml0aWF0ZSB0aGUgbXVsdGlwYXJ0IHVwbG9hZCBvZiBhIGZpbGUgdG8gdGhlIHNlcnZlci4gVGhpcyByZXR1cm5zIHRoZSBVUkwgdG8gdXBsb2FkXG4gKiB0aGUgZmlsZSB0byBhbmQgdGhlIFVSTCBvZiB0aGUgZmlsZSBvbmNlIGl0IGlzIHVwbG9hZGVkLlxuICovXG5mdW5jdGlvbiBpbml0aWF0ZU11bHRpcGFydFVwbG9hZChmaWxlLCBjb25maWcsIGNvbnRlbnRUeXBlKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBmaWxlLm5hbWUgfHwgYCR7RGF0ZS5ub3coKX0uJHtnZXRFeHRlbnNpb25Gcm9tQ29udGVudFR5cGUoY29udGVudFR5cGUpfWA7XG4gICAgICAgIHJldHVybiB5aWVsZCAoMCwgcmVxdWVzdF8xLmRpc3BhdGNoUmVxdWVzdCkoe1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIHRhcmdldFVybDogYCR7KDAsIGNvbmZpZ18xLmdldFJlc3RBcGlVcmwpKCl9L3N0b3JhZ2UvdXBsb2FkL2luaXRpYXRlLW11bHRpcGFydD9zdG9yYWdlX3R5cGU9ZmFsLWNkbi12M2AsXG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRfdHlwZTogY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgZmlsZV9uYW1lOiBmaWxlbmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb25maWcsXG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcGFydFVwbG9hZFJldHJpZXModXBsb2FkVXJsXzEsIGNodW5rXzEsIGNvbmZpZ18yKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24qICh1cGxvYWRVcmwsIGNodW5rLCBjb25maWcsIHRyaWVzID0gMykge1xuICAgICAgICBpZiAodHJpZXMgPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcnQgdXBsb2FkIGZhaWxlZCwgcmV0cmllcyBleGhhdXN0ZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBmZXRjaCwgcmVzcG9uc2VIYW5kbGVyIH0gPSBjb25maWc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIGZldGNoKHVwbG9hZFVybCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICAgICAgICBib2R5OiBjaHVuayxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICh5aWVsZCByZXNwb25zZUhhbmRsZXIocmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCBwYXJ0VXBsb2FkUmV0cmllcyh1cGxvYWRVcmwsIGNodW5rLCBjb25maWcsIHRyaWVzIC0gMSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG11bHRpcGFydFVwbG9hZChmaWxlLCBjb25maWcpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCB7IGZldGNoLCByZXNwb25zZUhhbmRsZXIgfSA9IGNvbmZpZztcbiAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSBmaWxlLnR5cGUgfHwgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIjtcbiAgICAgICAgY29uc3QgeyB1cGxvYWRfdXJsOiB1cGxvYWRVcmwsIGZpbGVfdXJsOiB1cmwgfSA9IHlpZWxkIGluaXRpYXRlTXVsdGlwYXJ0VXBsb2FkKGZpbGUsIGNvbmZpZywgY29udGVudFR5cGUpO1xuICAgICAgICAvLyBCcmVhayB0aGUgZmlsZSBpbnRvIDEwTUIgY2h1bmtzXG4gICAgICAgIGNvbnN0IGNodW5rU2l6ZSA9IDEwICogMTAyNCAqIDEwMjQ7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IE1hdGguY2VpbChmaWxlLnNpemUgLyBjaHVua1NpemUpO1xuICAgICAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHVwbG9hZFVybCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNodW5rczsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IGkgKiBjaHVua1NpemU7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihzdGFydCArIGNodW5rU2l6ZSwgZmlsZS5zaXplKTtcbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gZmlsZS5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnROdW1iZXIgPSBpICsgMTtcbiAgICAgICAgICAgIC8vIHt1cGxvYWRVcmx9L3twYXJ0X251bWJlcn0/dXBsb2FkVXJsUGFyYW1zPS4uLlxuICAgICAgICAgICAgY29uc3QgcGFydFVwbG9hZFVybCA9IGAke3BhcnNlZFVybC5vcmlnaW59JHtwYXJzZWRVcmwucGF0aG5hbWV9LyR7cGFydE51bWJlcn0ke3BhcnNlZFVybC5zZWFyY2h9YDtcbiAgICAgICAgICAgIHJlc3BvbnNlcy5wdXNoKHlpZWxkIHBhcnRVcGxvYWRSZXRyaWVzKHBhcnRVcGxvYWRVcmwsIGNodW5rLCBjb25maWcpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb21wbGV0ZSB0aGUgdXBsb2FkXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlVXJsID0gYCR7cGFyc2VkVXJsLm9yaWdpbn0ke3BhcnNlZFVybC5wYXRobmFtZX0vY29tcGxldGUke3BhcnNlZFVybC5zZWFyY2h9YDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBmZXRjaChjb21wbGV0ZVVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgcGFydHM6IHJlc3BvbnNlcy5tYXAoKG1wYXJ0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBwYXJ0TnVtYmVyOiBtcGFydC5wYXJ0TnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBldGFnOiBtcGFydC5ldGFnLFxuICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgICAgeWllbGQgcmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKTtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVN0b3JhZ2VDbGllbnQoeyBjb25maWcsIH0pIHtcbiAgICBjb25zdCByZWYgPSB7XG4gICAgICAgIHVwbG9hZDogKGZpbGUpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciA5MCsgTUIgZmlsZSBzaXplIHRvIGRvIG11bHRpcGFydCB1cGxvYWRcbiAgICAgICAgICAgIGlmIChmaWxlLnNpemUgPiA5MCAqIDEwMjQgKiAxMDI0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIG11bHRpcGFydFVwbG9hZChmaWxlLCBjb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSBmaWxlLnR5cGUgfHwgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIjtcbiAgICAgICAgICAgIGNvbnN0IHsgZmV0Y2gsIHJlc3BvbnNlSGFuZGxlciB9ID0gY29uZmlnO1xuICAgICAgICAgICAgY29uc3QgeyB1cGxvYWRfdXJsOiB1cGxvYWRVcmwsIGZpbGVfdXJsOiB1cmwgfSA9IHlpZWxkIGluaXRpYXRlVXBsb2FkKGZpbGUsIGNvbmZpZywgY29udGVudFR5cGUpO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBmZXRjaCh1cGxvYWRVcmwsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICAgICAgYm9keTogZmlsZSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IGZpbGUudHlwZSB8fCBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlpZWxkIHJlc3BvbnNlSGFuZGxlcihyZXNwb25zZSk7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9KSxcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdHJhbnNmb3JtSW5wdXQ6IChpbnB1dCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGlucHV0Lm1hcCgoaXRlbSkgPT4gcmVmLnRyYW5zZm9ybUlucHV0KGl0ZW0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgcmVmLnVwbG9hZChpbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgoMCwgdXRpbHNfMS5pc1BsYWluT2JqZWN0KShpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dE9iamVjdCA9IGlucHV0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gT2JqZWN0LmVudHJpZXMoaW5wdXRPYmplY3QpLm1hcCgoX2EpID0+IF9fYXdhaXRlcih0aGlzLCBbX2FdLCB2b2lkIDAsIGZ1bmN0aW9uKiAoW2tleSwgdmFsdWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBba2V5LCB5aWVsZCByZWYudHJhbnNmb3JtSW5wdXQodmFsdWUpXTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IHlpZWxkIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKHJlc3VsdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBpbnB1dCBhcyBpcyBpZiBpdCdzIG5laXRoZXIgYW4gb2JqZWN0IG5vciBhIGZpbGUvYmxvYi9kYXRhIFVSSVxuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9KSxcbiAgICB9O1xuICAgIHJldHVybiByZWY7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdG9yYWdlLmpzLm1hcCJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJhZG9wdCIsInZhbHVlIiwicmVzb2x2ZSIsIlByb21pc2UiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJjcmVhdGVTdG9yYWdlQ2xpZW50IiwiY29uZmlnXzEiLCJyZXF1aXJlIiwicmVxdWVzdF8xIiwidXRpbHNfMSIsImdldEV4dGVuc2lvbkZyb21Db250ZW50VHlwZSIsImNvbnRlbnRUeXBlIiwiX2EiLCJfIiwiZmlsZVR5cGUiLCJzcGxpdCIsImluaXRpYXRlVXBsb2FkIiwiZmlsZSIsImNvbmZpZyIsImZpbGVuYW1lIiwibmFtZSIsIkRhdGUiLCJub3ciLCJkaXNwYXRjaFJlcXVlc3QiLCJtZXRob2QiLCJ0YXJnZXRVcmwiLCJnZXRSZXN0QXBpVXJsIiwiaW5wdXQiLCJjb250ZW50X3R5cGUiLCJmaWxlX25hbWUiLCJpbml0aWF0ZU11bHRpcGFydFVwbG9hZCIsInBhcnRVcGxvYWRSZXRyaWVzIiwidXBsb2FkVXJsXzEiLCJjaHVua18xIiwiY29uZmlnXzIiLCJhcmd1bWVudHMiLCJ1cGxvYWRVcmwiLCJjaHVuayIsInRyaWVzIiwiRXJyb3IiLCJmZXRjaCIsInJlc3BvbnNlSGFuZGxlciIsInJlc3BvbnNlIiwiYm9keSIsImVycm9yIiwibXVsdGlwYXJ0VXBsb2FkIiwidHlwZSIsInVwbG9hZF91cmwiLCJmaWxlX3VybCIsInVybCIsImNodW5rU2l6ZSIsImNodW5rcyIsIk1hdGgiLCJjZWlsIiwic2l6ZSIsInBhcnNlZFVybCIsIlVSTCIsInJlc3BvbnNlcyIsImkiLCJzdGFydCIsImVuZCIsIm1pbiIsInNsaWNlIiwicGFydE51bWJlciIsInBhcnRVcGxvYWRVcmwiLCJvcmlnaW4iLCJwYXRobmFtZSIsInNlYXJjaCIsInB1c2giLCJjb21wbGV0ZVVybCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwicGFydHMiLCJtYXAiLCJtcGFydCIsImV0YWciLCJyZWYiLCJ1cGxvYWQiLCJ0cmFuc2Zvcm1JbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsImFsbCIsIml0ZW0iLCJCbG9iIiwiaXNQbGFpbk9iamVjdCIsImlucHV0T2JqZWN0IiwicHJvbWlzZXMiLCJlbnRyaWVzIiwia2V5IiwicmVzdWx0cyIsImZyb21FbnRyaWVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/storage.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/streaming.js":
/*!******************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/streaming.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __await = this && this.__await || function(v) {\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\n};\nvar __asyncGenerator = this && this.__asyncGenerator || function(thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function() {\n        return this;\n    }, i;\n    function awaitReturn(f) {\n        return function(v) {\n            return Promise.resolve(v).then(f, reject);\n        };\n    }\n    function verb(n, f) {\n        if (g[n]) {\n            i[n] = function(v) {\n                return new Promise(function(a, b) {\n                    q.push([\n                        n,\n                        v,\n                        a,\n                        b\n                    ]) > 1 || resume(n, v);\n                });\n            };\n            if (f) i[n] = f(i[n]);\n        }\n    }\n    function resume(n, v) {\n        try {\n            step(g[n](v));\n        } catch (e) {\n            settle(q[0][3], e);\n        }\n    }\n    function step(r) {\n        r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n    }\n    function fulfill(value) {\n        resume(\"next\", value);\n    }\n    function reject(value) {\n        resume(\"throw\", value);\n    }\n    function settle(f, v) {\n        if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FalStream = void 0;\nexports.createStreamingClient = createStreamingClient;\nconst eventsource_parser_1 = __webpack_require__(/*! eventsource-parser */ \"(rsc)/./node_modules/@fal-ai/client/node_modules/eventsource-parser/dist/index.cjs\");\nconst auth_1 = __webpack_require__(/*! ./auth */ \"(rsc)/./node_modules/@fal-ai/client/src/auth.js\");\nconst request_1 = __webpack_require__(/*! ./request */ \"(rsc)/./node_modules/@fal-ai/client/src/request.js\");\nconst response_1 = __webpack_require__(/*! ./response */ \"(rsc)/./node_modules/@fal-ai/client/src/response.js\");\nconst CONTENT_TYPE_EVENT_STREAM = \"text/event-stream\";\nconst EVENT_STREAM_TIMEOUT = 15 * 1000;\n/**\n * The class representing a streaming response. With t\n */ class FalStream {\n    constructor(endpointId, config, options){\n        var _a;\n        // support for event listeners\n        this.listeners = new Map();\n        this.buffer = [];\n        // local state\n        this.currentData = undefined;\n        this.lastEventTimestamp = 0;\n        this.streamClosed = false;\n        this.abortController = new AbortController();\n        this.start = ()=>__awaiter(this, void 0, void 0, function*() {\n                var _a, _b;\n                const { endpointId, options } = this;\n                const { input, method = \"post\", connectionMode = \"server\" } = options;\n                try {\n                    if (connectionMode === \"client\") {\n                        // if we are in the browser, we need to get a temporary token\n                        // to authenticate the request\n                        const token = yield (0, auth_1.getTemporaryAuthToken)(endpointId, this.config);\n                        const { fetch } = this.config;\n                        const parsedUrl = new URL(this.url);\n                        parsedUrl.searchParams.set(\"fal_jwt_token\", token);\n                        const response = yield fetch(parsedUrl.toString(), {\n                            method: method.toUpperCase(),\n                            headers: {\n                                accept: (_a = options.accept) !== null && _a !== void 0 ? _a : CONTENT_TYPE_EVENT_STREAM,\n                                \"content-type\": \"application/json\"\n                            },\n                            body: input && method !== \"get\" ? JSON.stringify(input) : undefined,\n                            signal: this.abortController.signal\n                        });\n                        return yield this.handleResponse(response);\n                    }\n                    return yield (0, request_1.dispatchRequest)({\n                        method: method.toUpperCase(),\n                        targetUrl: this.url,\n                        input,\n                        config: this.config,\n                        options: {\n                            headers: {\n                                accept: (_b = options.accept) !== null && _b !== void 0 ? _b : CONTENT_TYPE_EVENT_STREAM\n                            },\n                            responseHandler: this.handleResponse,\n                            signal: this.abortController.signal\n                        }\n                    });\n                } catch (error) {\n                    this.handleError(error);\n                }\n            });\n        this.handleResponse = (response)=>__awaiter(this, void 0, void 0, function*() {\n                var _a, _b;\n                if (!response.ok) {\n                    try {\n                        // we know the response failed, call the response handler\n                        // so the exception gets converted to ApiError correctly\n                        yield (0, response_1.defaultResponseHandler)(response);\n                    } catch (error) {\n                        this.emit(\"error\", error);\n                    }\n                    return;\n                }\n                const body = response.body;\n                if (!body) {\n                    this.emit(\"error\", new response_1.ApiError({\n                        message: \"Response body is empty.\",\n                        status: 400,\n                        body: undefined\n                    }));\n                    return;\n                }\n                const isEventStream = ((_a = response.headers.get(\"content-type\")) !== null && _a !== void 0 ? _a : \"\").startsWith(CONTENT_TYPE_EVENT_STREAM);\n                // any response that is not a text/event-stream will be handled as a binary stream\n                if (!isEventStream) {\n                    const reader = body.getReader();\n                    const emitRawChunk = ()=>{\n                        reader.read().then(({ done, value })=>{\n                            if (done) {\n                                this.emit(\"done\", this.currentData);\n                                return;\n                            }\n                            this.currentData = value;\n                            this.emit(\"data\", value);\n                            emitRawChunk();\n                        });\n                    };\n                    emitRawChunk();\n                    return;\n                }\n                const decoder = new TextDecoder(\"utf-8\");\n                const reader = response.body.getReader();\n                const parser = (0, eventsource_parser_1.createParser)((event)=>{\n                    if (event.type === \"event\") {\n                        const data = event.data;\n                        try {\n                            const parsedData = JSON.parse(data);\n                            this.buffer.push(parsedData);\n                            this.currentData = parsedData;\n                            this.emit(\"data\", parsedData);\n                            // also emit 'message'for backwards compatibility\n                            this.emit(\"message\", parsedData);\n                        } catch (e) {\n                            this.emit(\"error\", e);\n                        }\n                    }\n                });\n                const timeout = (_b = this.options.timeout) !== null && _b !== void 0 ? _b : EVENT_STREAM_TIMEOUT;\n                const readPartialResponse = ()=>__awaiter(this, void 0, void 0, function*() {\n                        const { value, done } = yield reader.read();\n                        this.lastEventTimestamp = Date.now();\n                        parser.feed(decoder.decode(value));\n                        if (Date.now() - this.lastEventTimestamp > timeout) {\n                            this.emit(\"error\", new response_1.ApiError({\n                                message: `Event stream timed out after ${(timeout / 1000).toFixed(0)} seconds with no messages.`,\n                                status: 408\n                            }));\n                        }\n                        if (!done) {\n                            readPartialResponse().catch(this.handleError);\n                        } else {\n                            this.emit(\"done\", this.currentData);\n                        }\n                    });\n                readPartialResponse().catch(this.handleError);\n                return;\n            });\n        this.handleError = (error)=>{\n            var _a;\n            // In case AbortError is thrown but the signal is marked as aborted\n            // it means the user called abort() and we should not emit an error\n            // as it's expected behavior\n            // See note on: https://developer.mozilla.org/en-US/docs/Web/API/AbortController/abort\n            if (error.name === \"AbortError\" || this.signal.aborted) {\n                return;\n            }\n            const apiError = error instanceof response_1.ApiError ? error : new response_1.ApiError({\n                message: (_a = error.message) !== null && _a !== void 0 ? _a : \"An unknown error occurred\",\n                status: 500\n            });\n            this.emit(\"error\", apiError);\n            return;\n        };\n        this.on = (type, listener)=>{\n            var _a;\n            if (!this.listeners.has(type)) {\n                this.listeners.set(type, []);\n            }\n            (_a = this.listeners.get(type)) === null || _a === void 0 ? void 0 : _a.push(listener);\n        };\n        this.emit = (type, event)=>{\n            const listeners = this.listeners.get(type) || [];\n            for (const listener of listeners){\n                listener(event);\n            }\n        };\n        /**\n         * Gets a reference to the `Promise` that indicates whether the streaming\n         * is done or not. Developers should always call this in their apps to ensure\n         * the request is over.\n         *\n         * An alternative to this, is to use `on('done')` in case your application\n         * architecture works best with event listeners.\n         *\n         * @returns the promise that resolves when the request is done.\n         */ this.done = ()=>__awaiter(this, void 0, void 0, function*() {\n                return this.donePromise;\n            });\n        /**\n         * Aborts the streaming request.\n         *\n         * **Note:** This method is noop in case the request is already done.\n         *\n         * @param reason optional cause for aborting the request.\n         */ this.abort = (reason)=>{\n            if (!this.streamClosed) {\n                this.abortController.abort(reason);\n            }\n        };\n        this.endpointId = endpointId;\n        this.config = config;\n        this.url = (_a = options.url) !== null && _a !== void 0 ? _a : (0, request_1.buildUrl)(endpointId, {\n            path: \"/stream\",\n            query: options.queryParams\n        });\n        this.options = options;\n        this.donePromise = new Promise((resolve, reject)=>{\n            if (this.streamClosed) {\n                reject(new response_1.ApiError({\n                    message: \"Streaming connection is already closed.\",\n                    status: 400,\n                    body: undefined\n                }));\n            }\n            this.signal.addEventListener(\"abort\", ()=>{\n                var _a;\n                resolve((_a = this.currentData) !== null && _a !== void 0 ? _a : {});\n            });\n            this.on(\"done\", (data)=>{\n                this.streamClosed = true;\n                resolve(data);\n            });\n            this.on(\"error\", (error)=>{\n                this.streamClosed = true;\n                reject(error);\n            });\n        });\n        // if a abort signal was passed, sync it with the internal one\n        if (options.signal) {\n            options.signal.addEventListener(\"abort\", ()=>{\n                this.abortController.abort();\n            });\n        }\n        // start the streaming request\n        this.start().catch(this.handleError);\n    }\n    [Symbol.asyncIterator]() {\n        return __asyncGenerator(this, arguments, function* _a() {\n            let running = true;\n            const stopAsyncIterator = ()=>running = false;\n            this.on(\"error\", stopAsyncIterator);\n            this.on(\"done\", stopAsyncIterator);\n            while(running){\n                const data = this.buffer.shift();\n                if (data) {\n                    yield yield __await(data);\n                }\n                // the short timeout ensures the while loop doesn't block other\n                // frames getting executed concurrently\n                yield __await(new Promise((resolve)=>setTimeout(resolve, 16)));\n            }\n        });\n    }\n    /**\n     * Gets the `AbortSignal` instance that can be used to listen for abort events.\n     *\n     * **Note:** this signal is internal to the `FalStream` instance. If you pass your\n     * own abort signal, the `FalStream` will listen to it and abort it appropriately.\n     *\n     * @returns the `AbortSignal` instance.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal\n     */ get signal() {\n        return this.abortController.signal;\n    }\n}\nexports.FalStream = FalStream;\nfunction createStreamingClient({ config, storage }) {\n    return {\n        stream (endpointId, options) {\n            return __awaiter(this, void 0, void 0, function*() {\n                const input = options.input ? yield storage.transformInput(options.input) : undefined;\n                return new FalStream(endpointId, config, Object.assign(Object.assign({}, options), {\n                    input: input\n                }));\n            });\n        }\n    };\n} //# sourceMappingURL=streaming.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3N0cmVhbWluZy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLFlBQVksSUFBSyxJQUFJLElBQUksQ0FBQ0EsU0FBUyxJQUFLLFNBQVVDLE9BQU8sRUFBRUMsVUFBVSxFQUFFQyxDQUFDLEVBQUVDLFNBQVM7SUFDbkYsU0FBU0MsTUFBTUMsS0FBSztRQUFJLE9BQU9BLGlCQUFpQkgsSUFBSUcsUUFBUSxJQUFJSCxFQUFFLFNBQVVJLE9BQU87WUFBSUEsUUFBUUQ7UUFBUTtJQUFJO0lBQzNHLE9BQU8sSUFBS0gsQ0FBQUEsS0FBTUEsQ0FBQUEsSUFBSUssT0FBTSxDQUFDLEVBQUcsU0FBVUQsT0FBTyxFQUFFRSxNQUFNO1FBQ3JELFNBQVNDLFVBQVVKLEtBQUs7WUFBSSxJQUFJO2dCQUFFSyxLQUFLUCxVQUFVUSxJQUFJLENBQUNOO1lBQVMsRUFBRSxPQUFPTyxHQUFHO2dCQUFFSixPQUFPSTtZQUFJO1FBQUU7UUFDMUYsU0FBU0MsU0FBU1IsS0FBSztZQUFJLElBQUk7Z0JBQUVLLEtBQUtQLFNBQVMsQ0FBQyxRQUFRLENBQUNFO1lBQVMsRUFBRSxPQUFPTyxHQUFHO2dCQUFFSixPQUFPSTtZQUFJO1FBQUU7UUFDN0YsU0FBU0YsS0FBS0ksTUFBTTtZQUFJQSxPQUFPQyxJQUFJLEdBQUdULFFBQVFRLE9BQU9ULEtBQUssSUFBSUQsTUFBTVUsT0FBT1QsS0FBSyxFQUFFVyxJQUFJLENBQUNQLFdBQVdJO1FBQVc7UUFDN0dILEtBQUssQ0FBQ1AsWUFBWUEsVUFBVWMsS0FBSyxDQUFDakIsU0FBU0MsY0FBYyxFQUFFLEdBQUdVLElBQUk7SUFDdEU7QUFDSjtBQUNBLElBQUlPLFVBQVUsSUFBSyxJQUFJLElBQUksQ0FBQ0EsT0FBTyxJQUFLLFNBQVVDLENBQUM7SUFBSSxPQUFPLElBQUksWUFBWUQsVUFBVyxLQUFJLENBQUNDLENBQUMsR0FBR0EsR0FBRyxJQUFJLElBQUksSUFBSUQsUUFB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RztRQUNKO0lBQ0o7QUFDSixFQUNBLHFDQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1lbnUtZ2VuZXJhdG9yLy4vbm9kZV9tb2R1bGVzL0BmYWwtYWkvY2xpZW50L3NyYy9zdHJlYW1pbmcuanM/OWM3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fYXdhaXQgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXQpIHx8IGZ1bmN0aW9uICh2KSB7IHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpOyB9XG52YXIgX19hc3luY0dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19hc3luY0dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIsIGF3YWl0UmV0dXJuKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xuICAgIGZ1bmN0aW9uIGF3YWl0UmV0dXJuKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodikudGhlbihmLCByZWplY3QpOyB9OyB9XG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlmIChnW25dKSB7IGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IGlmIChmKSBpW25dID0gZihpW25dKTsgfSB9XG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRmFsU3RyZWFtID0gdm9pZCAwO1xuZXhwb3J0cy5jcmVhdGVTdHJlYW1pbmdDbGllbnQgPSBjcmVhdGVTdHJlYW1pbmdDbGllbnQ7XG5jb25zdCBldmVudHNvdXJjZV9wYXJzZXJfMSA9IHJlcXVpcmUoXCJldmVudHNvdXJjZS1wYXJzZXJcIik7XG5jb25zdCBhdXRoXzEgPSByZXF1aXJlKFwiLi9hdXRoXCIpO1xuY29uc3QgcmVxdWVzdF8xID0gcmVxdWlyZShcIi4vcmVxdWVzdFwiKTtcbmNvbnN0IHJlc3BvbnNlXzEgPSByZXF1aXJlKFwiLi9yZXNwb25zZVwiKTtcbmNvbnN0IENPTlRFTlRfVFlQRV9FVkVOVF9TVFJFQU0gPSBcInRleHQvZXZlbnQtc3RyZWFtXCI7XG5jb25zdCBFVkVOVF9TVFJFQU1fVElNRU9VVCA9IDE1ICogMTAwMDtcbi8qKlxuICogVGhlIGNsYXNzIHJlcHJlc2VudGluZyBhIHN0cmVhbWluZyByZXNwb25zZS4gV2l0aCB0XG4gKi9cbmNsYXNzIEZhbFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZW5kcG9pbnRJZCwgY29uZmlnLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gc3VwcG9ydCBmb3IgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICAvLyBsb2NhbCBzdGF0ZVxuICAgICAgICB0aGlzLmN1cnJlbnREYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmxhc3RFdmVudFRpbWVzdGFtcCA9IDA7XG4gICAgICAgIHRoaXMuc3RyZWFtQ2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLnN0YXJ0ID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGNvbnN0IHsgZW5kcG9pbnRJZCwgb3B0aW9ucyB9ID0gdGhpcztcbiAgICAgICAgICAgIGNvbnN0IHsgaW5wdXQsIG1ldGhvZCA9IFwicG9zdFwiLCBjb25uZWN0aW9uTW9kZSA9IFwic2VydmVyXCIgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uTW9kZSA9PT0gXCJjbGllbnRcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBhcmUgaW4gdGhlIGJyb3dzZXIsIHdlIG5lZWQgdG8gZ2V0IGEgdGVtcG9yYXJ5IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGF1dGhlbnRpY2F0ZSB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IHlpZWxkICgwLCBhdXRoXzEuZ2V0VGVtcG9yYXJ5QXV0aFRva2VuKShlbmRwb2ludElkLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZmV0Y2ggfSA9IHRoaXMuY29uZmlnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHRoaXMudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkVXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJmYWxfand0X3Rva2VuXCIsIHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBmZXRjaChwYXJzZWRVcmwudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQ6IChfYSA9IG9wdGlvbnMuYWNjZXB0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBDT05URU5UX1RZUEVfRVZFTlRfU1RSRUFNLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGlucHV0ICYmIG1ldGhvZCAhPT0gXCJnZXRcIiA/IEpTT04uc3RyaW5naWZ5KGlucHV0KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogdGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHRoaXMuaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgKDAsIHJlcXVlc3RfMS5kaXNwYXRjaFJlcXVlc3QpKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VXJsOiB0aGlzLnVybCxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQ6IChfYiA9IG9wdGlvbnMuYWNjZXB0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBDT05URU5UX1RZUEVfRVZFTlRfU1RSRUFNLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcjogdGhpcy5oYW5kbGVSZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogdGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhhbmRsZVJlc3BvbnNlID0gKHJlc3BvbnNlKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGtub3cgdGhlIHJlc3BvbnNlIGZhaWxlZCwgY2FsbCB0aGUgcmVzcG9uc2UgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAvLyBzbyB0aGUgZXhjZXB0aW9uIGdldHMgY29udmVydGVkIHRvIEFwaUVycm9yIGNvcnJlY3RseVxuICAgICAgICAgICAgICAgICAgICB5aWVsZCAoMCwgcmVzcG9uc2VfMS5kZWZhdWx0UmVzcG9uc2VIYW5kbGVyKShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoXCJlcnJvclwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSByZXNwb25zZS5ib2R5O1xuICAgICAgICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgbmV3IHJlc3BvbnNlXzEuQXBpRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlJlc3BvbnNlIGJvZHkgaXMgZW1wdHkuXCIsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlzRXZlbnRTdHJlYW0gPSAoKF9hID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCIpLnN0YXJ0c1dpdGgoQ09OVEVOVF9UWVBFX0VWRU5UX1NUUkVBTSk7XG4gICAgICAgICAgICAvLyBhbnkgcmVzcG9uc2UgdGhhdCBpcyBub3QgYSB0ZXh0L2V2ZW50LXN0cmVhbSB3aWxsIGJlIGhhbmRsZWQgYXMgYSBiaW5hcnkgc3RyZWFtXG4gICAgICAgICAgICBpZiAoIWlzRXZlbnRTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBib2R5LmdldFJlYWRlcigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVtaXRSYXdDaHVuayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWQoKS50aGVuKCh7IGRvbmUsIHZhbHVlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwiZG9uZVwiLCB0aGlzLmN1cnJlbnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnREYXRhID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoXCJkYXRhXCIsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRSYXdDaHVuaygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGVtaXRSYXdDaHVuaygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKTtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgICAgICAgICBjb25zdCBwYXJzZXIgPSAoMCwgZXZlbnRzb3VyY2VfcGFyc2VyXzEuY3JlYXRlUGFyc2VyKSgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJldmVudFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHBhcnNlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IHBhcnNlZERhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoXCJkYXRhXCIsIHBhcnNlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxzbyBlbWl0ICdtZXNzYWdlJ2ZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwibWVzc2FnZVwiLCBwYXJzZWREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSAoX2IgPSB0aGlzLm9wdGlvbnMudGltZW91dCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogRVZFTlRfU1RSRUFNX1RJTUVPVVQ7XG4gICAgICAgICAgICBjb25zdCByZWFkUGFydGlhbFJlc3BvbnNlID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IHlpZWxkIHJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RXZlbnRUaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIHBhcnNlci5mZWVkKGRlY29kZXIuZGVjb2RlKHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RFdmVudFRpbWVzdGFtcCA+IHRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgbmV3IHJlc3BvbnNlXzEuQXBpRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEV2ZW50IHN0cmVhbSB0aW1lZCBvdXQgYWZ0ZXIgJHsodGltZW91dCAvIDEwMDApLnRvRml4ZWQoMCl9IHNlY29uZHMgd2l0aCBubyBtZXNzYWdlcy5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDgsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRQYXJ0aWFsUmVzcG9uc2UoKS5jYXRjaCh0aGlzLmhhbmRsZUVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChcImRvbmVcIiwgdGhpcy5jdXJyZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWFkUGFydGlhbFJlc3BvbnNlKCkuY2F0Y2godGhpcy5oYW5kbGVFcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhhbmRsZUVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAvLyBJbiBjYXNlIEFib3J0RXJyb3IgaXMgdGhyb3duIGJ1dCB0aGUgc2lnbmFsIGlzIG1hcmtlZCBhcyBhYm9ydGVkXG4gICAgICAgICAgICAvLyBpdCBtZWFucyB0aGUgdXNlciBjYWxsZWQgYWJvcnQoKSBhbmQgd2Ugc2hvdWxkIG5vdCBlbWl0IGFuIGVycm9yXG4gICAgICAgICAgICAvLyBhcyBpdCdzIGV4cGVjdGVkIGJlaGF2aW9yXG4gICAgICAgICAgICAvLyBTZWUgbm90ZSBvbjogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Fib3J0Q29udHJvbGxlci9hYm9ydFxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiIHx8IHRoaXMuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhcGlFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgcmVzcG9uc2VfMS5BcGlFcnJvclxuICAgICAgICAgICAgICAgID8gZXJyb3JcbiAgICAgICAgICAgICAgICA6IG5ldyByZXNwb25zZV8xLkFwaUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKF9hID0gZXJyb3IubWVzc2FnZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkXCIsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgYXBpRXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uID0gKHR5cGUsIGxpc3RlbmVyKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzLmhhcyh0eXBlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzLnNldCh0eXBlLCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoX2EgPSB0aGlzLmxpc3RlbmVycy5nZXQodHlwZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbWl0ID0gKHR5cGUsIGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycy5nZXQodHlwZSkgfHwgW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIGxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgYSByZWZlcmVuY2UgdG8gdGhlIGBQcm9taXNlYCB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHRoZSBzdHJlYW1pbmdcbiAgICAgICAgICogaXMgZG9uZSBvciBub3QuIERldmVsb3BlcnMgc2hvdWxkIGFsd2F5cyBjYWxsIHRoaXMgaW4gdGhlaXIgYXBwcyB0byBlbnN1cmVcbiAgICAgICAgICogdGhlIHJlcXVlc3QgaXMgb3Zlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQW4gYWx0ZXJuYXRpdmUgdG8gdGhpcywgaXMgdG8gdXNlIGBvbignZG9uZScpYCBpbiBjYXNlIHlvdXIgYXBwbGljYXRpb25cbiAgICAgICAgICogYXJjaGl0ZWN0dXJlIHdvcmtzIGJlc3Qgd2l0aCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgcmVxdWVzdCBpcyBkb25lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kb25lID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgeyByZXR1cm4gdGhpcy5kb25lUHJvbWlzZTsgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBYm9ydHMgdGhlIHN0cmVhbWluZyByZXF1ZXN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbm9vcCBpbiBjYXNlIHRoZSByZXF1ZXN0IGlzIGFscmVhZHkgZG9uZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHJlYXNvbiBvcHRpb25hbCBjYXVzZSBmb3IgYWJvcnRpbmcgdGhlIHJlcXVlc3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFib3J0ID0gKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0cmVhbUNsb3NlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLmFib3J0KHJlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZW5kcG9pbnRJZCA9IGVuZHBvaW50SWQ7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLnVybCA9XG4gICAgICAgICAgICAoX2EgPSBvcHRpb25zLnVybCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKDAsIHJlcXVlc3RfMS5idWlsZFVybCkoZW5kcG9pbnRJZCwge1xuICAgICAgICAgICAgICAgIHBhdGg6IFwiL3N0cmVhbVwiLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBvcHRpb25zLnF1ZXJ5UGFyYW1zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuZG9uZVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW1DbG9zZWQpIHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IHJlc3BvbnNlXzEuQXBpRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlN0cmVhbWluZyBjb25uZWN0aW9uIGlzIGFscmVhZHkgY2xvc2VkLlwiLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKF9hID0gdGhpcy5jdXJyZW50RGF0YSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uKFwiZG9uZVwiLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtQ2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHJlYW1DbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGlmIGEgYWJvcnQgc2lnbmFsIHdhcyBwYXNzZWQsIHN5bmMgaXQgd2l0aCB0aGUgaW50ZXJuYWwgb25lXG4gICAgICAgIGlmIChvcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgb3B0aW9ucy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RhcnQgdGhlIHN0cmVhbWluZyByZXF1ZXN0XG4gICAgICAgIHRoaXMuc3RhcnQoKS5jYXRjaCh0aGlzLmhhbmRsZUVycm9yKTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXN5bmNHZW5lcmF0b3IodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiogX2EoKSB7XG4gICAgICAgICAgICBsZXQgcnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBzdG9wQXN5bmNJdGVyYXRvciA9ICgpID0+IChydW5uaW5nID0gZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5vbihcImVycm9yXCIsIHN0b3BBc3luY0l0ZXJhdG9yKTtcbiAgICAgICAgICAgIHRoaXMub24oXCJkb25lXCIsIHN0b3BBc3luY0l0ZXJhdG9yKTtcbiAgICAgICAgICAgIHdoaWxlIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuYnVmZmVyLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgeWllbGQgX19hd2FpdChkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdGhlIHNob3J0IHRpbWVvdXQgZW5zdXJlcyB0aGUgd2hpbGUgbG9vcCBkb2Vzbid0IGJsb2NrIG90aGVyXG4gICAgICAgICAgICAgICAgLy8gZnJhbWVzIGdldHRpbmcgZXhlY3V0ZWQgY29uY3VycmVudGx5XG4gICAgICAgICAgICAgICAgeWllbGQgX19hd2FpdChuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxNikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGBBYm9ydFNpZ25hbGAgaW5zdGFuY2UgdGhhdCBjYW4gYmUgdXNlZCB0byBsaXN0ZW4gZm9yIGFib3J0IGV2ZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZToqKiB0aGlzIHNpZ25hbCBpcyBpbnRlcm5hbCB0byB0aGUgYEZhbFN0cmVhbWAgaW5zdGFuY2UuIElmIHlvdSBwYXNzIHlvdXJcbiAgICAgKiBvd24gYWJvcnQgc2lnbmFsLCB0aGUgYEZhbFN0cmVhbWAgd2lsbCBsaXN0ZW4gdG8gaXQgYW5kIGFib3J0IGl0IGFwcHJvcHJpYXRlbHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgYEFib3J0U2lnbmFsYCBpbnN0YW5jZS5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9BYm9ydFNpZ25hbFxuICAgICAqL1xuICAgIGdldCBzaWduYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFib3J0Q29udHJvbGxlci5zaWduYWw7XG4gICAgfVxufVxuZXhwb3J0cy5GYWxTdHJlYW0gPSBGYWxTdHJlYW07XG5mdW5jdGlvbiBjcmVhdGVTdHJlYW1pbmdDbGllbnQoeyBjb25maWcsIHN0b3JhZ2UsIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdHJlYW0oZW5kcG9pbnRJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IG9wdGlvbnMuaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgPyB5aWVsZCBzdG9yYWdlLnRyYW5zZm9ybUlucHV0KG9wdGlvbnMuaW5wdXQpXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmFsU3RyZWFtKGVuZHBvaW50SWQsIGNvbmZpZywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgeyBpbnB1dDogaW5wdXQgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmVhbWluZy5qcy5tYXAiXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiYWRvcHQiLCJ2YWx1ZSIsInJlc29sdmUiLCJQcm9taXNlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiX19hd2FpdCIsInYiLCJfX2FzeW5jR2VuZXJhdG9yIiwiU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsIlR5cGVFcnJvciIsImciLCJpIiwicSIsInZlcmIiLCJhd2FpdFJldHVybiIsImYiLCJuIiwiYSIsImIiLCJwdXNoIiwicmVzdW1lIiwic2V0dGxlIiwiciIsImZ1bGZpbGwiLCJzaGlmdCIsImxlbmd0aCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIkZhbFN0cmVhbSIsImNyZWF0ZVN0cmVhbWluZ0NsaWVudCIsImV2ZW50c291cmNlX3BhcnNlcl8xIiwicmVxdWlyZSIsImF1dGhfMSIsInJlcXVlc3RfMSIsInJlc3BvbnNlXzEiLCJDT05URU5UX1RZUEVfRVZFTlRfU1RSRUFNIiwiRVZFTlRfU1RSRUFNX1RJTUVPVVQiLCJjb25zdHJ1Y3RvciIsImVuZHBvaW50SWQiLCJjb25maWciLCJvcHRpb25zIiwiX2EiLCJsaXN0ZW5lcnMiLCJNYXAiLCJidWZmZXIiLCJjdXJyZW50RGF0YSIsInVuZGVmaW5lZCIsImxhc3RFdmVudFRpbWVzdGFtcCIsInN0cmVhbUNsb3NlZCIsImFib3J0Q29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInN0YXJ0IiwiX2IiLCJpbnB1dCIsIm1ldGhvZCIsImNvbm5lY3Rpb25Nb2RlIiwidG9rZW4iLCJnZXRUZW1wb3JhcnlBdXRoVG9rZW4iLCJmZXRjaCIsInBhcnNlZFVybCIsIlVSTCIsInVybCIsInNlYXJjaFBhcmFtcyIsInNldCIsInJlc3BvbnNlIiwidG9TdHJpbmciLCJ0b1VwcGVyQ2FzZSIsImhlYWRlcnMiLCJhY2NlcHQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNpZ25hbCIsImhhbmRsZVJlc3BvbnNlIiwiZGlzcGF0Y2hSZXF1ZXN0IiwidGFyZ2V0VXJsIiwicmVzcG9uc2VIYW5kbGVyIiwiZXJyb3IiLCJoYW5kbGVFcnJvciIsIm9rIiwiZGVmYXVsdFJlc3BvbnNlSGFuZGxlciIsImVtaXQiLCJBcGlFcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJpc0V2ZW50U3RyZWFtIiwiZ2V0Iiwic3RhcnRzV2l0aCIsInJlYWRlciIsImdldFJlYWRlciIsImVtaXRSYXdDaHVuayIsInJlYWQiLCJkZWNvZGVyIiwiVGV4dERlY29kZXIiLCJwYXJzZXIiLCJjcmVhdGVQYXJzZXIiLCJldmVudCIsInR5cGUiLCJkYXRhIiwicGFyc2VkRGF0YSIsInBhcnNlIiwidGltZW91dCIsInJlYWRQYXJ0aWFsUmVzcG9uc2UiLCJEYXRlIiwibm93IiwiZmVlZCIsImRlY29kZSIsInRvRml4ZWQiLCJjYXRjaCIsIm5hbWUiLCJhYm9ydGVkIiwiYXBpRXJyb3IiLCJvbiIsImxpc3RlbmVyIiwiaGFzIiwiZG9uZVByb21pc2UiLCJhYm9ydCIsInJlYXNvbiIsImJ1aWxkVXJsIiwicGF0aCIsInF1ZXJ5IiwicXVlcnlQYXJhbXMiLCJhZGRFdmVudExpc3RlbmVyIiwiYXJndW1lbnRzIiwicnVubmluZyIsInN0b3BBc3luY0l0ZXJhdG9yIiwic2V0VGltZW91dCIsInN0b3JhZ2UiLCJzdHJlYW0iLCJ0cmFuc2Zvcm1JbnB1dCIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/streaming.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/types/common.js":
/*!*********************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/types/common.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isQueueStatus = isQueueStatus;\nexports.isCompletedQueueStatus = isCompletedQueueStatus;\nfunction isQueueStatus(obj) {\n    return obj && obj.status && obj.response_url;\n}\nfunction isCompletedQueueStatus(obj) {\n    return isQueueStatus(obj) && obj.status === \"COMPLETED\";\n} //# sourceMappingURL=common.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3R5cGVzL2NvbW1vbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQscUJBQXFCLEdBQUdFO0FBQ3hCRiw4QkFBOEIsR0FBR0c7QUFDakMsU0FBU0QsY0FBY0UsR0FBRztJQUN0QixPQUFPQSxPQUFPQSxJQUFJQyxNQUFNLElBQUlELElBQUlFLFlBQVk7QUFDaEQ7QUFDQSxTQUFTSCx1QkFBdUJDLEdBQUc7SUFDL0IsT0FBT0YsY0FBY0UsUUFBUUEsSUFBSUMsTUFBTSxLQUFLO0FBQ2hELEVBQ0Esa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWVudS1nZW5lcmF0b3IvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3R5cGVzL2NvbW1vbi5qcz9kM2JhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc1F1ZXVlU3RhdHVzID0gaXNRdWV1ZVN0YXR1cztcbmV4cG9ydHMuaXNDb21wbGV0ZWRRdWV1ZVN0YXR1cyA9IGlzQ29tcGxldGVkUXVldWVTdGF0dXM7XG5mdW5jdGlvbiBpc1F1ZXVlU3RhdHVzKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgb2JqLnN0YXR1cyAmJiBvYmoucmVzcG9uc2VfdXJsO1xufVxuZnVuY3Rpb24gaXNDb21wbGV0ZWRRdWV1ZVN0YXR1cyhvYmopIHtcbiAgICByZXR1cm4gaXNRdWV1ZVN0YXR1cyhvYmopICYmIG9iai5zdGF0dXMgPT09IFwiQ09NUExFVEVEXCI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNRdWV1ZVN0YXR1cyIsImlzQ29tcGxldGVkUXVldWVTdGF0dXMiLCJvYmoiLCJzdGF0dXMiLCJyZXNwb25zZV91cmwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/types/common.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/src/utils.js":
/*!**************************************************!*\
  !*** ./node_modules/@fal-ai/client/src/utils.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ensureEndpointIdFormat = ensureEndpointIdFormat;\nexports.parseEndpointId = parseEndpointId;\nexports.isValidUrl = isValidUrl;\nexports.throttle = throttle;\nexports.isReact = isReact;\nexports.isPlainObject = isPlainObject;\nfunction ensureEndpointIdFormat(id) {\n    const parts = id.split(\"/\");\n    if (parts.length > 1) {\n        return id;\n    }\n    const [, appOwner, appId] = /^([0-9]+)-([a-zA-Z0-9-]+)$/.exec(id) || [];\n    if (appOwner && appId) {\n        return `${appOwner}/${appId}`;\n    }\n    throw new Error(`Invalid app id: ${id}. Must be in the format <appOwner>/<appId>`);\n}\nconst ENDPOINT_NAMESPACES = [\n    \"workflows\",\n    \"comfy\"\n];\nfunction parseEndpointId(id) {\n    const normalizedId = ensureEndpointIdFormat(id);\n    const parts = normalizedId.split(\"/\");\n    if (ENDPOINT_NAMESPACES.includes(parts[0])) {\n        return {\n            owner: parts[1],\n            alias: parts[2],\n            path: parts.slice(3).join(\"/\") || undefined,\n            namespace: parts[0]\n        };\n    }\n    return {\n        owner: parts[0],\n        alias: parts[1],\n        path: parts.slice(2).join(\"/\") || undefined\n    };\n}\nfunction isValidUrl(url) {\n    try {\n        const { host } = new URL(url);\n        return /(fal\\.(ai|run))$/.test(host);\n    } catch (_) {\n        return false;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction throttle(func, limit, leading = false) {\n    let lastFunc;\n    let lastRan;\n    return (...args)=>{\n        if (!lastRan && leading) {\n            func(...args);\n            lastRan = Date.now();\n        } else {\n            if (lastFunc) {\n                clearTimeout(lastFunc);\n            }\n            lastFunc = setTimeout(()=>{\n                if (Date.now() - lastRan >= limit) {\n                    func(...args);\n                    lastRan = Date.now();\n                }\n            }, limit - (Date.now() - lastRan));\n        }\n    };\n}\nlet isRunningInReact;\n/**\n * Not really the most optimal way to detect if we're running in React,\n * but the idea here is that we can support multiple rendering engines\n * (starting with React), with all their peculiarities, without having\n * to add a dependency or creating custom integrations (e.g. custom hooks).\n *\n * Yes, a bit of magic to make things works out-of-the-box.\n * @returns `true` if running in React, `false` otherwise.\n */ function isReact() {\n    if (isRunningInReact === undefined) {\n        const stack = new Error().stack;\n        isRunningInReact = !!stack && (stack.includes(\"node_modules/react-dom/\") || stack.includes(\"node_modules/next/\"));\n    }\n    return isRunningInReact;\n}\n/**\n * Check if a value is a plain object.\n * @param value - The value to check.\n * @returns `true` if the value is a plain object, `false` otherwise.\n */ function isPlainObject(value) {\n    return !!value && Object.getPrototypeOf(value) === Object.prototype;\n} //# sourceMappingURL=utils.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3V0aWxzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw4QkFBOEIsR0FBR0U7QUFDakNGLHVCQUF1QixHQUFHRztBQUMxQkgsa0JBQWtCLEdBQUdJO0FBQ3JCSixnQkFBZ0IsR0FBR0s7QUFDbkJMLGVBQWUsR0FBR007QUFDbEJOLHFCQUFxQixHQUFHTztBQUN4QixTQUFTTCx1QkFBdUJNLEVBQUU7SUFDOUIsTUFBTUMsUUFBUUQsR0FBR0UsS0FBSyxDQUFDO0lBQ3ZCLElBQUlELE1BQU1FLE1BQU0sR0FBRyxHQUFHO1FBQ2xCLE9BQU9IO0lBQ1g7SUFDQSxNQUFNLEdBQUdJLFVBQVVDLE1BQU0sR0FBRyw2QkFBNkJDLElBQUksQ0FBQ04sT0FBTyxFQUFFO0lBQ3ZFLElBQUlJLFlBQVlDLE9BQU87UUFDbkIsT0FBTyxDQUFDLEVBQUVELFNBQVMsQ0FBQyxFQUFFQyxNQUFNLENBQUM7SUFDakM7SUFDQSxNQUFNLElBQUlFLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRVAsR0FBRywwQ0FBMEMsQ0FBQztBQUNyRjtBQUNBLE1BQU1RLHNCQUFzQjtJQUFDO0lBQWE7Q0FBUTtBQUNsRCxTQUFTYixnQkFBZ0JLLEVBQUU7SUFDdkIsTUFBTVMsZUFBZWYsdUJBQXVCTTtJQUM1QyxNQUFNQyxRQUFRUSxhQUFhUCxLQUFLLENBQUM7SUFDakMsSUFBSU0sb0JBQW9CRSxRQUFRLENBQUNULEtBQUssQ0FBQyxFQUFFLEdBQUc7UUFDeEMsT0FBTztZQUNIVSxPQUFPVixLQUFLLENBQUMsRUFBRTtZQUNmVyxPQUFPWCxLQUFLLENBQUMsRUFBRTtZQUNmWSxNQUFNWixNQUFNYSxLQUFLLENBQUMsR0FBR0MsSUFBSSxDQUFDLFFBQVFDO1lBQ2xDQyxXQUFXaEIsS0FBSyxDQUFDLEVBQUU7UUFDdkI7SUFDSjtJQUNBLE9BQU87UUFDSFUsT0FBT1YsS0FBSyxDQUFDLEVBQUU7UUFDZlcsT0FBT1gsS0FBSyxDQUFDLEVBQUU7UUFDZlksTUFBTVosTUFBTWEsS0FBSyxDQUFDLEdBQUdDLElBQUksQ0FBQyxRQUFRQztJQUN0QztBQUNKO0FBQ0EsU0FBU3BCLFdBQVdzQixHQUFHO0lBQ25CLElBQUk7UUFDQSxNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHLElBQUlDLElBQUlGO1FBQ3pCLE9BQU8sbUJBQW1CRyxJQUFJLENBQUNGO0lBQ25DLEVBQ0EsT0FBT0csR0FBRztRQUNOLE9BQU87SUFDWDtBQUNKO0FBQ0EsOERBQThEO0FBQzlELFNBQVN6QixTQUFTMEIsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLFVBQVUsS0FBSztJQUMxQyxJQUFJQztJQUNKLElBQUlDO0lBQ0osT0FBTyxDQUFDLEdBQUdDO1FBQ1AsSUFBSSxDQUFDRCxXQUFXRixTQUFTO1lBQ3JCRixRQUFRSztZQUNSRCxVQUFVRSxLQUFLQyxHQUFHO1FBQ3RCLE9BQ0s7WUFDRCxJQUFJSixVQUFVO2dCQUNWSyxhQUFhTDtZQUNqQjtZQUNBQSxXQUFXTSxXQUFXO2dCQUNsQixJQUFJSCxLQUFLQyxHQUFHLEtBQUtILFdBQVdILE9BQU87b0JBQy9CRCxRQUFRSztvQkFDUkQsVUFBVUUsS0FBS0MsR0FBRztnQkFDdEI7WUFDSixHQUFHTixRQUFTSyxDQUFBQSxLQUFLQyxHQUFHLEtBQUtILE9BQU07UUFDbkM7SUFDSjtBQUNKO0FBQ0EsSUFBSU07QUFDSjs7Ozs7Ozs7Q0FRQyxHQUNELFNBQVNuQztJQUNMLElBQUltQyxxQkFBcUJqQixXQUFXO1FBQ2hDLE1BQU1rQixRQUFRLElBQUkzQixRQUFRMkIsS0FBSztRQUMvQkQsbUJBQ0ksQ0FBQyxDQUFDQyxTQUNHQSxDQUFBQSxNQUFNeEIsUUFBUSxDQUFDLDhCQUNad0IsTUFBTXhCLFFBQVEsQ0FBQyxxQkFBb0I7SUFDbkQ7SUFDQSxPQUFPdUI7QUFDWDtBQUNBOzs7O0NBSUMsR0FDRCxTQUFTbEMsY0FBY04sS0FBSztJQUN4QixPQUFPLENBQUMsQ0FBQ0EsU0FBU0gsT0FBTzZDLGNBQWMsQ0FBQzFDLFdBQVdILE9BQU84QyxTQUFTO0FBQ3ZFLEVBQ0EsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWVudS1nZW5lcmF0b3IvLi9ub2RlX21vZHVsZXMvQGZhbC1haS9jbGllbnQvc3JjL3V0aWxzLmpzPzkyZDUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmVuc3VyZUVuZHBvaW50SWRGb3JtYXQgPSBlbnN1cmVFbmRwb2ludElkRm9ybWF0O1xuZXhwb3J0cy5wYXJzZUVuZHBvaW50SWQgPSBwYXJzZUVuZHBvaW50SWQ7XG5leHBvcnRzLmlzVmFsaWRVcmwgPSBpc1ZhbGlkVXJsO1xuZXhwb3J0cy50aHJvdHRsZSA9IHRocm90dGxlO1xuZXhwb3J0cy5pc1JlYWN0ID0gaXNSZWFjdDtcbmV4cG9ydHMuaXNQbGFpbk9iamVjdCA9IGlzUGxhaW5PYmplY3Q7XG5mdW5jdGlvbiBlbnN1cmVFbmRwb2ludElkRm9ybWF0KGlkKSB7XG4gICAgY29uc3QgcGFydHMgPSBpZC5zcGxpdChcIi9cIik7XG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgICBjb25zdCBbLCBhcHBPd25lciwgYXBwSWRdID0gL14oWzAtOV0rKS0oW2EtekEtWjAtOS1dKykkLy5leGVjKGlkKSB8fCBbXTtcbiAgICBpZiAoYXBwT3duZXIgJiYgYXBwSWQpIHtcbiAgICAgICAgcmV0dXJuIGAke2FwcE93bmVyfS8ke2FwcElkfWA7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBhcHAgaWQ6ICR7aWR9LiBNdXN0IGJlIGluIHRoZSBmb3JtYXQgPGFwcE93bmVyPi88YXBwSWQ+YCk7XG59XG5jb25zdCBFTkRQT0lOVF9OQU1FU1BBQ0VTID0gW1wid29ya2Zsb3dzXCIsIFwiY29tZnlcIl07XG5mdW5jdGlvbiBwYXJzZUVuZHBvaW50SWQoaWQpIHtcbiAgICBjb25zdCBub3JtYWxpemVkSWQgPSBlbnN1cmVFbmRwb2ludElkRm9ybWF0KGlkKTtcbiAgICBjb25zdCBwYXJ0cyA9IG5vcm1hbGl6ZWRJZC5zcGxpdChcIi9cIik7XG4gICAgaWYgKEVORFBPSU5UX05BTUVTUEFDRVMuaW5jbHVkZXMocGFydHNbMF0pKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvd25lcjogcGFydHNbMV0sXG4gICAgICAgICAgICBhbGlhczogcGFydHNbMl0sXG4gICAgICAgICAgICBwYXRoOiBwYXJ0cy5zbGljZSgzKS5qb2luKFwiL1wiKSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICBuYW1lc3BhY2U6IHBhcnRzWzBdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBvd25lcjogcGFydHNbMF0sXG4gICAgICAgIGFsaWFzOiBwYXJ0c1sxXSxcbiAgICAgICAgcGF0aDogcGFydHMuc2xpY2UoMikuam9pbihcIi9cIikgfHwgdW5kZWZpbmVkLFxuICAgIH07XG59XG5mdW5jdGlvbiBpc1ZhbGlkVXJsKHVybCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgaG9zdCB9ID0gbmV3IFVSTCh1cmwpO1xuICAgICAgICByZXR1cm4gLyhmYWxcXC4oYWl8cnVuKSkkLy50ZXN0KGhvc3QpO1xuICAgIH1cbiAgICBjYXRjaCAoXykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIGxpbWl0LCBsZWFkaW5nID0gZmFsc2UpIHtcbiAgICBsZXQgbGFzdEZ1bmM7XG4gICAgbGV0IGxhc3RSYW47XG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGlmICghbGFzdFJhbiAmJiBsZWFkaW5nKSB7XG4gICAgICAgICAgICBmdW5jKC4uLmFyZ3MpO1xuICAgICAgICAgICAgbGFzdFJhbiA9IERhdGUubm93KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobGFzdEZ1bmMpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobGFzdEZ1bmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdEZ1bmMgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIGxhc3RSYW4gPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuYyguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJhbiA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgbGltaXQgLSAoRGF0ZS5ub3coKSAtIGxhc3RSYW4pKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5sZXQgaXNSdW5uaW5nSW5SZWFjdDtcbi8qKlxuICogTm90IHJlYWxseSB0aGUgbW9zdCBvcHRpbWFsIHdheSB0byBkZXRlY3QgaWYgd2UncmUgcnVubmluZyBpbiBSZWFjdCxcbiAqIGJ1dCB0aGUgaWRlYSBoZXJlIGlzIHRoYXQgd2UgY2FuIHN1cHBvcnQgbXVsdGlwbGUgcmVuZGVyaW5nIGVuZ2luZXNcbiAqIChzdGFydGluZyB3aXRoIFJlYWN0KSwgd2l0aCBhbGwgdGhlaXIgcGVjdWxpYXJpdGllcywgd2l0aG91dCBoYXZpbmdcbiAqIHRvIGFkZCBhIGRlcGVuZGVuY3kgb3IgY3JlYXRpbmcgY3VzdG9tIGludGVncmF0aW9ucyAoZS5nLiBjdXN0b20gaG9va3MpLlxuICpcbiAqIFllcywgYSBiaXQgb2YgbWFnaWMgdG8gbWFrZSB0aGluZ3Mgd29ya3Mgb3V0LW9mLXRoZS1ib3guXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgcnVubmluZyBpbiBSZWFjdCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzUmVhY3QoKSB7XG4gICAgaWYgKGlzUnVubmluZ0luUmVhY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBzdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgICAgICBpc1J1bm5pbmdJblJlYWN0ID1cbiAgICAgICAgICAgICEhc3RhY2sgJiZcbiAgICAgICAgICAgICAgICAoc3RhY2suaW5jbHVkZXMoXCJub2RlX21vZHVsZXMvcmVhY3QtZG9tL1wiKSB8fFxuICAgICAgICAgICAgICAgICAgICBzdGFjay5pbmNsdWRlcyhcIm5vZGVfbW9kdWxlcy9uZXh0L1wiKSk7XG4gICAgfVxuICAgIHJldHVybiBpc1J1bm5pbmdJblJlYWN0O1xufVxuLyoqXG4gKiBDaGVjayBpZiBhIHZhbHVlIGlzIGEgcGxhaW4gb2JqZWN0LlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZSBpcyBhIHBsYWluIG9iamVjdCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZSAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpID09PSBPYmplY3QucHJvdG90eXBlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZW5zdXJlRW5kcG9pbnRJZEZvcm1hdCIsInBhcnNlRW5kcG9pbnRJZCIsImlzVmFsaWRVcmwiLCJ0aHJvdHRsZSIsImlzUmVhY3QiLCJpc1BsYWluT2JqZWN0IiwiaWQiLCJwYXJ0cyIsInNwbGl0IiwibGVuZ3RoIiwiYXBwT3duZXIiLCJhcHBJZCIsImV4ZWMiLCJFcnJvciIsIkVORFBPSU5UX05BTUVTUEFDRVMiLCJub3JtYWxpemVkSWQiLCJpbmNsdWRlcyIsIm93bmVyIiwiYWxpYXMiLCJwYXRoIiwic2xpY2UiLCJqb2luIiwidW5kZWZpbmVkIiwibmFtZXNwYWNlIiwidXJsIiwiaG9zdCIsIlVSTCIsInRlc3QiLCJfIiwiZnVuYyIsImxpbWl0IiwibGVhZGluZyIsImxhc3RGdW5jIiwibGFzdFJhbiIsImFyZ3MiLCJEYXRlIiwibm93IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImlzUnVubmluZ0luUmVhY3QiLCJzdGFjayIsImdldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@fal-ai/client/src/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@fal-ai/client/package.json":
/*!**************************************************!*\
  !*** ./node_modules/@fal-ai/client/package.json ***!
  \**************************************************/
/***/ ((module) => {

module.exports = JSON.parse('{"name":"@fal-ai/client","description":"The fal.ai client for JavaScript and TypeScript","version":"1.2.1","license":"MIT","repository":{"type":"git","url":"https://github.com/fal-ai/fal-js.git","directory":"libs/client"},"keywords":["fal","client","ai","ml","typescript"],"exports":{".":"./src/index.js","./endpoints":"./src/types/endpoints.js"},"typesVersions":{"*":{"endpoints":["src/types/endpoints.d.ts"]}},"main":"./src/index.js","types":"./src/index.d.ts","dependencies":{"@msgpack/msgpack":"^3.0.0-beta2","eventsource-parser":"^1.1.2","robot3":"^0.4.1"},"engines":{"node":">=18.0.0"},"type":"commonjs"}');

/***/ })

};
;