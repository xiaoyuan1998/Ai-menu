"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze-image/route";
exports.ids = ["app/api/analyze-image/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_1989c_Downloads_ai_menu_generator_ai_menu_generator_app_api_analyze_image_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/analyze-image/route.ts */ \"(rsc)/./app/api/analyze-image/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze-image/route\",\n        pathname: \"/api/analyze-image\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze-image/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\1989c\\\\Downloads\\\\ai-menu-generator\\\\ai-menu-generator\\\\app\\\\api\\\\analyze-image\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_1989c_Downloads_ai_menu_generator_ai_menu_generator_app_api_analyze_image_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/analyze-image/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplLWltYWdlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplLWltYWdlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZS1pbWFnZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUMxOTg5YyU1Q0Rvd25sb2FkcyU1Q2FpLW1lbnUtZ2VuZXJhdG9yJTVDYWktbWVudS1nZW5lcmF0b3IlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1QzE5ODljJTVDRG93bmxvYWRzJTVDYWktbWVudS1nZW5lcmF0b3IlNUNhaS1tZW51LWdlbmVyYXRvciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvRDtBQUNqSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1lbnUtZ2VuZXJhdG9yLz8yM2I5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXDE5ODljXFxcXERvd25sb2Fkc1xcXFxhaS1tZW51LWdlbmVyYXRvclxcXFxhaS1tZW51LWdlbmVyYXRvclxcXFxhcHBcXFxcYXBpXFxcXGFuYWx5emUtaW1hZ2VcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FuYWx5emUtaW1hZ2Uvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbmFseXplLWltYWdlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbmFseXplLWltYWdlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcMTk4OWNcXFxcRG93bmxvYWRzXFxcXGFpLW1lbnUtZ2VuZXJhdG9yXFxcXGFpLW1lbnUtZ2VuZXJhdG9yXFxcXGFwcFxcXFxhcGlcXFxcYW5hbHl6ZS1pbWFnZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hbmFseXplLWltYWdlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analyze-image/route.ts":
/*!****************************************!*\
  !*** ./app/api/analyze-image/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\n\n\n// 创建 OpenRouter 客户端\nconst openrouter = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    baseURL: \"https://openrouter.ai/api/v1\",\n    apiKey: process.env.OPENROUTER_API_KEY,\n    defaultHeaders: {\n        \"HTTP-Referer\": process.env.APP_URL || \"http://localhost:3000\",\n        \"X-Title\": \"AI-Menu-Generator\"\n    }\n});\n// 定义菜品的 schema\nconst DishSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    dishes: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n        type: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n        description: zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n    }))\n});\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY = 1000;\n// 延迟函数\nconst delay = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nasync function POST(req) {\n    console.log(\"Starting image analysis\");\n    try {\n        console.log(\"Reading form data\");\n        const formData = await req.formData();\n        const image = formData.get(\"image\");\n        if (!image) {\n            console.log(\"Error: No image provided\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No image provided\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"Image info:\", {\n            name: image.name,\n            type: image.type,\n            size: image.size\n        });\n        const imageBuffer = await image.arrayBuffer();\n        const base64Image = Buffer.from(imageBuffer).toString(\"base64\");\n        const requestData = {\n            model: \"openai/gpt-4o-mini\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: '这是一个饭店的菜单。请提取菜单中的菜品名称，并以JSON格式返回结果。返回格式必须是: {\"dishes\": [{\"name\": \"菜品名称\", \"type\": \"菜品类型\", \"description\": \"描述\"}]}。确保返回的是有效的JSON格式。'\n                },\n                {\n                    role: \"user\",\n                    content: [\n                        {\n                            type: \"text\",\n                            text: \"请分析这张图片中的所有菜品，列出它们的名称、类型和描述。必须返回JSON格式。\"\n                        },\n                        {\n                            type: \"image_url\",\n                            image_url: {\n                                url: `data:${image.type || \"image/jpeg\"};base64,${base64Image}`\n                            }\n                        }\n                    ]\n                }\n            ],\n            temperature: 0.7,\n            max_tokens: 1000\n        };\n        let lastError = null;\n        for(let attempt = 1; attempt <= MAX_RETRIES; attempt++){\n            try {\n                console.log(`API request attempt ${attempt}/${MAX_RETRIES}`);\n                console.log(\"Request data:\", JSON.stringify(requestData, null, 2));\n                const response = await openrouter.chat.completions.create({\n                    ...requestData,\n                    stream: false,\n                    headers: {\n                        \"HTTP-Referer\": process.env.APP_URL || \"http://localhost:3000\",\n                        \"X-Title\": \"AI-Menu-Generator\"\n                    }\n                });\n                // 打印原始响应信息\n                console.log(\"Complete API Response:\", JSON.stringify(response, null, 2));\n                if (response.error) {\n                    console.error(\"API returned error:\", response.error);\n                    throw new Error(`API error: ${response.error.message || \"Unknown error\"}`);\n                }\n                console.log(\"API Response:\", {\n                    status: response.choices?.length ? \"has choices\" : \"no choices\",\n                    model: response.model,\n                    usage: response.usage,\n                    object: response.object,\n                    created: response.created\n                });\n                if (!response.choices || response.choices.length === 0) {\n                    console.error(\"API Error Response:\", {\n                        status: \"no choices\",\n                        statusText: \"No choices in response\",\n                        error: \"No choices in response\"\n                    });\n                    throw new Error(\"No choices in response\");\n                }\n                const content = response.choices[0].message?.content;\n                if (!content) {\n                    console.error(\"API Error Response:\", {\n                        status: \"no content\",\n                        statusText: \"No content in response\",\n                        error: \"No content in response\"\n                    });\n                    throw new Error(\"No content in response\");\n                }\n                console.log(\"Raw response content:\", content);\n                try {\n                    // 提取 JSON 字符串\n                    console.log(\"Extracting JSON from response\");\n                    const jsonMatch = content.match(/\\{[\\s\\S]*\\}/);\n                    if (!jsonMatch) {\n                        console.error(\"No JSON pattern found in content\");\n                        throw new Error(\"No JSON found in response\");\n                    }\n                    // 解析 JSON\n                    console.log(\"Parsing JSON\");\n                    const parsedContent = JSON.parse(jsonMatch[0]);\n                    console.log(\"Parsed content:\", parsedContent);\n                    // 验证数据结构\n                    console.log(\"Validating data structure\");\n                    const validatedData = DishSchema.parse(parsedContent);\n                    console.log(\"Validation successful\");\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(validatedData);\n                } catch (e) {\n                    console.error(\"Failed to parse or validate JSON response:\", e);\n                    console.error(\"Content that failed to parse:\", content);\n                    throw e;\n                }\n            } catch (error) {\n                lastError = error;\n                console.error(`Attempt ${attempt} failed:`, error);\n                if (attempt < MAX_RETRIES) {\n                    console.log(`Waiting ${RETRY_DELAY}ms before next attempt...`);\n                    await delay(RETRY_DELAY);\n                }\n            }\n        }\n        throw lastError;\n    } catch (error) {\n        console.error(\"Error analyzing image:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to analyze image\",\n            details: error.message || \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTtvQkFDbEI7b0JBRUEsVUFBVTtvQkFDVm5DLFFBQVFDLEdBQUcsQ0FBQztvQkFDWixNQUFNMkMsZ0JBQWdCakIsS0FBS2tCLEtBQUssQ0FBQ0gsU0FBUyxDQUFDLEVBQUU7b0JBQzdDMUMsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQjJDO29CQUUvQixTQUFTO29CQUNUNUMsUUFBUUMsR0FBRyxDQUFDO29CQUNaLE1BQU02QyxnQkFBZ0IvRCxXQUFXOEQsS0FBSyxDQUFDRDtvQkFDdkM1QyxRQUFRQyxHQUFHLENBQUM7b0JBRVosT0FBTzdCLGtGQUFZQSxDQUFDaUMsSUFBSSxDQUFDeUM7Z0JBQzNCLEVBQUUsT0FBT0MsR0FBRztvQkFDVi9DLFFBQVFNLEtBQUssQ0FBQyw4Q0FBOEN5QztvQkFDNUQvQyxRQUFRTSxLQUFLLENBQUMsaUNBQWlDYTtvQkFDL0MsTUFBTTRCO2dCQUNSO1lBQ0YsRUFBRSxPQUFPekMsT0FBTztnQkFDZG1CLFlBQVluQjtnQkFDWk4sUUFBUU0sS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFFb0IsUUFBUSxRQUFRLENBQUMsRUFBRXBCO2dCQUU1QyxJQUFJb0IsVUFBVW5DLGFBQWE7b0JBQ3pCUyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUVULFlBQVkseUJBQXlCLENBQUM7b0JBQzdELE1BQU1DLE1BQU1EO2dCQUNkO1lBQ0Y7UUFDRjtRQUVBLE1BQU1pQztJQUNSLEVBQUUsT0FBT25CLE9BQVk7UUFDbkJOLFFBQVFNLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU9sQyxrRkFBWUEsQ0FBQ2lDLElBQUksQ0FBQztZQUN2QkMsT0FBTztZQUNQMEMsU0FBUzFDLE1BQU04QixPQUFPLElBQUk7UUFDNUIsR0FBRztZQUFFN0IsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tZW51LWdlbmVyYXRvci8uL2FwcC9hcGkvYW5hbHl6ZS1pbWFnZS9yb3V0ZS50cz80YjQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuXG4vLyDliJvlu7ogT3BlblJvdXRlciDlrqLmiLfnq69cbmNvbnN0IG9wZW5yb3V0ZXIgPSBuZXcgT3BlbkFJKHtcbiAgYmFzZVVSTDogXCJodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxXCIsXG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUElfS0VZISxcbiAgZGVmYXVsdEhlYWRlcnM6IHtcbiAgICBcIkhUVFAtUmVmZXJlclwiOiBwcm9jZXNzLmVudi5BUFBfVVJMIHx8IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIsXG4gICAgXCJYLVRpdGxlXCI6IFwiQUktTWVudS1HZW5lcmF0b3JcIlxuICB9XG59KVxuXG4vLyDlrprkuYnoj5zlk4HnmoQgc2NoZW1hXG5jb25zdCBEaXNoU2NoZW1hID0gei5vYmplY3Qoe1xuICBkaXNoZXM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgdHlwZTogei5zdHJpbmcoKSxcbiAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKVxuICB9KSlcbn0pXG5cbmNvbnN0IE1BWF9SRVRSSUVTID0gM1xuY29uc3QgUkVUUllfREVMQVkgPSAxMDAwXG5cbi8vIOW7tui/n+WHveaVsFxuY29uc3QgZGVsYXkgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSlcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIGNvbnNvbGUubG9nKCdTdGFydGluZyBpbWFnZSBhbmFseXNpcycpXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1JlYWRpbmcgZm9ybSBkYXRhJylcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcS5mb3JtRGF0YSgpXG4gICAgY29uc3QgaW1hZ2UgPSBmb3JtRGF0YS5nZXQoJ2ltYWdlJykgYXMgRmlsZVxuXG4gICAgaWYgKCFpbWFnZSkge1xuICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiBObyBpbWFnZSBwcm92aWRlZCcpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ05vIGltYWdlIHByb3ZpZGVkJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0ltYWdlIGluZm86Jywge1xuICAgICAgbmFtZTogaW1hZ2UubmFtZSxcbiAgICAgIHR5cGU6IGltYWdlLnR5cGUsXG4gICAgICBzaXplOiBpbWFnZS5zaXplXG4gICAgfSlcblxuICAgIGNvbnN0IGltYWdlQnVmZmVyID0gYXdhaXQgaW1hZ2UuYXJyYXlCdWZmZXIoKVxuICAgIGNvbnN0IGJhc2U2NEltYWdlID0gQnVmZmVyLmZyb20oaW1hZ2VCdWZmZXIpLnRvU3RyaW5nKCdiYXNlNjQnKVxuICBcbiAgICBjb25zdCByZXF1ZXN0RGF0YSA9IHtcbiAgICAgIG1vZGVsOiBcIm9wZW5haS9ncHQtNG8tbWluaVwiLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICAgIGNvbnRlbnQ6ICfov5nmmK/kuIDkuKrppa3lupfnmoToj5zljZXjgILor7fmj5Dlj5boj5zljZXkuK3nmoToj5zlk4HlkI3np7DvvIzlubbku6VKU09O5qC85byP6L+U5Zue57uT5p6c44CC6L+U5Zue5qC85byP5b+F6aG75pivOiB7XCJkaXNoZXNcIjogW3tcIm5hbWVcIjogXCLoj5zlk4HlkI3np7BcIiwgXCJ0eXBlXCI6IFwi6I+c5ZOB57G75Z6LXCIsIFwiZGVzY3JpcHRpb25cIjogXCLmj4/ov7BcIn1dfeOAguehruS/nei/lOWbnueahOaYr+acieaViOeahEpTT07moLzlvI/jgIInXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLCBcbiAgICAgICAgICAgICAgdGV4dDogJ+ivt+WIhuaekOi/meW8oOWbvueJh+S4reeahOaJgOacieiPnOWTge+8jOWIl+WHuuWug+S7rOeahOWQjeensOOAgeexu+Wei+WSjOaPj+i/sOOAguW/hemhu+i/lOWbnkpTT07moLzlvI/jgIInIFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgIHR5cGU6ICdpbWFnZV91cmwnLCBcbiAgICAgICAgICAgICAgaW1hZ2VfdXJsOiB7IFxuICAgICAgICAgICAgICAgIHVybDogYGRhdGE6JHtpbWFnZS50eXBlIHx8ICdpbWFnZS9qcGVnJ307YmFzZTY0LCR7YmFzZTY0SW1hZ2V9YFxuICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICBtYXhfdG9rZW5zOiAxMDAwXG4gICAgfVxuXG4gICAgbGV0IGxhc3RFcnJvciA9IG51bGxcblxuICAgIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IE1BWF9SRVRSSUVTOyBhdHRlbXB0KyspIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBBUEkgcmVxdWVzdCBhdHRlbXB0ICR7YXR0ZW1wdH0vJHtNQVhfUkVUUklFU31gKVxuICAgICAgICBjb25zb2xlLmxvZygnUmVxdWVzdCBkYXRhOicsIEpTT04uc3RyaW5naWZ5KHJlcXVlc3REYXRhLCBudWxsLCAyKSlcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbnJvdXRlci5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICAgICAgLi4ucmVxdWVzdERhdGEsXG4gICAgICAgICAgc3RyZWFtOiBmYWxzZSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnSFRUUC1SZWZlcmVyJzogcHJvY2Vzcy5lbnYuQVBQX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyxcbiAgICAgICAgICAgICdYLVRpdGxlJzogJ0FJLU1lbnUtR2VuZXJhdG9yJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAvLyDmiZPljbDljp/lp4vlk43lupTkv6Hmga9cbiAgICAgICAgY29uc29sZS5sb2coJ0NvbXBsZXRlIEFQSSBSZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZSwgbnVsbCwgMikpXG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBUEkgcmV0dXJuZWQgZXJyb3I6JywgcmVzcG9uc2UuZXJyb3IpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ0FQSSBSZXNwb25zZTonLCB7XG4gICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5jaG9pY2VzPy5sZW5ndGggPyAnaGFzIGNob2ljZXMnIDogJ25vIGNob2ljZXMnLFxuICAgICAgICAgIG1vZGVsOiByZXNwb25zZS5tb2RlbCxcbiAgICAgICAgICB1c2FnZTogcmVzcG9uc2UudXNhZ2UsXG4gICAgICAgICAgb2JqZWN0OiByZXNwb25zZS5vYmplY3QsXG4gICAgICAgICAgY3JlYXRlZDogcmVzcG9uc2UuY3JlYXRlZFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICghcmVzcG9uc2UuY2hvaWNlcyB8fCByZXNwb25zZS5jaG9pY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBFcnJvciBSZXNwb25zZTonLCB7XG4gICAgICAgICAgICBzdGF0dXM6ICdubyBjaG9pY2VzJyxcbiAgICAgICAgICAgIHN0YXR1c1RleHQ6ICdObyBjaG9pY2VzIGluIHJlc3BvbnNlJyxcbiAgICAgICAgICAgIGVycm9yOiAnTm8gY2hvaWNlcyBpbiByZXNwb25zZSdcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY2hvaWNlcyBpbiByZXNwb25zZScpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZW50ID0gcmVzcG9uc2UuY2hvaWNlc1swXS5tZXNzYWdlPy5jb250ZW50XG4gICAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBFcnJvciBSZXNwb25zZTonLCB7XG4gICAgICAgICAgICBzdGF0dXM6ICdubyBjb250ZW50JyxcbiAgICAgICAgICAgIHN0YXR1c1RleHQ6ICdObyBjb250ZW50IGluIHJlc3BvbnNlJyxcbiAgICAgICAgICAgIGVycm9yOiAnTm8gY29udGVudCBpbiByZXNwb25zZSdcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29udGVudCBpbiByZXNwb25zZScpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnUmF3IHJlc3BvbnNlIGNvbnRlbnQ6JywgY29udGVudClcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIOaPkOWPliBKU09OIOWtl+espuS4slxuICAgICAgICAgIGNvbnNvbGUubG9nKCdFeHRyYWN0aW5nIEpTT04gZnJvbSByZXNwb25zZScpXG4gICAgICAgICAgY29uc3QganNvbk1hdGNoID0gY29udGVudC5tYXRjaCgvXFx7W1xcc1xcU10qXFx9LylcbiAgICAgICAgICBpZiAoIWpzb25NYXRjaCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gSlNPTiBwYXR0ZXJuIGZvdW5kIGluIGNvbnRlbnQnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBKU09OIGZvdW5kIGluIHJlc3BvbnNlJylcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8g6Kej5p6QIEpTT05cbiAgICAgICAgICBjb25zb2xlLmxvZygnUGFyc2luZyBKU09OJylcbiAgICAgICAgICBjb25zdCBwYXJzZWRDb250ZW50ID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pXG4gICAgICAgICAgY29uc29sZS5sb2coJ1BhcnNlZCBjb250ZW50OicsIHBhcnNlZENvbnRlbnQpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8g6aqM6K+B5pWw5o2u57uT5p6EXG4gICAgICAgICAgY29uc29sZS5sb2coJ1ZhbGlkYXRpbmcgZGF0YSBzdHJ1Y3R1cmUnKVxuICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSBEaXNoU2NoZW1hLnBhcnNlKHBhcnNlZENvbnRlbnQpXG4gICAgICAgICAgY29uc29sZS5sb2coJ1ZhbGlkYXRpb24gc3VjY2Vzc2Z1bCcpXG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHZhbGlkYXRlZERhdGEpXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2Ugb3IgdmFsaWRhdGUgSlNPTiByZXNwb25zZTonLCBlKVxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnRlbnQgdGhhdCBmYWlsZWQgdG8gcGFyc2U6JywgY29udGVudClcbiAgICAgICAgICB0aHJvdyBlXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxhc3RFcnJvciA9IGVycm9yXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEF0dGVtcHQgJHthdHRlbXB0fSBmYWlsZWQ6YCwgZXJyb3IpXG4gICAgICAgIFxuICAgICAgICBpZiAoYXR0ZW1wdCA8IE1BWF9SRVRSSUVTKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFdhaXRpbmcgJHtSRVRSWV9ERUxBWX1tcyBiZWZvcmUgbmV4dCBhdHRlbXB0Li4uYClcbiAgICAgICAgICBhd2FpdCBkZWxheShSRVRSWV9ERUxBWSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IGxhc3RFcnJvclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYW5hbHl6aW5nIGltYWdlOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gYW5hbHl6ZSBpbWFnZScsXG4gICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ1xuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk9wZW5BSSIsInoiLCJvcGVucm91dGVyIiwiYmFzZVVSTCIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOUk9VVEVSX0FQSV9LRVkiLCJkZWZhdWx0SGVhZGVycyIsIkFQUF9VUkwiLCJEaXNoU2NoZW1hIiwib2JqZWN0IiwiZGlzaGVzIiwiYXJyYXkiLCJuYW1lIiwic3RyaW5nIiwidHlwZSIsImRlc2NyaXB0aW9uIiwiTUFYX1JFVFJJRVMiLCJSRVRSWV9ERUxBWSIsImRlbGF5IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJQT1NUIiwicmVxIiwiY29uc29sZSIsImxvZyIsImZvcm1EYXRhIiwiaW1hZ2UiLCJnZXQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzaXplIiwiaW1hZ2VCdWZmZXIiLCJhcnJheUJ1ZmZlciIsImJhc2U2NEltYWdlIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwicmVxdWVzdERhdGEiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZXh0IiwiaW1hZ2VfdXJsIiwidXJsIiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwibGFzdEVycm9yIiwiYXR0ZW1wdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNwb25zZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsInN0cmVhbSIsImhlYWRlcnMiLCJFcnJvciIsIm1lc3NhZ2UiLCJjaG9pY2VzIiwibGVuZ3RoIiwidXNhZ2UiLCJjcmVhdGVkIiwic3RhdHVzVGV4dCIsImpzb25NYXRjaCIsIm1hdGNoIiwicGFyc2VkQ29udGVudCIsInBhcnNlIiwidmFsaWRhdGVkRGF0YSIsImUiLCJkZXRhaWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analyze-image/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/whatwg-url","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/form-data-encoder","vendor-chunks/webidl-conversions","vendor-chunks/abort-controller","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-image%2Froute&page=%2Fapi%2Fanalyze-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-image%2Froute.ts&appDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();