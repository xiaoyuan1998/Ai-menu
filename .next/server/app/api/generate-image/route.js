"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-image/route";
exports.ids = ["app/api/generate-image/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-image%2Froute&page=%2Fapi%2Fgenerate-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-image%2Froute.ts&appDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-image%2Froute&page=%2Fapi%2Fgenerate-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-image%2Froute.ts&appDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_1989c_Downloads_ai_menu_generator_ai_menu_generator_app_api_generate_image_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-image/route.ts */ \"(rsc)/./app/api/generate-image/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-image/route\",\n        pathname: \"/api/generate-image\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-image/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\1989c\\\\Downloads\\\\ai-menu-generator\\\\ai-menu-generator\\\\app\\\\api\\\\generate-image\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_1989c_Downloads_ai_menu_generator_ai_menu_generator_app_api_generate_image_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/generate-image/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1pbWFnZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUtaW1hZ2UlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZnZW5lcmF0ZS1pbWFnZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUMxOTg5YyU1Q0Rvd25sb2FkcyU1Q2FpLW1lbnUtZ2VuZXJhdG9yJTVDYWktbWVudS1nZW5lcmF0b3IlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1QzE5ODljJTVDRG93bmxvYWRzJTVDYWktbWVudS1nZW5lcmF0b3IlNUNhaS1tZW51LWdlbmVyYXRvciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNxRDtBQUNsSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLW1lbnUtZ2VuZXJhdG9yLz80OTg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXDE5ODljXFxcXERvd25sb2Fkc1xcXFxhaS1tZW51LWdlbmVyYXRvclxcXFxhaS1tZW51LWdlbmVyYXRvclxcXFxhcHBcXFxcYXBpXFxcXGdlbmVyYXRlLWltYWdlXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1pbWFnZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlLWltYWdlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5lcmF0ZS1pbWFnZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXDE5ODljXFxcXERvd25sb2Fkc1xcXFxhaS1tZW51LWdlbmVyYXRvclxcXFxhaS1tZW51LWdlbmVyYXRvclxcXFxhcHBcXFxcYXBpXFxcXGdlbmVyYXRlLWltYWdlXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2dlbmVyYXRlLWltYWdlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-image%2Froute&page=%2Fapi%2Fgenerate-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-image%2Froute.ts&appDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-image/route.ts":
/*!*****************************************!*\
  !*** ./app/api/generate-image/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _fal_ai_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @fal-ai/client */ \"(rsc)/./node_modules/@fal-ai/client/src/index.js\");\n/* harmony import */ var _fal_ai_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_fal_ai_client__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_prompts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prompts */ \"(rsc)/./lib/prompts.ts\");\n\n\n\n\n// 创建 OpenRouter 客户端用于生成描述\nconst openrouter = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    baseURL: \"https://openrouter.ai/api/v1\",\n    apiKey: process.env.OPENROUTER_API_KEY,\n    defaultHeaders: {\n        \"HTTP-Referer\": process.env.APP_URL || \"http://localhost:3000\",\n        \"X-Title\": \"AI-Menu-Generator\"\n    }\n});\n// 配置 FAL.AI 客户端\n_fal_ai_client__WEBPACK_IMPORTED_MODULE_1__.fal.config({\n    credentials: process.env.FAL_API_KEY\n});\nasync function generateImageWithFalAi(prompt) {\n    console.log(\"Generating image with prompt:\", prompt);\n    try {\n        const result = await _fal_ai_client__WEBPACK_IMPORTED_MODULE_1__.fal.subscribe(\"fal-ai/fast-sdxl\", {\n            input: {\n                prompt: prompt,\n                negative_prompt: \"blurry, bad quality, distorted, deformed\",\n                num_inference_steps: 50,\n                guidance_scale: 7.5,\n                image_size: {\n                    width: 1024,\n                    height: 1024\n                }\n            },\n            pollInterval: 1000,\n            logs: true\n        });\n        console.log(\"Fal.AI API response:\", JSON.stringify(result, null, 2));\n        return {\n            images: [\n                {\n                    url: result.data.images[0].url,\n                    seed: result.data.seed,\n                    mimeType: result.data.images[0].content_type || \"image/jpeg\"\n                }\n            ],\n            model: \"fast-sdxl\",\n            prompt: prompt\n        };\n    } catch (error) {\n        console.error(\"Error in image generation:\", error);\n        // 检查是否是余额不足错误\n        if (error?.body?.detail?.includes(\"Exhausted balance\")) {\n            throw new Error(\"Image generation service is temporarily unavailable due to API limits. Please try again later.\");\n        }\n        // 其他错误\n        throw new Error(`Failed to generate image: ${error.message || \"Unknown error\"}`);\n    }\n}\nasync function POST(req) {\n    console.log(\"Starting POST request processing\");\n    const startTime = Date.now();\n    try {\n        console.log(\"Reading request body\");\n        const { name, language = \"en-us\" } = await req.json();\n        console.log(\"Request body:\", {\n            name,\n            language\n        });\n        if (!name) {\n            console.log(\"Error: No dish name provided\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No dish name provided\"\n            }, {\n                status: 400\n            });\n        }\n        const prompts = (0,_lib_prompts__WEBPACK_IMPORTED_MODULE_2__.getPrompt)(language);\n        console.log(\"Step 1: Generating description for:\", name);\n        const descriptionResponse = await openrouter.chat.completions.create({\n            model: \"openai/gpt-3.5-turbo\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: prompts.system\n                },\n                {\n                    role: \"user\",\n                    content: prompts.user(name)\n                }\n            ],\n            temperature: 0.7,\n            max_tokens: 500\n        });\n        console.log(\"Step 2: Processing description response\");\n        console.log(\"Description response:\", JSON.stringify(descriptionResponse, null, 2));\n        const imageDescription = descriptionResponse.choices?.[0]?.message?.content || \"\";\n        // 清理描述文本，移除任何markdown格式和额外的对话内容\n        const cleanDescription = imageDescription.replace(/!\\[.*?\\]\\(.*?\\)/g, \"\") // 移除markdown图片\n        .replace(/```.*?```/gs, \"\") // 移除代码块\n        .replace(/\\[.*?\\]/g, \"\") // 移除方括号内容\n        .replace(/https?:\\/\\/\\S+/g, \"\") // 移除URL\n        .replace(/\\n+/g, \" \") // 将多个换行替换为空格\n        .trim();\n        // 添加通用的摄影参数\n        const finalPrompt = `A professional food photograph of ${cleanDescription}. Shot with a high-end DSLR camera, using natural lighting, shallow depth of field (f/2.8), and styled for a luxury restaurant menu. 8K resolution, hyperrealistic details, professional food photography composition.`;\n        console.log(\"Step 3: Creating final prompt\");\n        console.log(\"Final prompt:\", finalPrompt);\n        console.log(\"Step 4: Generating image\");\n        const imageResult = await generateImageWithFalAi(finalPrompt);\n        console.log(\"Image generation result:\", JSON.stringify(imageResult, null, 2));\n        console.log(\"Step 5: Preparing response\");\n        console.log(\"Time elapsed:\", Date.now() - startTime, \"ms\");\n        // 创建响应对象，直接使用 Fal.AI URL\n        const responseData = {\n            ...imageResult,\n            imageUrl: imageResult.images[0].url,\n            model: \"flux-pro-v1.1-ultra\",\n            generationTime: Date.now() - startTime\n        };\n        console.log(\"Final response data:\", JSON.stringify(responseData, null, 2));\n        // 使用 NextResponse.json() 创建响应\n        const response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(responseData);\n        console.log(\"Response headers:\", Object.fromEntries(response.headers.entries()));\n        console.log(\"Step 6: Sending response\");\n        return response;\n    } catch (error) {\n        console.error(\"Error in request processing:\", error);\n        console.error(\"Error stack:\", error.stack);\n        console.log(\"Time elapsed before error:\", Date.now() - startTime, \"ms\");\n        // 准备错误消息\n        let errorMessage = \"Error in image generation process\";\n        let statusCode = 500;\n        if (error.message.includes(\"API limits\")) {\n            errorMessage = error.message;\n            statusCode = 503 // Service Unavailable\n            ;\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: errorMessage,\n            details: error.message,\n            timestamp: new Date().toISOString(),\n            processingTime: Date.now() - startTime\n        }, {\n            status: statusCode,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLWltYWdlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEwQztBQUNmO0FBQ1M7QUFDSztBQUV6QywwQkFBMEI7QUFDMUIsTUFBTUksYUFBYSxJQUFJSCw4Q0FBTUEsQ0FBQztJQUM1QkksU0FBUztJQUNUQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGtCQUFrQjtJQUN0Q0MsZ0JBQWdCO1FBQ2QsZ0JBQWdCSCxRQUFRQyxHQUFHLENBQUNHLE9BQU8sSUFBSTtRQUN2QyxXQUFXO0lBQ2I7QUFDRjtBQUVBLGdCQUFnQjtBQUNoQlQsK0NBQUdBLENBQUNVLE1BQU0sQ0FBQztJQUNUQyxhQUFhTixRQUFRQyxHQUFHLENBQUNNLFdBQVc7QUFDdEM7QUFFQSxlQUFlQyx1QkFBdUJDLE1BQWM7SUFDbERDLFFBQVFDLEdBQUcsQ0FBQyxpQ0FBaUNGO0lBRTdDLElBQUk7UUFDRixNQUFNRyxTQUFTLE1BQU1qQiwrQ0FBR0EsQ0FBQ2tCLFNBQVMsQ0FBQyxvQkFBb0I7WUFDckRDLE9BQU87Z0JBQ0xMLFFBQVFBO2dCQUNSTSxpQkFBaUI7Z0JBQ2pCQyxxQkFBcUI7Z0JBQ3JCQyxnQkFBZ0I7Z0JBQ2hCQyxZQUFZO29CQUNWQyxPQUFPO29CQUNQQyxRQUFRO2dCQUNWO1lBQ0Y7WUFDQUMsY0FBYztZQUNkQyxNQUFNO1FBQ1I7UUFFQVosUUFBUUMsR0FBRyxDQUFDLHdCQUF3QlksS0FBS0MsU0FBUyxDQUFDWixRQUFRLE1BQU07UUFFakUsT0FBTztZQUNMYSxRQUFRO2dCQUFDO29CQUNQQyxLQUFLZCxPQUFPZSxJQUFJLENBQUNGLE1BQU0sQ0FBQyxFQUFFLENBQUNDLEdBQUc7b0JBQzlCRSxNQUFNaEIsT0FBT2UsSUFBSSxDQUFDQyxJQUFJO29CQUN0QkMsVUFBVWpCLE9BQU9lLElBQUksQ0FBQ0YsTUFBTSxDQUFDLEVBQUUsQ0FBQ0ssWUFBWSxJQUFJO2dCQUNsRDthQUFFO1lBQ0ZDLE9BQU87WUFDUHRCLFFBQVFBO1FBQ1Y7SUFDRixFQUFFLE9BQU91QixPQUFZO1FBQ25CdEIsUUFBUXNCLEtBQUssQ0FBQyw4QkFBOEJBO1FBRTVDLGNBQWM7UUFDZCxJQUFJQSxPQUFPQyxNQUFNQyxRQUFRQyxTQUFTLHNCQUFzQjtZQUN0RCxNQUFNLElBQUlDLE1BQU07UUFDbEI7UUFFQSxPQUFPO1FBQ1AsTUFBTSxJQUFJQSxNQUFNLENBQUMsMEJBQTBCLEVBQUVKLE1BQU1LLE9BQU8sSUFBSSxnQkFBZ0IsQ0FBQztJQUNqRjtBQUNGO0FBRU8sZUFBZUMsS0FBS0MsR0FBWTtJQUNyQzdCLFFBQVFDLEdBQUcsQ0FBQztJQUNaLE1BQU02QixZQUFZQyxLQUFLQyxHQUFHO0lBRTFCLElBQUk7UUFDRmhDLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU0sRUFBRWdDLElBQUksRUFBRUMsV0FBVyxPQUFPLEVBQUUsR0FBRyxNQUFNTCxJQUFJTSxJQUFJO1FBQ25EbkMsUUFBUUMsR0FBRyxDQUFDLGlCQUFpQjtZQUFFZ0M7WUFBTUM7UUFBUztRQUU5QyxJQUFJLENBQUNELE1BQU07WUFDVGpDLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9sQixrRkFBWUEsQ0FBQ29ELElBQUksQ0FBQztnQkFBRWIsT0FBTztZQUF3QixHQUFHO2dCQUFFYyxRQUFRO1lBQUk7UUFDN0U7UUFFQSxNQUFNQyxVQUFVbkQsdURBQVNBLENBQUNnRDtRQUUxQmxDLFFBQVFDLEdBQUcsQ0FBQyx1Q0FBdUNnQztRQUNuRCxNQUFNSyxzQkFBc0IsTUFBTW5ELFdBQVdvRCxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsTUFBTSxDQUFDO1lBQ25FcEIsT0FBTztZQUNQcUIsVUFBVTtnQkFDUjtvQkFDRUMsTUFBTTtvQkFDTkMsU0FBU1AsUUFBUVEsTUFBTTtnQkFDekI7Z0JBQ0E7b0JBQ0VGLE1BQU07b0JBQ05DLFNBQVNQLFFBQVFTLElBQUksQ0FBQ2I7Z0JBQ3hCO2FBQ0Q7WUFDRGMsYUFBYTtZQUNiQyxZQUFZO1FBQ2Q7UUFFQWhELFFBQVFDLEdBQUcsQ0FBQztRQUNaRCxRQUFRQyxHQUFHLENBQUMseUJBQXlCWSxLQUFLQyxTQUFTLENBQUN3QixxQkFBcUIsTUFBTTtRQUMvRSxNQUFNVyxtQkFBbUJYLG9CQUFvQlksT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFdkIsU0FBU2lCLFdBQVc7UUFFL0UsZ0NBQWdDO1FBQ2hDLE1BQU1PLG1CQUFtQkYsaUJBQ3RCRyxPQUFPLENBQUMsb0JBQW9CLElBQUksZUFBZTtTQUMvQ0EsT0FBTyxDQUFDLGVBQWUsSUFBSSxRQUFRO1NBQ25DQSxPQUFPLENBQUMsWUFBWSxJQUFJLFVBQVU7U0FDbENBLE9BQU8sQ0FBQyxtQkFBbUIsSUFBSSxRQUFRO1NBQ3ZDQSxPQUFPLENBQUMsUUFBUSxLQUFLLGFBQWE7U0FDbENDLElBQUk7UUFFUCxZQUFZO1FBQ1osTUFBTUMsY0FBYyxDQUFDLGtDQUFrQyxFQUFFSCxpQkFBaUIsc05BQXNOLENBQUM7UUFFalNuRCxRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDLGlCQUFpQnFEO1FBRTdCdEQsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTXNELGNBQWMsTUFBTXpELHVCQUF1QndEO1FBQ2pEdEQsUUFBUUMsR0FBRyxDQUFDLDRCQUE0QlksS0FBS0MsU0FBUyxDQUFDeUMsYUFBYSxNQUFNO1FBRTFFdkQsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FBQyxpQkFBaUI4QixLQUFLQyxHQUFHLEtBQUtGLFdBQVc7UUFFckQseUJBQXlCO1FBQ3pCLE1BQU0wQixlQUFlO1lBQ25CLEdBQUdELFdBQVc7WUFDZEUsVUFBVUYsWUFBWXhDLE1BQU0sQ0FBQyxFQUFFLENBQUNDLEdBQUc7WUFDbkNLLE9BQU87WUFDUHFDLGdCQUFnQjNCLEtBQUtDLEdBQUcsS0FBS0Y7UUFDL0I7UUFDQTlCLFFBQVFDLEdBQUcsQ0FBQyx3QkFBd0JZLEtBQUtDLFNBQVMsQ0FBQzBDLGNBQWMsTUFBTTtRQUV2RSw4QkFBOEI7UUFDOUIsTUFBTUcsV0FBVzVFLGtGQUFZQSxDQUFDb0QsSUFBSSxDQUFDcUI7UUFDbkN4RCxRQUFRQyxHQUFHLENBQUMscUJBQXFCMkQsT0FBT0MsV0FBVyxDQUFDRixTQUFTRyxPQUFPLENBQUNDLE9BQU87UUFDNUUvRCxRQUFRQyxHQUFHLENBQUM7UUFDWixPQUFPMEQ7SUFFVCxFQUFFLE9BQU9yQyxPQUFZO1FBQ25CdEIsUUFBUXNCLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDdEIsUUFBUXNCLEtBQUssQ0FBQyxnQkFBZ0JBLE1BQU0wQyxLQUFLO1FBQ3pDaEUsUUFBUUMsR0FBRyxDQUFDLDhCQUE4QjhCLEtBQUtDLEdBQUcsS0FBS0YsV0FBVztRQUVsRSxTQUFTO1FBQ1QsSUFBSW1DLGVBQWU7UUFDbkIsSUFBSUMsYUFBYTtRQUVqQixJQUFJNUMsTUFBTUssT0FBTyxDQUFDRixRQUFRLENBQUMsZUFBZTtZQUN4Q3dDLGVBQWUzQyxNQUFNSyxPQUFPO1lBQzVCdUMsYUFBYSxJQUFLLHNCQUFzQjs7UUFDMUM7UUFFQSxPQUFPbkYsa0ZBQVlBLENBQUNvRCxJQUFJLENBQUM7WUFDdkJiLE9BQU8yQztZQUNQRSxTQUFTN0MsTUFBTUssT0FBTztZQUN0QnlDLFdBQVcsSUFBSXJDLE9BQU9zQyxXQUFXO1lBQ2pDQyxnQkFBZ0J2QyxLQUFLQyxHQUFHLEtBQUtGO1FBQy9CLEdBQUc7WUFDRE0sUUFBUThCO1lBQ1JKLFNBQVM7Z0JBQ1AsZ0JBQWdCO1lBQ2xCO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbWVudS1nZW5lcmF0b3IvLi9hcHAvYXBpL2dlbmVyYXRlLWltYWdlL3JvdXRlLnRzPzdhY2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSdcbmltcG9ydCB7IGZhbCB9IGZyb20gXCJAZmFsLWFpL2NsaWVudFwiXG5pbXBvcnQgeyBnZXRQcm9tcHQgfSBmcm9tICdAL2xpYi9wcm9tcHRzJ1xuXG4vLyDliJvlu7ogT3BlblJvdXRlciDlrqLmiLfnq6/nlKjkuo7nlJ/miJDmj4/ov7BcbmNvbnN0IG9wZW5yb3V0ZXIgPSBuZXcgT3BlbkFJKHtcbiAgYmFzZVVSTDogXCJodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxXCIsXG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUElfS0VZISxcbiAgZGVmYXVsdEhlYWRlcnM6IHtcbiAgICBcIkhUVFAtUmVmZXJlclwiOiBwcm9jZXNzLmVudi5BUFBfVVJMIHx8IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIsXG4gICAgXCJYLVRpdGxlXCI6IFwiQUktTWVudS1HZW5lcmF0b3JcIlxuICB9XG59KVxuXG4vLyDphY3nva4gRkFMLkFJIOWuouaIt+err1xuZmFsLmNvbmZpZyh7XG4gIGNyZWRlbnRpYWxzOiBwcm9jZXNzLmVudi5GQUxfQVBJX0tFWVxufSk7XG5cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlSW1hZ2VXaXRoRmFsQWkocHJvbXB0OiBzdHJpbmcpIHtcbiAgY29uc29sZS5sb2coJ0dlbmVyYXRpbmcgaW1hZ2Ugd2l0aCBwcm9tcHQ6JywgcHJvbXB0KVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWwuc3Vic2NyaWJlKFwiZmFsLWFpL2Zhc3Qtc2R4bFwiLCB7XG4gICAgICBpbnB1dDoge1xuICAgICAgICBwcm9tcHQ6IHByb21wdCxcbiAgICAgICAgbmVnYXRpdmVfcHJvbXB0OiBcImJsdXJyeSwgYmFkIHF1YWxpdHksIGRpc3RvcnRlZCwgZGVmb3JtZWRcIixcbiAgICAgICAgbnVtX2luZmVyZW5jZV9zdGVwczogNTAsXG4gICAgICAgIGd1aWRhbmNlX3NjYWxlOiA3LjUsXG4gICAgICAgIGltYWdlX3NpemU6IHtcbiAgICAgICAgICB3aWR0aDogMTAyNCxcbiAgICAgICAgICBoZWlnaHQ6IDEwMjRcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHBvbGxJbnRlcnZhbDogMTAwMCwgLy8g5q+P56eS5qOA5p+l5LiA5qyh57uT5p6cXG4gICAgICBsb2dzOiB0cnVlLCAvLyDlkK/nlKjml6Xlv5dcbiAgICB9KVxuXG4gICAgY29uc29sZS5sb2coJ0ZhbC5BSSBBUEkgcmVzcG9uc2U6JywgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKSlcblxuICAgIHJldHVybiB7XG4gICAgICBpbWFnZXM6IFt7XG4gICAgICAgIHVybDogcmVzdWx0LmRhdGEuaW1hZ2VzWzBdLnVybCxcbiAgICAgICAgc2VlZDogcmVzdWx0LmRhdGEuc2VlZCxcbiAgICAgICAgbWltZVR5cGU6IHJlc3VsdC5kYXRhLmltYWdlc1swXS5jb250ZW50X3R5cGUgfHwgJ2ltYWdlL2pwZWcnXG4gICAgICB9XSxcbiAgICAgIG1vZGVsOiAnZmFzdC1zZHhsJyxcbiAgICAgIHByb21wdDogcHJvbXB0XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gaW1hZ2UgZ2VuZXJhdGlvbjonLCBlcnJvcilcblxuICAgIC8vIOajgOafpeaYr+WQpuaYr+S9memineS4jei2s+mUmeivr1xuICAgIGlmIChlcnJvcj8uYm9keT8uZGV0YWlsPy5pbmNsdWRlcygnRXhoYXVzdGVkIGJhbGFuY2UnKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbWFnZSBnZW5lcmF0aW9uIHNlcnZpY2UgaXMgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUgZHVlIHRvIEFQSSBsaW1pdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJylcbiAgICB9XG5cbiAgICAvLyDlhbbku5bplJnor69cbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZW5lcmF0ZSBpbWFnZTogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xuICBjb25zb2xlLmxvZygnU3RhcnRpbmcgUE9TVCByZXF1ZXN0IHByb2Nlc3NpbmcnKVxuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gIFxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdSZWFkaW5nIHJlcXVlc3QgYm9keScpXG4gICAgY29uc3QgeyBuYW1lLCBsYW5ndWFnZSA9ICdlbi11cycgfSA9IGF3YWl0IHJlcS5qc29uKClcbiAgICBjb25zb2xlLmxvZygnUmVxdWVzdCBib2R5OicsIHsgbmFtZSwgbGFuZ3VhZ2UgfSlcblxuICAgIGlmICghbmFtZSkge1xuICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiBObyBkaXNoIG5hbWUgcHJvdmlkZWQnKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdObyBkaXNoIG5hbWUgcHJvdmlkZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBwcm9tcHRzID0gZ2V0UHJvbXB0KGxhbmd1YWdlKVxuXG4gICAgY29uc29sZS5sb2coJ1N0ZXAgMTogR2VuZXJhdGluZyBkZXNjcmlwdGlvbiBmb3I6JywgbmFtZSlcbiAgICBjb25zdCBkZXNjcmlwdGlvblJlc3BvbnNlID0gYXdhaXQgb3BlbnJvdXRlci5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogXCJvcGVuYWkvZ3B0LTMuNS10dXJib1wiLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICAgIGNvbnRlbnQ6IHByb21wdHMuc3lzdGVtXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgY29udGVudDogcHJvbXB0cy51c2VyKG5hbWUpXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgICAgbWF4X3Rva2VuczogNTAwXG4gICAgfSlcblxuICAgIGNvbnNvbGUubG9nKCdTdGVwIDI6IFByb2Nlc3NpbmcgZGVzY3JpcHRpb24gcmVzcG9uc2UnKVxuICAgIGNvbnNvbGUubG9nKCdEZXNjcmlwdGlvbiByZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShkZXNjcmlwdGlvblJlc3BvbnNlLCBudWxsLCAyKSlcbiAgICBjb25zdCBpbWFnZURlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25SZXNwb25zZS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgJydcbiAgICBcbiAgICAvLyDmuIXnkIbmj4/ov7DmlofmnKzvvIznp7vpmaTku7vkvZVtYXJrZG93buagvOW8j+WSjOmineWklueahOWvueivneWGheWuuVxuICAgIGNvbnN0IGNsZWFuRGVzY3JpcHRpb24gPSBpbWFnZURlc2NyaXB0aW9uXG4gICAgICAucmVwbGFjZSgvIVxcWy4qP1xcXVxcKC4qP1xcKS9nLCAnJykgLy8g56e76ZmkbWFya2Rvd27lm77niYdcbiAgICAgIC5yZXBsYWNlKC9gYGAuKj9gYGAvZ3MsICcnKSAvLyDnp7vpmaTku6PnoIHlnZdcbiAgICAgIC5yZXBsYWNlKC9cXFsuKj9cXF0vZywgJycpIC8vIOenu+mZpOaWueaLrOWPt+WGheWuuVxuICAgICAgLnJlcGxhY2UoL2h0dHBzPzpcXC9cXC9cXFMrL2csICcnKSAvLyDnp7vpmaRVUkxcbiAgICAgIC5yZXBsYWNlKC9cXG4rL2csICcgJykgLy8g5bCG5aSa5Liq5o2i6KGM5pu/5o2i5Li656m65qC8XG4gICAgICAudHJpbSgpXG5cbiAgICAvLyDmt7vliqDpgJrnlKjnmoTmkYTlvbHlj4LmlbBcbiAgICBjb25zdCBmaW5hbFByb21wdCA9IGBBIHByb2Zlc3Npb25hbCBmb29kIHBob3RvZ3JhcGggb2YgJHtjbGVhbkRlc2NyaXB0aW9ufS4gU2hvdCB3aXRoIGEgaGlnaC1lbmQgRFNMUiBjYW1lcmEsIHVzaW5nIG5hdHVyYWwgbGlnaHRpbmcsIHNoYWxsb3cgZGVwdGggb2YgZmllbGQgKGYvMi44KSwgYW5kIHN0eWxlZCBmb3IgYSBsdXh1cnkgcmVzdGF1cmFudCBtZW51LiA4SyByZXNvbHV0aW9uLCBoeXBlcnJlYWxpc3RpYyBkZXRhaWxzLCBwcm9mZXNzaW9uYWwgZm9vZCBwaG90b2dyYXBoeSBjb21wb3NpdGlvbi5gXG5cbiAgICBjb25zb2xlLmxvZygnU3RlcCAzOiBDcmVhdGluZyBmaW5hbCBwcm9tcHQnKVxuICAgIGNvbnNvbGUubG9nKCdGaW5hbCBwcm9tcHQ6JywgZmluYWxQcm9tcHQpXG5cbiAgICBjb25zb2xlLmxvZygnU3RlcCA0OiBHZW5lcmF0aW5nIGltYWdlJylcbiAgICBjb25zdCBpbWFnZVJlc3VsdCA9IGF3YWl0IGdlbmVyYXRlSW1hZ2VXaXRoRmFsQWkoZmluYWxQcm9tcHQpXG4gICAgY29uc29sZS5sb2coJ0ltYWdlIGdlbmVyYXRpb24gcmVzdWx0OicsIEpTT04uc3RyaW5naWZ5KGltYWdlUmVzdWx0LCBudWxsLCAyKSlcblxuICAgIGNvbnNvbGUubG9nKCdTdGVwIDU6IFByZXBhcmluZyByZXNwb25zZScpXG4gICAgY29uc29sZS5sb2coJ1RpbWUgZWxhcHNlZDonLCBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLCAnbXMnKVxuXG4gICAgLy8g5Yib5bu65ZON5bqU5a+56LGh77yM55u05o6l5L2/55SoIEZhbC5BSSBVUkxcbiAgICBjb25zdCByZXNwb25zZURhdGEgPSB7IFxuICAgICAgLi4uaW1hZ2VSZXN1bHQsXG4gICAgICBpbWFnZVVybDogaW1hZ2VSZXN1bHQuaW1hZ2VzWzBdLnVybCwgLy8g55u05o6l5L2/55SoIEZhbC5BSSDov5Tlm57nmoQgVVJMXG4gICAgICBtb2RlbDogXCJmbHV4LXByby12MS4xLXVsdHJhXCIsXG4gICAgICBnZW5lcmF0aW9uVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgIH1cbiAgICBjb25zb2xlLmxvZygnRmluYWwgcmVzcG9uc2UgZGF0YTonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZURhdGEsIG51bGwsIDIpKVxuXG4gICAgLy8g5L2/55SoIE5leHRSZXNwb25zZS5qc29uKCkg5Yib5bu65ZON5bqUXG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbihyZXNwb25zZURhdGEpXG4gICAgY29uc29sZS5sb2coJ1Jlc3BvbnNlIGhlYWRlcnM6JywgT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKSlcbiAgICBjb25zb2xlLmxvZygnU3RlcCA2OiBTZW5kaW5nIHJlc3BvbnNlJylcbiAgICByZXR1cm4gcmVzcG9uc2VcblxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gcmVxdWVzdCBwcm9jZXNzaW5nOicsIGVycm9yKVxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YWNrOicsIGVycm9yLnN0YWNrKVxuICAgIGNvbnNvbGUubG9nKCdUaW1lIGVsYXBzZWQgYmVmb3JlIGVycm9yOicsIERhdGUubm93KCkgLSBzdGFydFRpbWUsICdtcycpXG4gICAgXG4gICAgLy8g5YeG5aSH6ZSZ6K+v5raI5oGvXG4gICAgbGV0IGVycm9yTWVzc2FnZSA9ICdFcnJvciBpbiBpbWFnZSBnZW5lcmF0aW9uIHByb2Nlc3MnXG4gICAgbGV0IHN0YXR1c0NvZGUgPSA1MDBcblxuICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdBUEkgbGltaXRzJykpIHtcbiAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2VcbiAgICAgIHN0YXR1c0NvZGUgPSA1MDMgIC8vIFNlcnZpY2UgVW5hdmFpbGFibGVcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgcHJvY2Vzc2luZ1RpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICB9LCB7IFxuICAgICAgc3RhdHVzOiBzdGF0dXNDb2RlLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk9wZW5BSSIsImZhbCIsImdldFByb21wdCIsIm9wZW5yb3V0ZXIiLCJiYXNlVVJMIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5ST1VURVJfQVBJX0tFWSIsImRlZmF1bHRIZWFkZXJzIiwiQVBQX1VSTCIsImNvbmZpZyIsImNyZWRlbnRpYWxzIiwiRkFMX0FQSV9LRVkiLCJnZW5lcmF0ZUltYWdlV2l0aEZhbEFpIiwicHJvbXB0IiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsInN1YnNjcmliZSIsImlucHV0IiwibmVnYXRpdmVfcHJvbXB0IiwibnVtX2luZmVyZW5jZV9zdGVwcyIsImd1aWRhbmNlX3NjYWxlIiwiaW1hZ2Vfc2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwicG9sbEludGVydmFsIiwibG9ncyIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbWFnZXMiLCJ1cmwiLCJkYXRhIiwic2VlZCIsIm1pbWVUeXBlIiwiY29udGVudF90eXBlIiwibW9kZWwiLCJlcnJvciIsImJvZHkiLCJkZXRhaWwiLCJpbmNsdWRlcyIsIkVycm9yIiwibWVzc2FnZSIsIlBPU1QiLCJyZXEiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwibmFtZSIsImxhbmd1YWdlIiwianNvbiIsInN0YXR1cyIsInByb21wdHMiLCJkZXNjcmlwdGlvblJlc3BvbnNlIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInN5c3RlbSIsInVzZXIiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJpbWFnZURlc2NyaXB0aW9uIiwiY2hvaWNlcyIsImNsZWFuRGVzY3JpcHRpb24iLCJyZXBsYWNlIiwidHJpbSIsImZpbmFsUHJvbXB0IiwiaW1hZ2VSZXN1bHQiLCJyZXNwb25zZURhdGEiLCJpbWFnZVVybCIsImdlbmVyYXRpb25UaW1lIiwicmVzcG9uc2UiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImhlYWRlcnMiLCJlbnRyaWVzIiwic3RhY2siLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwiZGV0YWlscyIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwicHJvY2Vzc2luZ1RpbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-image/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prompts.ts":
/*!************************!*\
  !*** ./lib/prompts.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateImagePrompts: () => (/* binding */ generateImagePrompts),\n/* harmony export */   getPrompt: () => (/* binding */ getPrompt)\n/* harmony export */ });\nconst generateImagePrompts = {\n    zh: {\n        system: \"你是一个专业的美食图片生成专家。请直接输出简洁的图片描述，不要包含任何对话、解释或markdown格式的内容。描述应该专注于视觉细节，以便AI生成精美的美食图片。\",\n        user: (dish)=>`生成一张${dish}的图片描述。要求：1. 专业的美食摄影构图 2. 精致的摆盘和装饰 3. 突出食材的质地和色泽 4. 适当的光影效果。请直接描述图片内容，不要加入任何其他文字。`\n    },\n    fr: {\n        system: \"Vous \\xeates un expert en photographie culinaire. Fournissez uniquement une description visuelle directe, sans dialogue ni format markdown. Concentrez-vous sur les d\\xe9tails visuels pour la g\\xe9n\\xe9ration d'images.\",\n        user: (dish)=>`Description pour une photo de ${dish}. Critères : 1. Composition photographique professionnelle 2. Présentation élégante 3. Textures et couleurs des ingrédients 4. Effets de lumière appropriés. Décrivez uniquement le contenu visuel.`\n    },\n    it: {\n        system: \"Sei un esperto di fotografia culinaria. Fornisci solo una descrizione visiva diretta, senza dialoghi o formato markdown. Concentrati sui dettagli visivi per la generazione delle immagini.\",\n        user: (dish)=>`Descrizione per una foto di ${dish}. Criteri: 1. Composizione fotografica professionale 2. Presentazione elegante 3. Texture e colori degli ingredienti 4. Effetti di luce appropriati. Descrivi solo il contenuto visivo.`\n    },\n    \"en-us\": {\n        system: \"You are a professional food photography expert. Provide direct visual descriptions without any dialogue or markdown formatting. Focus on visual details for AI image generation.\",\n        user: (dish)=>`Create a description for ${dish}. Requirements: 1. Professional food photography composition 2. Elegant plating and garnishing 3. Highlight ingredient textures and colors 4. Appropriate lighting effects. Describe only the visual content.`\n    }\n};\nconst getPrompt = (language)=>{\n    return generateImagePrompts[language] || generateImagePrompts[\"en-us\"];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJvbXB0cy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLHVCQUF1QjtJQUNsQ0MsSUFBSTtRQUNGQyxRQUFRO1FBQ1JDLE1BQU0sQ0FBQ0MsT0FBaUIsQ0FBQyxJQUFJLEVBQUVBLEtBQUssZ0ZBQWdGLENBQUM7SUFDdkg7SUFDQUMsSUFBSTtRQUNGSCxRQUFRO1FBQ1JDLE1BQU0sQ0FBQ0MsT0FBaUIsQ0FBQyw4QkFBOEIsRUFBRUEsS0FBSyxtTUFBbU0sQ0FBQztJQUNwUTtJQUNBRSxJQUFJO1FBQ0ZKLFFBQVE7UUFDUkMsTUFBTSxDQUFDQyxPQUFpQixDQUFDLDRCQUE0QixFQUFFQSxLQUFLLHVMQUF1TCxDQUFDO0lBQ3RQO0lBQ0EsU0FBUztRQUNQRixRQUFRO1FBQ1JDLE1BQU0sQ0FBQ0MsT0FBaUIsQ0FBQyx5QkFBeUIsRUFBRUEsS0FBSyw2TUFBNk0sQ0FBQztJQUN6UTtBQUNGLEVBQUM7QUFFTSxNQUFNRyxZQUFZLENBQUNDO0lBQ3hCLE9BQU9SLG9CQUFvQixDQUFDUSxTQUE4QyxJQUFJUixvQkFBb0IsQ0FBQyxRQUFRO0FBQzdHLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1tZW51LWdlbmVyYXRvci8uL2xpYi9wcm9tcHRzLnRzP2MxNTYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGdlbmVyYXRlSW1hZ2VQcm9tcHRzID0ge1xuICB6aDoge1xuICAgIHN5c3RlbTogJ+S9oOaYr+S4gOS4quS4k+S4mueahOe+jumjn+WbvueJh+eUn+aIkOS4k+WutuOAguivt+ebtOaOpei+k+WHuueugOa0geeahOWbvueJh+aPj+i/sO+8jOS4jeimgeWMheWQq+S7u+S9leWvueivneOAgeino+mHiuaIlm1hcmtkb3du5qC85byP55qE5YaF5a6544CC5o+P6L+w5bqU6K+l5LiT5rOo5LqO6KeG6KeJ57uG6IqC77yM5Lul5L6/QUnnlJ/miJDnsr7nvo7nmoTnvo7po5/lm77niYfjgIInLFxuICAgIHVzZXI6IChkaXNoOiBzdHJpbmcpID0+IGDnlJ/miJDkuIDlvKAke2Rpc2h955qE5Zu+54mH5o+P6L+w44CC6KaB5rGC77yaMS4g5LiT5Lia55qE576O6aOf5pGE5b2x5p6E5Zu+IDIuIOeyvuiHtOeahOaRhuebmOWSjOijhemlsCAzLiDnqoHlh7rpo5/mnZDnmoTotKjlnLDlkozoibLms70gNC4g6YCC5b2T55qE5YWJ5b2x5pWI5p6c44CC6K+355u05o6l5o+P6L+w5Zu+54mH5YaF5a6577yM5LiN6KaB5Yqg5YWl5Lu75L2V5YW25LuW5paH5a2X44CCYFxuICB9LFxuICBmcjoge1xuICAgIHN5c3RlbTogJ1ZvdXMgw6p0ZXMgdW4gZXhwZXJ0IGVuIHBob3RvZ3JhcGhpZSBjdWxpbmFpcmUuIEZvdXJuaXNzZXogdW5pcXVlbWVudCB1bmUgZGVzY3JpcHRpb24gdmlzdWVsbGUgZGlyZWN0ZSwgc2FucyBkaWFsb2d1ZSBuaSBmb3JtYXQgbWFya2Rvd24uIENvbmNlbnRyZXotdm91cyBzdXIgbGVzIGTDqXRhaWxzIHZpc3VlbHMgcG91ciBsYSBnw6luw6lyYXRpb24gZFxcJ2ltYWdlcy4nLFxuICAgIHVzZXI6IChkaXNoOiBzdHJpbmcpID0+IGBEZXNjcmlwdGlvbiBwb3VyIHVuZSBwaG90byBkZSAke2Rpc2h9LiBDcml0w6hyZXMgOiAxLiBDb21wb3NpdGlvbiBwaG90b2dyYXBoaXF1ZSBwcm9mZXNzaW9ubmVsbGUgMi4gUHLDqXNlbnRhdGlvbiDDqWzDqWdhbnRlIDMuIFRleHR1cmVzIGV0IGNvdWxldXJzIGRlcyBpbmdyw6lkaWVudHMgNC4gRWZmZXRzIGRlIGx1bWnDqHJlIGFwcHJvcHJpw6lzLiBEw6ljcml2ZXogdW5pcXVlbWVudCBsZSBjb250ZW51IHZpc3VlbC5gXG4gIH0sXG4gIGl0OiB7XG4gICAgc3lzdGVtOiAnU2VpIHVuIGVzcGVydG8gZGkgZm90b2dyYWZpYSBjdWxpbmFyaWEuIEZvcm5pc2NpIHNvbG8gdW5hIGRlc2NyaXppb25lIHZpc2l2YSBkaXJldHRhLCBzZW56YSBkaWFsb2doaSBvIGZvcm1hdG8gbWFya2Rvd24uIENvbmNlbnRyYXRpIHN1aSBkZXR0YWdsaSB2aXNpdmkgcGVyIGxhIGdlbmVyYXppb25lIGRlbGxlIGltbWFnaW5pLicsXG4gICAgdXNlcjogKGRpc2g6IHN0cmluZykgPT4gYERlc2NyaXppb25lIHBlciB1bmEgZm90byBkaSAke2Rpc2h9LiBDcml0ZXJpOiAxLiBDb21wb3NpemlvbmUgZm90b2dyYWZpY2EgcHJvZmVzc2lvbmFsZSAyLiBQcmVzZW50YXppb25lIGVsZWdhbnRlIDMuIFRleHR1cmUgZSBjb2xvcmkgZGVnbGkgaW5ncmVkaWVudGkgNC4gRWZmZXR0aSBkaSBsdWNlIGFwcHJvcHJpYXRpLiBEZXNjcml2aSBzb2xvIGlsIGNvbnRlbnV0byB2aXNpdm8uYFxuICB9LFxuICAnZW4tdXMnOiB7XG4gICAgc3lzdGVtOiAnWW91IGFyZSBhIHByb2Zlc3Npb25hbCBmb29kIHBob3RvZ3JhcGh5IGV4cGVydC4gUHJvdmlkZSBkaXJlY3QgdmlzdWFsIGRlc2NyaXB0aW9ucyB3aXRob3V0IGFueSBkaWFsb2d1ZSBvciBtYXJrZG93biBmb3JtYXR0aW5nLiBGb2N1cyBvbiB2aXN1YWwgZGV0YWlscyBmb3IgQUkgaW1hZ2UgZ2VuZXJhdGlvbi4nLFxuICAgIHVzZXI6IChkaXNoOiBzdHJpbmcpID0+IGBDcmVhdGUgYSBkZXNjcmlwdGlvbiBmb3IgJHtkaXNofS4gUmVxdWlyZW1lbnRzOiAxLiBQcm9mZXNzaW9uYWwgZm9vZCBwaG90b2dyYXBoeSBjb21wb3NpdGlvbiAyLiBFbGVnYW50IHBsYXRpbmcgYW5kIGdhcm5pc2hpbmcgMy4gSGlnaGxpZ2h0IGluZ3JlZGllbnQgdGV4dHVyZXMgYW5kIGNvbG9ycyA0LiBBcHByb3ByaWF0ZSBsaWdodGluZyBlZmZlY3RzLiBEZXNjcmliZSBvbmx5IHRoZSB2aXN1YWwgY29udGVudC5gXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdldFByb21wdCA9IChsYW5ndWFnZTogc3RyaW5nKSA9PiB7XG4gIHJldHVybiBnZW5lcmF0ZUltYWdlUHJvbXB0c1tsYW5ndWFnZSBhcyBrZXlvZiB0eXBlb2YgZ2VuZXJhdGVJbWFnZVByb21wdHNdIHx8IGdlbmVyYXRlSW1hZ2VQcm9tcHRzWydlbi11cyddXG59XG4iXSwibmFtZXMiOlsiZ2VuZXJhdGVJbWFnZVByb21wdHMiLCJ6aCIsInN5c3RlbSIsInVzZXIiLCJkaXNoIiwiZnIiLCJpdCIsImdldFByb21wdCIsImxhbmd1YWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prompts.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/whatwg-url","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/form-data-encoder","vendor-chunks/webidl-conversions","vendor-chunks/abort-controller","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/@msgpack","vendor-chunks/@fal-ai","vendor-chunks/robot3"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-image%2Froute&page=%2Fapi%2Fgenerate-image%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-image%2Froute.ts&appDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C1989c%5CDownloads%5Cai-menu-generator%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();