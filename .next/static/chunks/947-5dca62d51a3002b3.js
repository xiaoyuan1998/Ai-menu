"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{9947:function(e,a,t){t.d(a,{v:function(){return v}});var r=t(7437),n=t(2265),s=t(7100),i=t(5754),o=t(7815),l=t(5946),c=t(1657);let d=n.forwardRef((e,a)=>{let{className:t,value:n,...s}=e;return(0,r.jsx)(l.fC,{ref:a,className:(0,c.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:(0,r.jsx)(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});d.displayName=l.fC.displayName;var m=t(6691),u=t.n(m),g=t(1541),x=t(4280),f=t(9954),h=t(6395);let p={zh:{dropzoneText:"拖放图片到这里，或点击上传",uploadButton:"选择文件",orText:"或者",createNewButton:"从头开始创建",analyzingImage:"正在分析图片...",generatingImage:"生成中...",reGenerateButton:"重新生成",startOverButton:"重新开始",generateButton:"点击生成图片",detectedDishes:"识别到的菜品",generateNowButton:"立即生成图片"},fr:{dropzoneText:"D\xe9posez vos images ici ou cliquez pour t\xe9l\xe9charger",uploadButton:"S\xe9lectionner un fichier",orText:"ou",createNewButton:"Cr\xe9er \xe0 partir de z\xe9ro",analyzingImage:"Analyse de l'image en cours...",generatingImage:"G\xe9n\xe9ration en cours...",reGenerateButton:"Reg\xe9n\xe9rer",startOverButton:"Recommencer",generateButton:"Cliquer pour g\xe9n\xe9rer l'image",detectedDishes:"Plats d\xe9tect\xe9s",generateNowButton:"G\xe9n\xe9rer l'image maintenant"},it:{dropzoneText:"Trascina le immagini qui o clicca per caricare",uploadButton:"Seleziona file",orText:"oppure",createNewButton:"Crea da zero",analyzingImage:"Analisi dell'immagine in corso...",generatingImage:"Generazione in corso...",reGenerateButton:"Rigenera",startOverButton:"Ricomincia",generateButton:"Clicca per generare l'immagine",detectedDishes:"Piatti rilevati",generateNowButton:"Genera l'immagine ora"}};function v(){let{language:e}=(0,h.useLanguage)(),a=p[e],[t,l]=(0,n.useState)([]),[c,m]=(0,n.useState)(!1),[v,N]=(0,n.useState)(0),[j,y]=(0,n.useState)(null),b=async e=>{m(!0),N(0);try{let a=new FormData;a.append("image",e);let t=await fetch("/api/analyze-image",{method:"POST",body:a});if(!t.ok)throw Error("Failed to analyze image");let r=await t.json();l(r.dishes.map(e=>({...e,imageUrl:void 0,isGenerating:!1})))}catch(e){console.error("Error processing image:",e)}finally{m(!1),N(0)}},w=async a=>{l(t.map(e=>e.name===a.name?{...e,isGenerating:!0}:e));try{let t=await fetch("/api/generate-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,language:e})});if(!t.ok)throw Error("Failed to generate image");let r=await t.json();l(e=>e.map(e=>e.name===a.name?{...e,imageUrl:r.imageUrl,isGenerating:!1}:e))}catch(e){console.error("Error generating image:",e),l(e=>e.map(e=>e.name===a.name?{...e,isGenerating:!1}:e))}},z=(0,n.useCallback)(e=>{e.length>0&&(y(e[0]),b(e[0]))},[]),{getRootProps:B,getInputProps:C,isDragActive:G}=(0,s.uI)({onDrop:z,accept:{"image/*":[".jpeg",".jpg",".png"]},multiple:!1});return(0,r.jsx)("div",{id:"create",className:"container mx-auto px-4 py-12",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,r.jsxs)(o.Zb,{className:"p-8",children:[(0,r.jsxs)("div",{...B(),className:"border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-colors\n              ".concat(G?"border-primary bg-primary/5":"border-gray-300 hover:border-primary"),children:[(0,r.jsx)("input",{...C()}),(0,r.jsx)(g.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg mb-2",children:a.dropzoneText}),(0,r.jsx)(i.z,{variant:"outline",className:"mt-4",children:a.uploadButton})]}),c&&(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)(d,{value:v,className:"mb-2"}),(0,r.jsxs)("p",{className:"text-center text-sm text-gray-500",children:[a.analyzingImage," ",Math.round(v),"%"]})]}),t.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mt-8 mb-4 flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold",children:[a.detectedDishes,"（",t.length,"）"]}),(0,r.jsxs)(i.z,{onClick:()=>l([]),children:[(0,r.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),a.startOverButton]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,t)=>(0,r.jsx)(o.Zb,{className:"overflow-hidden",children:(0,r.jsxs)(o.aY,{className:"p-4",children:[e.imageUrl?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden mb-4",children:[(0,r.jsx)(u(),{src:e.imageUrl,alt:e.name,fill:!0,className:"object-cover"}),e.isGenerating&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-white",children:[(0,r.jsx)(x.Z,{className:"w-8 h-8 mx-auto mb-2 animate-spin"}),(0,r.jsx)("p",{className:"text-sm",children:a.generatingImage})]})})]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)(i.z,{className:"flex-1",variant:"outline",onClick:()=>w(e),disabled:e.isGenerating,children:[(0,r.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),a.reGenerateButton]})})]}):(0,r.jsx)("div",{className:"aspect-video bg-gray-100 flex items-center justify-center",children:e.isGenerating?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(x.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-400 animate-spin"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:a.generatingImage})]}):(0,r.jsxs)(i.z,{onClick:()=>w(e),className:"flex-1",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),a.generateNowButton]})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h3",{className:"font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]})]})},t))})]})]})})})}},5754:function(e,a,t){t.d(a,{z:function(){return c}});var r=t(7437),n=t(2265),s=t(4949),i=t(6061),o=t(1657);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,a)=>{let{className:t,variant:n,size:i,asChild:c=!1,...d}=e,m=c?s.g7:"button";return(0,r.jsx)(m,{className:(0,o.cn)(l({variant:n,size:i,className:t})),ref:a,...d})});c.displayName="Button"},7815:function(e,a,t){t.d(a,{Zb:function(){return i},aY:function(){return o}});var r=t(7437),n=t(2265),s=t(1657);let i=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...n})});i.displayName="Card",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...n})}).displayName="CardHeader",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("h3",{ref:a,className:(0,s.cn)("font-semibold leading-none tracking-tight",t),...n})}).displayName="CardTitle",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",t),...n})}).displayName="CardDescription";let o=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",t),...n})});o.displayName="CardContent",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},6395:function(e,a,t){t.r(a),t.d(a,{LanguageProvider:function(){return i},useLanguage:function(){return o}});var r=t(7437),n=t(2265);let s=(0,n.createContext)(void 0);function i(e){let{children:a}=e,[t,i]=(0,n.useState)(()=>{{let e=localStorage.getItem("language");return e&&["zh","fr","it"].includes(e)?e:"zh"}});return(0,r.jsx)(s.Provider,{value:{language:t,setLanguage:e=>{localStorage.setItem("language",e),i(e)}},children:a})}function o(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},1657:function(e,a,t){t.d(a,{cn:function(){return s}});var r=t(7042),n=t(4769);function s(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,n.m6)((0,r.W)(a))}}}]);